Date of Notes : 21-12-2020

> docker version

> docker info

--  create a container from image named hello-world and then start this created container
Old command
> docker run hello-world

or

new command
> docker container run hello-world


-- remove image
> docker image rm -f hello-world
Untagged: hello-world:latest
Untagged: hello-world@sha256:1a523af650137b8accdaed439c17d684df61ee4d74feac151b5b337bd29e7eec
Deleted: sha256:bf756fb1ae65adf866bd8c456593cd24beb6a0a061dedf42b26a993176745f6b


-- how to use help command
> docker image --help
unknown docker image COMMANDin -elp
See 'docker image --help'.
Manage images
Usage:
Commands:
  build       Build an image from a Dockerfile
  history     Show the history of an image
  import      Import the contents from a tarball to create a filesystem image
  inspect     Display detailed information on one or more images
  load        Load an image from a tar archive or STDIN
  ls          List images
  prune       Remove unused images
  pull        Pull an image or a repository from a registry
  push        Push an image or a repository to a registry
  rm          Remove one or more images
  save        Save one or more images to a tar archive (streamed to STDOUT by default)
  tag         Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE

Run 'docker image COMMAND --help' for more information on a command.

-- create a container from image at the Docker Hub and then start
> docker container run --name firstcontainer ozgurozturknet/app1
Unable to find image 'ozgurozturknet/app1:latest' locally
latest: Pulling from ozgurozturknet/app1
169185f82c45: Pull complete
1e929b64ace7: Pull complete
3bd64be52cfe: Pull complete
d5d6362eff06: Pull complete
Digest: sha256:31acbf06b10306dc403bb57ecd2be4e870d9ecacacbff006a56c1f5e40f762d6
Status: Downloaded newer image for ozgurozturknet/app1:latest
Merhaba arkadaslar ben App1 uygulamasiyim

-- show containers which is running
> docker container ls
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES

-- show all container
> docker container ls -a
CONTAINER ID        IMAGE                 COMMAND             CREATED             STATUS                         PORTS               NAMES
9dbc857ba4bf        ozgurozturknet/app1   "java app1"         About an hour ago   Exited (0) About an hour ago                       firstcontainer
14a8371f7cfa        bf756fb1ae65          "/hello"            2 hours ago         Exited (0) 2 hours ago                             blissful_newton
7c50837145b5        bf756fb1ae65          "/hello"            2 hours ago         Exited (0) 2 hours ago                             vigorous_lederberg
d9101e17afa0        bf756fb1ae65          "/hello"            2 hours ago         Exited (0) 2 hours ago                             determined_nobel

-- created a new container from DocherHub
> docker container run -p 80:80 ozgurozturknet/adanzyedocker
Unable to find image 'ozgurozturknet/adanzyedocker:latest' locally
latest: Pulling from ozgurozturknet/adanzyedocker
9d48c3bd43c5: Pull complete
d3565940ff69: Pull complete
1cc6c921162a: Pull complete
17877ce0de23: Pull complete
4e10ed3cf6fc: Pull complete
84d0ceb32a5d: Pull complete
1587ec6e5583: Pull complete
e7daf8feccda: Pull complete
49641b0d4586: Pull complete
1c5aa5048b34: Pull complete
Digest: sha256:10631a62b96b8dc8c468fe482aff70871c6c81f4a49ea4c5350ce765cf9f2185
Status: Downloaded newer image for ozgurozturknet/adanzyedocker:latest
AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 172.17.0.2. Set the 'ServerName' directive globally to suppress this message
AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 172.17.0.2. Set the 'ServerName' directive globally to suppress this message
[Mon Dec 21 23:34:03.854449 2020] [mpm_event:notice] [pid 1:tid 140605397114184] AH00489: Apache/2.4.41 (Unix) configured -- resuming normal operations
[Mon Dec 21 23:34:03.854975 2020] [core:notice] [pid 1:tid 140605397114184] AH00094: Command line: 'httpd -D FOREGROUND'

> docker container ls
CONTAINER ID        IMAGE                          COMMAND              CREATED             STATUS              PORTS                NAMES
3da00776cecb        ozgurozturknet/adanzyedocker   "httpd-foreground"   3 minutes ago       Up 3 minutes        0.0.0.0:80->80/tcp   silly_turing

-- showed logs with container_id which has a unique code
> docker container logs 3da00776cecb
AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 172.17.0.2. Set the 'ServerName' directive globally to suppress this message
AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 172.17.0.2. Set the 'ServerName' directive globally to suppress this message
[Mon Dec 21 23:34:03.854449 2020] [mpm_event:notice] [pid 1:tid 140605397114184] AH00489: Apache/2.4.41 (Unix) configured -- resuming normal operations
[Mon Dec 21 23:34:03.854975 2020] [core:notice] [pid 1:tid 140605397114184] AH00094: Command line: 'httpd -D FOREGROUND'
> docker container logs 3da
AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 172.17.0.2. Set the 'ServerName' directive globally to suppress this message
AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 172.17.0.2. Set the 'ServerName' directive globally to suppress this message
[Mon Dec 21 23:34:03.854449 2020] [mpm_event:notice] [pid 1:tid 140605397114184] AH00489: Apache/2.4.41 (Unix) configured -- resuming normal operations
[Mon Dec 21 23:34:03.854975 2020] [core:notice] [pid 1:tid 140605397114184] AH00094: Command line: 'httpd -D FOREGROUND'


> docker container ls
CONTAINER ID        IMAGE                          COMMAND              CREATED             STATUS              PORTS                NAMES
3da00776cecb        ozgurozturknet/adanzyedocker   "httpd-foreground"   10 minutes ago      Up 11 minutes       0.0.0.0:80->80/tcp   silly_turing

-- We changed previous running app(java app1) instead of default app and gave diffirent names with --name parameter
> docker container run --name denemecon ozgurozturknet/adanzyedocker java app1
Merhaba arkadaslar ben App1 uygulamasiyim

> docker container ls
CONTAINER ID        IMAGE                          COMMAND              CREATED             STATUS              PORTS                NAMES
3da00776cecb        ozgurozturknet/adanzyedocker   "httpd-foreground"   18 minutes ago      Up 18 minutes       0.0.0.0:80->80/tcp   silly_turing

> docker container ls -a
CONTAINER ID        IMAGE                          COMMAND              CREATED             STATUS                      PORTS                NAMES
5ab40a3b4172        ozgurozturknet/adanzyedocker   "java app1"          53 seconds ago      Exited (0) 57 seconds ago                        denemecon
3da00776cecb        ozgurozturknet/adanzyedocker   "httpd-foreground"   18 minutes ago      Up 18 minutes               0.0.0.0:80->80/tcp   silly_turing
9dbc857ba4bf        ozgurozturknet/app1            "java app1"          2 hours ago         Exited (0) 2 hours ago                           firstcontainer
14a8371f7cfa        bf756fb1ae65                   "/hello"             2 hours ago         Exited (0) 2 hours ago                           blissful_newton
7c50837145b5        bf756fb1ae65                   "/hello"             2 hours ago         Exited (0) 2 hours ago                           vigorous_lederberg
d9101e17afa0        bf756fb1ae65                   "/hello"             3 hours ago         Exited (0) 3 hours ago                           determined_nobel

-- stopped container with id
> docker container stop 3da
3da

> docker container ls -a
CONTAINER ID        IMAGE                          COMMAND              CREATED             STATUS                     PORTS               NAMES
5ab40a3b4172        ozgurozturknet/adanzyedocker   "java app1"          2 minutes ago       Exited (0) 2 minutes ago                       denemecon
3da00776cecb        ozgurozturknet/adanzyedocker   "httpd-foreground"   20 minutes ago      Exited (0) 4 seconds ago                       silly_turing
9dbc857ba4bf        ozgurozturknet/app1            "java app1"          2 hours ago         Exited (0) 2 hours ago                         firstcontainer
14a8371f7cfa        bf756fb1ae65                   "/hello"             2 hours ago         Exited (0) 2 hours ago                         blissful_newton
7c50837145b5        bf756fb1ae65                   "/hello"             2 hours ago         Exited (0) 2 hours ago                         vigorous_lederberg
d9101e17afa0        bf756fb1ae65                   "/hello"             3 hours ago         Exited (0) 3 hours ago                         determined_nobel

-- how to create and start container without connection with shell (parameter -d)
> docker container run -d -p 80:80 ozgurozturknet/adanzyedocker
6944c46f2507a8cc2f7b529cd7b5b253feddec3a52201c28392594f24885d706

> docker container ls
CONTAINER ID        IMAGE                          COMMAND              CREATED             STATUS              PORTS                NAMES
6944c46f2507        ozgurozturknet/adanzyedocker   "httpd-foreground"   3 seconds ago       Up 7 seconds        0.0.0.0:80->80/tcp   peaceful_albattani

> docker container ls -a
CONTAINER ID        IMAGE                          COMMAND              CREATED             STATUS                      PORTS                NAMES
6944c46f2507        ozgurozturknet/adanzyedocker   "httpd-foreground"   16 seconds ago      Up 20 seconds               0.0.0.0:80->80/tcp   peaceful_albattani
5ab40a3b4172        ozgurozturknet/adanzyedocker   "java app1"          44 minutes ago      Exited (0) 44 minutes ago                        denemecon
3da00776cecb        ozgurozturknet/adanzyedocker   "httpd-foreground"   About an hour ago   Exited (0) 42 minutes ago                        silly_turing
9dbc857ba4bf        ozgurozturknet/app1            "java app1"          2 hours ago         Exited (0) 2 hours ago                           firstcontainer
14a8371f7cfa        bf756fb1ae65                   "/hello"             3 hours ago         Exited (0) 3 hours ago                           blissful_newton
7c50837145b5        bf756fb1ae65                   "/hello"             3 hours ago         Exited (0) 3 hours ago                           vigorous_lederberg
d9101e17afa0        bf756fb1ae65                   "/hello"             4 hours ago         Exited (0) 4 hours ago                           determined_nobel

-- to do same job with 'docker container ls' command
> docker ps
CONTAINER ID        IMAGE                          COMMAND              CREATED             STATUS              PORTS                NAMES
6944c46f2507        ozgurozturknet/adanzyedocker   "httpd-foreground"   2 minutes ago       Up 2 minutes        0.0.0.0:80->80/tcp   peaceful_albattani

> docker ps -a
CONTAINER ID        IMAGE                          COMMAND              CREATED             STATUS                      PORTS                NAMES
6944c46f2507        ozgurozturknet/adanzyedocker   "httpd-foreground"   2 minutes ago       Up 2 minutes                0.0.0.0:80->80/tcp   peaceful_albattani
5ab40a3b4172        ozgurozturknet/adanzyedocker   "java app1"          46 minutes ago      Exited (0) 46 minutes ago                        denemecon
3da00776cecb        ozgurozturknet/adanzyedocker   "httpd-foreground"   About an hour ago   Exited (0) 44 minutes ago                        silly_turing
9dbc857ba4bf        ozgurozturknet/app1            "java app1"          2 hours ago         Exited (0) 2 hours ago                           firstcontainer
14a8371f7cfa        bf756fb1ae65                   "/hello"             3 hours ago         Exited (0) 3 hours ago                           blissful_newton
7c50837145b5        bf756fb1ae65                   "/hello"             3 hours ago         Exited (0) 3 hours ago                           vigorous_lederberg
d9101e17afa0        bf756fb1ae65                   "/hello"             4 hours ago         Exited (0) 4 hours ago                           determined_nobel

-- removed exited container
> docker container rm 694 5ab 3da 9db 14a 7c5 d91
5ab
3da
9db
14a
7c5
d91
Error response from daemon: You cannot remove a running container 6944c46f2507a8cc2f7b529cd7b5b253feddec3a52201c28392594f24885d706. Stop the container before attempting removal or force remove

> docker ps -a
CONTAINER ID        IMAGE                          COMMAND              CREATED             STATUS              PORTS                NAMES
6944c46f2507        ozgurozturknet/adanzyedocker   "httpd-foreground"   3 minutes ago       Up 3 minutes        0.0.0.0:80->80/tcp   peaceful_albattani

-- force remove for opened container
> docker container rm -f 694
694

> docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES


--------------------------------------------------------------------

Date of Notes : 22-12-2020


> docker container run --name websunucu -p 84:84 -d ozgurozturknet/adanzyedocker
fb450d9276eeb54340c908af1379f098ba9c1a87cd188e4f21c7ce7fb8aaf816

> docker ps
CONTAINER ID        IMAGE                          COMMAND              CREATED                  STATUS              PORTS                        NAMES
fb450d9276ee        ozgurozturknet/adanzyedocker   "httpd-foreground"   Less than a second ago   Up 5 seconds        80/tcp, 0.0.0.0:84->84/tcp   websunucu

-- connected container named 'websunucu' this command, we used here sh parameter because this container consist this shell 
> docker container exec -it websunucu sh
/usr/src/myapp # pwd
/usr/src/myapp
/usr/src/myapp # ls -l
total 8
-rwxr-xr-x    1 root     root           443 Sep 20  2019 app1.class
-rwxr-xr-x    1 root     root           151 Sep 20  2019 app1.java
/usr/src/myapp # java app1
Merhaba arkadaslar ben App1 uygulamasiyim
/usr/src/myapp # cd /usr/local/apache2/htdocs/
/usr/local/apache2/htdocs # ls
index.html
/usr/local/apache2/htdocs # echo "I added that" >> index.html
/usr/local/apache2/htdocs # ps
PID   USER     TIME  COMMAND
    1 root      0:00 httpd -DFOREGROUND
    7 daemon    0:00 httpd -DFOREGROUND
    8 daemon    0:00 httpd -DFOREGROUND
    9 daemon    0:00 httpd -DFOREGROUND
  117 root      0:00 sh
  134 root      0:00 ps
/usr/local/apache2/htdocs # exit

-- container is still working
> docker ps
CONTAINER ID        IMAGE                          COMMAND              CREATED             STATUS              PORTS                        NAMES
fb450d9276ee        ozgurozturknet/adanzyedocker   "httpd-foreground"   15 minutes ago      Up 15 minutes       80/tcp, 0.0.0.0:84->84/tcp   websunucu

> docker container exec -it websunucu sh
/usr/src/myapp # ps
PID   USER     TIME  COMMAND
    1 root      0:00 httpd -DFOREGROUND  // Docker is running here!!
    7 daemon    0:00 httpd -DFOREGROUND
    8 daemon    0:00 httpd -DFOREGROUND
    9 daemon    0:00 httpd -DFOREGROUND
   91 root      0:00 sh
   96 root      0:00 ps
/usr/src/myapp # kill 1
>  

> docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES

> docker start websunucu
websunucu

> docker ps
CONTAINER ID        IMAGE                          COMMAND              CREATED             STATUS              PORTS                        NAMES
fb450d9276ee        ozgurozturknet/adanzyedocker   "httpd-foreground"   33 minutes ago      Up 7 seconds        80/tcp, 0.0.0.0:84->84/tcp   websunucu

> docker stop websunucu
websunucu

> docker container run --name websunucu2 -p 80:80 ozgurozturknet/adanzyedocker
AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 172.17.0.2. Set the 'ServerName' directive globally to suppress this message
AH00558: httpd: Could not reliably determine the server's fully qualified domain name, using 172.17.0.2. Set the 'ServerName' directive globally to suppress this message
[Tue Dec 22 12:18:19.905296 2020] [mpm_event:notice] [pid 1:tid 139812057718088] AH00489: Apache/2.4.41 (Unix) configured -- resuming normal operations
[Tue Dec 22 12:18:19.905735 2020] [core:notice] [pid 1:tid 139812057718088] AH00094: Command line: 'httpd -D FOREGROUND'

> docker ps
CONTAINER ID        IMAGE                          COMMAND              CREATED             STATUS              PORTS                NAMES
3bc8646b8fce        ozgurozturknet/adanzyedocker   "httpd-foreground"   20 seconds ago      Up 25 seconds       0.0.0.0:80->80/tcp   websunucu2

> docker stop websunucu2
websunucu2

> docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES

> docker ps -a
CONTAINER ID        IMAGE                          COMMAND              CREATED             STATUS                      PORTS               NAMES
3bc8646b8fce        ozgurozturknet/adanzyedocker   "httpd-foreground"   23 minutes ago      Exited (0) 15 seconds ago                       websunucu2
fb450d9276ee        ozgurozturknet/adanzyedocker   "httpd-foreground"   59 minutes ago      Exited (0) 24 minutes ago                       websunucu

-- removed all stopped containers.
> docker container prune
WARNING! This will remove all stopped containers.
Are you sure you want to continue? [y/N] y
Deleted Containers:
3bc8646b8fcefc030a4de7d3442fa07715f29391b301419e0bfa6b757ba51dc8
fb450d9276eeb54340c908af1379f098ba9c1a87cd188e4f21c7ce7fb8aaf816

Total reclaimed space: 246B

-- listed all loaded image
> docker image ls
REPOSITORY                     TAG                 IMAGE ID            CREATED             SIZE
ozgurozturknet/adanzyedocker   latest              2b4647565690        14 months ago       284MB
ozgurozturknet/app1            latest              353d147de1ee        15 months ago       126MB

-- removed all images
> docker image prune -a
WARNING! This will remove all images without at least one container associated to them.
Are you sure you want to continue? [y/N] y
Deleted Images:
untagged: ozgurozturknet/adanzyedocker:latest
untagged: ozgurozturknet/adanzyedocker@sha256:10631a62b96b8dc8c468fe482aff70871c6c81f4a49ea4c5350ce765cf9f2185
deleted: sha256:2b4647565690601db6596445de527a5a3b58ca1ad3b1ab7c65d8951c005a010b
deleted: sha256:964446c988fd1e5fee2abac9e1a933bc87798a470c05cf4c1847078e61006e6d
deleted: sha256:9bdda1f65436233523dba5cd6d6a1a2d11e440d2476cc65ecf96e4359a4ede26
deleted: sha256:3fabdeb6341f5fe0b6d74c71ffbae59943ad7987262ec7138a923f41db38a027
deleted: sha256:0d65a7390e0db582196371e3cd2604cacf0d7aeb7cd0bcd6caae5806747fa813
deleted: sha256:64f7d41b0ee7a64a8813cdda3c28e2faa9a8fc63491979ebee51f157d5b379b0
deleted: sha256:d4f8488f29f67595a5f71f2a1a06ed4789f75e8a28d68424d8355c8239729950
deleted: sha256:3b1c73e3b013e3d8105168baf99d5c70bc0d50034a26b1bbeb3380cb2eb3974e
deleted: sha256:f1968fce613534a5984f094d1ccac8565d23c8f6b8519dcbccdd97e3d1c31fc1
deleted: sha256:2adceec975613b737e86933ed34395c9a729827b1e506ba64debb27720869c29
deleted: sha256:03901b4a2ea88eeaad62dbe59b072b28b6efa00491962b8741081c5df50c65e0
untagged: ozgurozturknet/app1:latest
untagged: ozgurozturknet/app1@sha256:31acbf06b10306dc403bb57ecd2be4e870d9ecacacbff006a56c1f5e40f762d6
deleted: sha256:353d147de1eeedddf3898f1f16912d57bf59d464a42c943b3aa2efb187dc1bdb
deleted: sha256:49282dd5cd75d962a835848877635f16d986061d60919c525f58b728e0f5a9d7
deleted: sha256:bcbb28e2357ac01735d3773630d4379c8b84a02a0003de04c165b3a3e0d223bc
deleted: sha256:9a11d33865b43fe3be3353f22a1c9cd22911daab3d7845f77f95dbc9083f0527
deleted: sha256:767f936afb51c8a3ad9a96592a4be092048bb70f2ca410028a0b3f64b826acbb

Total reclaimed space: 410.1MB

> docker image ls
REPOSITORY          TAG                 IMAGE ID            CREATED             SIZE

-- downloaded alpine operation system which is for first layer of Docker infrastructure
> docker image pull alpine
Using default tag: latest
latest: Pulling from library/alpine
801bfaa63ef2: Pull complete		**That shows it has 2 layer.
Digest: sha256:3c7497bf0c7af93428242d6176e8f7905f2201d8fc5861f45be7a346b5f23436
Status: Downloaded newer image for alpine:latest
docker.io/library/alpine:latest

-- how to pull image from docker-hub, NOTES: if we downloaded a image before, and then we want to download a diffirent image. As a result, it will not download base layer again. (etc.alpine) 
> docker image pull ozgurozturknet/hello-app
Using default tag: latest
latest: Pulling from ozgurozturknet/hello-app
aad63a933944: Pull complete		**That shows it has 2 layer.
e7f2aa010900: Pull complete
Digest: sha256:a4b3acfb88eafb47a7b5f1266f25ff114d3148186d130dad5d4319086b26c4c2
Status: Downloaded newer image for ozgurozturknet/hello-app:latest
docker.io/ozgurozturknet/hello-app:latest

--- DOCKER Volume Management (it provides to keep our data somewhere out of containers)

-- created a volume name firstvolume
> docker volume create firstvolume
firstvolume

-- looking firstvolume detail
> docker volume inspect firstvolume
[
    {
        "CreatedAt": "2020-12-22T14:56:14Z",
        "Driver": "local",
        "Labels": {},
        "Mountpoint": "/mnt/sda1/var/lib/docker/volumes/firstvolume/_data",
        "Name": "firstvolume",
        "Options": {},
        "Scope": "local"
    }
] 

> docker container  run -it -v firstvolume:/uygulama alpine sh
/ # ls
bin       etc       lib       mnt       proc      run       srv       tmp       uygulama
dev       home      media     opt       root      sbin      sys       usr       var
/ # cd uygulama/
/uygulama # ls
abc.txt
/uygulama # cat abc.txt
/uygulama # echo "added from first container" >> abc.txt
/uygulama # cat abc.txt
added from first container
/uygulama # exit

> docker ps
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES
91508456fd54        alpine              "sh"                5 minutes ago       Up 6 minutes                            optimistic_visvesvaraya

> docker container rm 915
Error response from daemon: You cannot remove a running container 91508456fd545a43a0382b6f421ec353fa9db4ff38eb5658c1d5d222f91c093e. Stop the container before attempting removal or force remove

> docker container rm -f 915
915

> docker volume ls
DRIVER              VOLUME NAME
local               firstvolume

c1
> docker container run -it -v firstvolume:/deneme alpine sh
/ # ls
bin     deneme  dev     etc     home    lib     media   mnt     opt     proc    root    run     sbin    srv     sys     tmp     usr     var
/ # cd deneme/
/deneme # ls
abc.txt
/deneme # cat abc.txt
added from first container
/deneme # touch klm.txt
/deneme # ls
abc.txt  klm.txt
/deneme # ls
abc.txt    klm.txt    third.txt
/deneme # cat third.txt
test
/deneme #

-- They two container can work within same volume, and see same items 

C2
> docker container run -it -v firstvolume:/deneme2 centos sh
sh-4.4# ls
bin  deneme2  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
sh-4.4# cd deneme2/
sh-4.4# ls
abc.txt  klm.txt
sh-4.4# cat abc.txt
added from first container
sh-4.4# touch third.txt
sh-4.4# ls
abc.txt  klm.txt  third.txt
sh-4.4# echo "test" >> third.txt


--  can reach firstvolume volume just read only with 'ro' parameter
C3
> docker container run -it -v firstvolume:/deneme3:ro centos sh
sh-4.4# ls
bin  deneme3  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var
sh-4.4# cd deneme3/
sh-4.4# ls
abc.txt  klm.txt  third.txt
sh-4.4# touch forth.txt
touch: cannot touch 'forth.txt': Read-only file system 

--  rm parameter: provide to close container after container stop
> docker container run --rm -it ozgurozturknet/adanzyedocker sh
/usr/src/myapp # ls
app1.class  app1.java
/usr/src/myapp # exit

> docker ps -a
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES


--  When we have a full volume, Its items will appear in the mounted folder.
> docker volume create deneme1
deneme1

> docker volume ls
DRIVER              VOLUME NAME
local               deneme1
local               firstvolume

> docker container run --rm -it -v deneme1:/test ozgurozturknet/adanzyedocker sh
/usr/src/myapp # cd /
/ # ls
bin    dev    etc    home   lib    media  mnt    opt    proc   root   run    sbin   srv    sys    test   tmp    usr    var
/ # cd test/
/test # ls
/test # exit

> docker container run --rm -it -v deneme1:/usr/src/myapp ozgurozturknet/adanzyedocker sh
/usr/src/myapp # ls
app1.class  app1.java
/usr/src/myapp # exit

> docker container run --rm -it -v deneme1:/xyz alpine sh
/ # ls
bin    dev    etc    home   lib    media  mnt    opt    proc   root   run    sbin   srv    sys    tmp    usr    var    xyz
/ # cd xyz/
/xyz # ls
app1.class  app1.java
/xyz # touch adanzyedocker.txt
/xyz # ls
adanzyedocker.txt  app1.class         app1.java
/xyz # exit

> docker ps -a
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES

> docker volume ls
DRIVER              VOLUME NAME
local               deneme1
local               firstvolume

> docker container run --rm -it -v deneme1:/usr/src/myapp ozgurozturknet/adanzyedocker sh
/usr/src/myapp # ls
adanzyedocker.txt  app1.class         app1.java

---  Bind Mounts
 
-- created a container from nginx image and started 
> docker container run -d -p 80:80 --name firstweb nginx
Unable to find image 'nginx:latest' locally
latest: Pulling from library/nginx
6ec7b7d162b2: Pull complete
cb420a90068e: Pull complete
2766c0bf2b07: Pull complete
e05167b6a99d: Pull complete
70ac9d795e79: Pull complete
Digest: sha256:4cf620a5c81390ee209398ecc18e5fb9dd0f5155cd82adcbae532fec94006fb9
Status: Downloaded newer image for nginx:latest
17fce2776a11ca43566ab43d323bbc1a055aef5a6f8acd62da69d964204d1f42

--  connected this container
> docker exec -it 17f sh
# cd /usr/share/nginx/html
# ls
50x.html  index.html
# cat index.html
<!DOCTYPE html>
<html>
<head>
<title>Welcome to nginx!</title>
<style>
    body {
        width: 35em;
        margin: 0 auto;
        font-family: Tahoma, Verdana, Arial, sans-serif;
    }
</style>
</head>
<body>
<h1>Welcome to nginx!</h1>
<p>If you see this page, the nginx web server is successfully installed and
working. Further configuration is required.</p>

<p>For online documentation and support please refer to
<a href="http://nginx.org/">nginx.org</a>.<br/>
Commercial support is available at
<a href="http://nginx.com/">nginx.com</a>.</p>

<p><em>Thank you for using nginx.</em></p>
</body>
</html>
# exit


> docker ps -a
CONTAINER ID        IMAGE               COMMAND                  CREATED                  STATUS              PORTS                NAMES
17fce2776a11        nginx               "/docker-entrypoint."   Less than a second ago   Up 5 minutes        0.0.0.0:80->80/tcp   firstweb

> docker rm -f 17f
17f

-- how to bind a folder from own local computer folders
> docker container run -d -p 80:80 -v E:\AdanZyeDocker\kisim3\bolum28\websitesi:/usr/share/nginx/html nginx
C:\Program Files\Docker Toolbox\docker.exe: Error response from daemon: invalid mode: /usr/nginx/html.
See 'C:\Program Files\Docker Toolbox\docker.exe run --help'.

Important Notes: it didn't work because I didn't find where I can permit at docker UI to reach my local disk(C or E). 
Also we shouldn't use binding metod with production. It can just use at development device. 

--------------------------------------------------------------------

Date of Notes : 23-12-2020
Docker Network Objects

-- listed networks
> docker network ls
NETWORK ID          NAME                DRIVER              SCOPE
2bb8ee186599        bridge              bridge              local
bc224eb7a822        host                host                local
8ad1749707e8        none                null                local

-- looked detail of 'bridge' network. Additional, Bridge is a default network when we create a container.
> docker network inspect bridge
[
    {
        "Name": "bridge",
        "Id": "2bb8ee186599385733e6e6b2f04cea2e9869841449b7a9a567194064c2ef461b",
        "Created": "2020-12-23T09:52:41.629108948Z",
        "Scope": "local",
        "Driver": "bridge",
        "EnableIPv6": false,
        "IPAM": {
            "Driver": "default",
            "Options": null,
            "Config": [
                {
                    "Subnet": "172.17.0.0/16",
                    "Gateway": "172.17.0.1"
                }
            ]
        },
        "Internal": false,
        "Attachable": false,
        "Ingress": false,
        "ConfigFrom": {
            "Network": ""
        },
        "ConfigOnly": false,
        "Containers": {},
        "Options": {
            "com.docker.network.bridge.default_bridge": "true",
            "com.docker.network.bridge.enable_icc": "true",
            "com.docker.network.bridge.enable_ip_masquerade": "true",
            "com.docker.network.bridge.host_binding_ipv4": "0.0.0.0",
            "com.docker.network.bridge.name": "docker0",
            "com.docker.network.driver.mtu": "1500"
        },
        "Labels": {}
    }
]

-- we realized that the bridge is a default network when we create a container.
> docker container run -d ozgurozturknet/adanzyedocker
ee41242045cdb78d0bb01c0004223984dbe88cc8a1418223256c0ef27713a50d

> docker network inspect bridge
[
    {
        "Name": "bridge",
        "Id": "2bb8ee186599385733e6e6b2f04cea2e9869841449b7a9a567194064c2ef461b",
        "Created": "2020-12-23T09:52:41.629108948Z",
        "Scope": "local",
        "Driver": "bridge",
        "EnableIPv6": false,
        "IPAM": {
            "Driver": "default",
            "Options": null,
            "Config": [
                {
                    "Subnet": "172.17.0.0/16",
                    "Gateway": "172.17.0.1"
                }
            ]
        },
        "Internal": false,
        "Attachable": false,
        "Ingress": false,
        "ConfigFrom": {
            "Network": ""
        },
        "ConfigOnly": false,
        "Containers": {
            "ee41242045cdb78d0bb01c0004223984dbe88cc8a1418223256c0ef27713a50d": {
                "Name": "cranky_roentgen",
                "EndpointID": "6524e0fa985459a9e9b6785955a28f2458f537eabfe9c66eb13454bc8f57d198",
                "MacAddress": "02:42:ac:11:00:02",
                "IPv4Address": "172.17.0.2/16",
                "IPv6Address": ""
            }
        },
        "Options": {
            "com.docker.network.bridge.default_bridge": "true",
            "com.docker.network.bridge.enable_icc": "true",
            "com.docker.network.bridge.enable_ip_masquerade": "true",
            "com.docker.network.bridge.host_binding_ipv4": "0.0.0.0",
            "com.docker.network.bridge.name": "docker0",
            "com.docker.network.driver.mtu": "1500"
        },
        "Labels": {}
    }
]


> docker ps
CONTAINER ID        IMAGE                          COMMAND              CREATED             STATUS              PORTS               NAMES
ee41242045cd        ozgurozturknet/adanzyedocker   "httpd-foreground"   40 seconds ago      Up 41 seconds       80/tcp              cranky_roentgen

-- we look that the container take a ip from the bridge network
> docker exec -it ee41242045cd  sh
/usr/src/myapp # ifconfig
eth0      Link encap:Ethernet  HWaddr 02:42:AC:11:00:02
          inet addr:172.17.0.2  Bcast:172.17.255.255  Mask:255.255.0.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:12 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:976 (976.0 B)  TX bytes:0 (0.0 B)

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

/usr/src/myapp # ping 8.8.8.8
PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.
64 bytes from 8.8.8.8: icmp_seq=1 ttl=117 time=25.10 ms
64 bytes from 8.8.8.8: icmp_seq=2 ttl=117 time=50.0 ms
^C
--- 8.8.8.8 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 3ms
rtt min/avg/max/mdev = 25.964/38.000/50.037/12.038 ms
/usr/src/myapp # read escape sequence

> docker ps
CONTAINER ID        IMAGE                          COMMAND              CREATED             STATUS              PORTS               NAMES
ee41242045cd        ozgurozturknet/adanzyedocker   "httpd-foreground"   4 minutes ago       Up 4 minutes        80/tcp              cranky_roentgen

> docker container run -it --name deneme ozgurozturknet/adanzyedocker sh
/usr/src/myapp # ifconfig
eth0      Link encap:Ethernet  HWaddr 02:42:AC:11:00:03
          inet addr:172.17.0.3  Bcast:172.17.255.255  Mask:255.255.0.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:6 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:516 (516.0 B)  TX bytes:0 (0.0 B)

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

/usr/src/myapp # ping 172.17.0.2
PING 172.17.0.2 (172.17.0.2) 56(84) bytes of data.
64 bytes from 172.17.0.2: icmp_seq=1 ttl=64 time=0.145 ms
64 bytes from 172.17.0.2: icmp_seq=2 ttl=64 time=0.063 ms
^C
--- 172.17.0.2 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 4ms
rtt min/avg/max/mdev = 0.063/0.104/0.145/0.041 ms
/usr/src/myapp # exit

> docker network ls
NETWORK ID          NAME                DRIVER              SCOPE
2bb8ee186599        bridge              bridge              local
bc224eb7a822        host                host                local
8ad1749707e8        none                null                local

> docker container run -it --name deneme22 ozgurozturknet/adanzyedocker sh
/usr/src/myapp # ifconfig
eth0      Link encap:Ethernet  HWaddr 02:42:AC:11:00:03
          inet addr:172.17.0.3  Bcast:172.17.255.255  Mask:255.255.0.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:6 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:516 (516.0 B)  TX bytes:0 (0.0 B)

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

/usr/src/myapp # exit

-- we can use parameter '--net' to choose a diffirent network like here none
> docker container run -it --name deneme34 --net none ozgurozturknet/adanzyedocker sh
/usr/src/myapp # ifconfig
lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

/usr/src/myapp # ping 8.8.8.8
connect: Network unreachable

-- The container is connected to host network
[node1] (local) root@192.168.0.23 ~
$ docker container run -it --name deneme1 --net host ozgurozturknet/adanzyedocker sh
Unable to find image 'ozgurozturknet/adanzyedocker:latest' locally
latest: Pulling from ozgurozturknet/adanzyedocker
9d48c3bd43c5: Pull complete 
d3565940ff69: Pull complete 
1cc6c921162a: Pull complete 
17877ce0de23: Pull complete 
4e10ed3cf6fc: Pull complete 
84d0ceb32a5d: Pull complete 
1587ec6e5583: Pull complete 
e7daf8feccda: Pull complete 
49641b0d4586: Pull complete 
1c5aa5048b34: Pull complete 
Digest: sha256:10631a62b96b8dc8c468fe482aff70871c6c81f4a49ea4c5350ce765cf9f2185
Status: Downloaded newer image for ozgurozturknet/adanzyedocker:latest
/usr/src/myapp # ifconfig
docker0   Link encap:Ethernet  HWaddr 02:42:79:E6:9A:AF  
          inet addr:172.17.0.1  Bcast:172.17.255.255  Mask:255.255.0.0
          UP BROADCAST MULTICAST  MTU:1500  Metric:1
          RX packets:0 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:0 (0.0 B)  TX bytes:0 (0.0 B)

eth0      Link encap:Ethernet  HWaddr FA:2F:A5:21:38:47  
          inet addr:192.168.0.23  Bcast:0.0.0.0  Mask:255.255.254.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:16 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:1296 (1.2 KiB)  TX bytes:0 (0.0 B)

eth1      Link encap:Ethernet  HWaddr 02:42:AC:12:00:3A  
          inet addr:172.18.0.58  Bcast:0.0.0.0  Mask:255.255.0.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:86097 errors:0 dropped:0 overruns:0 frame:0
          TX packets:4241 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0 
          RX bytes:125928654 (120.0 MiB)  TX bytes:436249 (426.0 KiB)

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:104 errors:0 dropped:0 overruns:0 frame:0
          TX packets:104 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1 
          RX bytes:12701 (12.4 KiB)  TX bytes:12701 (12.4 KiB)

-- how to do port publish
$ docker container run -d -p 8080:80 ozgurozturknet/adanzyedocker
$ docker container run -d --publish 53:53/udp ozgurozturknet/adanzyedocker

$ docker container run -d --publish 8080:80 ozgurozturknet/adanzyedocker
bc52449f7b603562778baca56b8e6c208dcb2bd5c9689ae47ef87c55476348e1

[node1] (local) root@192.168.0.23 ~
$ docker ps
CONTAINER ID   IMAGE                          COMMAND              CREATED          STATUS          PORTS                  NAMES
bc52449f7b60   ozgurozturknet/adanzyedocker   "httpd-foreground"   19 seconds ago   Up 18 seconds   0.0.0.0:8080->80/tcp   competent_goldberg

-- Lets check those two container are not connected. 
> docker container run -d --name websunucu1 ozgurozturknet/adanzyedocker
bbcb44d4582ce77cee5d4c8d678bee21ab1c80a82ffe6b0154ef13d4683d1a2f

-- We couldn't ping with name of container
> docker container run -it --name database1 ozgurozturknet/adanzyedocker sh
/usr/src/myapp # ping websunucu1
ping: websunucu1: Name does not resolve
/usr/src/myapp # ping 172.17.0.2
PING 172.17.0.2 (172.17.0.2) 56(84) bytes of data.
64 bytes from 172.17.0.2: icmp_seq=1 ttl=64 time=0.070 ms
64 bytes from 172.17.0.2: icmp_seq=2 ttl=64 time=0.139 ms
^C
--- 172.17.0.2 ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 9ms
rtt min/avg/max/mdev = 0.070/0.104/0.139/0.035 ms
/usr/src/myapp # exit

> docker ps -a
CONTAINER ID        IMAGE                          COMMAND              CREATED              STATUS                      PORTS               NAMES
7efadfbe130e        ozgurozturknet/adanzyedocker   "sh"                 57 seconds ago       Exited (0) 21 seconds ago                       database1
bbcb44d4582c        ozgurozturknet/adanzyedocker   "httpd-foreground"   About a minute ago   Up About a minute           80/tcp              websunucu1

> docker container rm -f 7ef bbc
7ef
bbc

> docker ps -a
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES

-- how to create Network 
> docker network create bridge1
df6f410dc3837433cbfaece7b6724564b9a4a791c58dbc1ddf768176f2086adb

> docker network ls
NETWORK ID          NAME                DRIVER              SCOPE
2bb8ee186599        bridge              bridge              local
df6f410dc383        bridge1             bridge              local
bc224eb7a822        host                host                local
8ad1749707e8        none                null                local

> docker network inspect bridge1
[
    {
        "Name": "bridge1",
        "Id": "df6f410dc3837433cbfaece7b6724564b9a4a791c58dbc1ddf768176f2086adb",
        "Created": "2020-12-23T17:30:18.988810011Z",
        "Scope": "local",
        "Driver": "bridge",
        "EnableIPv6": false,
        "IPAM": {
            "Driver": "default",
            "Options": {},
            "Config": [
                {
                    "Subnet": "172.19.0.0/16",
                    "Gateway": "172.19.0.1"
                }
            ]
        },
        "Internal": false,
        "Attachable": false,
        "Ingress": false,
        "ConfigFrom": {
            "Network": ""
        },
        "ConfigOnly": false,
        "Containers": {},
        "Options": {},
        "Labels": {}
    }
]

-- created a conatiner named 'websunucu' in bridge1 network with using '-dit' parameter to reach later
> docker container run -dit --name websunucu --net bridge1 ozgurozturknet/adanzyedocker sh
154bac3221a033f060edde72f2ba067c5978b5f2e226423b0c911bab1cc550e5

-- created a conatiner named 'database' in bridge1 network with using '-dit' parameter to reach later
> docker container run -dit --name database --net bridge1 ozgurozturknet/adanzyedocker sh
981c5e69174824af13723c43935f933e8b43cd69c48bffbce55137c452ba02c1

> docker ps
CONTAINER ID        IMAGE                          COMMAND             CREATED             STATUS              PORTS               NAMES
981c5e691748        ozgurozturknet/adanzyedocker   "sh"                6 seconds ago       Up 8 seconds        80/tcp              database
154bac3221a0        ozgurozturknet/adanzyedocker   "sh"                19 seconds ago      Up 21 seconds       80/tcp              websunucu

> docker network inspect bridge1
[
    {
        "Name": "bridge1",
        "Id": "df6f410dc3837433cbfaece7b6724564b9a4a791c58dbc1ddf768176f2086adb",
        "Created": "2020-12-23T17:30:18.988810011Z",
        "Scope": "local",
        "Driver": "bridge",
        "EnableIPv6": false,
        "IPAM": {
            "Driver": "default",
            "Options": {},
            "Config": [
                {
                    "Subnet": "172.19.0.0/16",
                    "Gateway": "172.19.0.1"
                }
            ]
        },
        "Internal": false,
        "Attachable": false,
        "Ingress": false,
        "ConfigFrom": {
            "Network": ""
        },
        "ConfigOnly": false,
        "Containers": {
            "154bac3221a033f060edde72f2ba067c5978b5f2e226423b0c911bab1cc550e5": {
                "Name": "websunucu",
                "EndpointID": "96e8b6aa5dc1963988228b4ba33ffa3ccc81cf92e73e5b366573643b90321412",
                "MacAddress": "02:42:ac:13:00:02",
                "IPv4Address": "172.19.0.2/16",
                "IPv6Address": ""
            },
            "981c5e69174824af13723c43935f933e8b43cd69c48bffbce55137c452ba02c1": {
                "Name": "database",
                "EndpointID": "f765ec233548beed8cc9fe85d70c6e541112b9472a1505814fd8877f2d8db8c3",
                "MacAddress": "02:42:ac:13:00:03",
                "IPv4Address": "172.19.0.3/16",
                "IPv6Address": ""
            }
        },
        "Options": {},
        "Labels": {}
    }
]

-- entered websunucu container, pinged another container which name is database and see that they connected each other
> docker attach websunucu
/usr/src/myapp # ping database
PING database (172.19.0.3) 56(84) bytes of data.
64 bytes from database.bridge1 (172.19.0.3): icmp_seq=1 ttl=64 time=0.091 ms
64 bytes from database.bridge1 (172.19.0.3): icmp_seq=2 ttl=64 time=0.143 ms
^C
--- database ping statistics ---
2 packets transmitted, 2 received, 0% packet loss, time 3ms
rtt min/avg/max/mdev = 0.091/0.117/0.143/0.026 ms
/usr/src/myapp # read escape sequence

-- entered database container, pinged another container which name is websunucu and see that they connected each other
> docker attach database
/usr/src/myapp # ping websunucu
PING websunucu (172.19.0.2) 56(84) bytes of data.
64 bytes from websunucu.bridge1 (172.19.0.2): icmp_seq=1 ttl=64 time=0.063 ms
64 bytes from websunucu.bridge1 (172.19.0.2): icmp_seq=2 ttl=64 time=0.245 ms
64 bytes from websunucu.bridge1 (172.19.0.2): icmp_seq=3 ttl=64 time=0.168 ms
^C
--- websunucu ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 39ms
rtt min/avg/max/mdev = 0.063/0.158/0.245/0.076 ms

> docker ps
CONTAINER ID        IMAGE                          COMMAND             CREATED             STATUS              PORTS               NAMES
981c5e691748        ozgurozturknet/adanzyedocker   "sh"                3 minutes ago       Up 3 minutes        80/tcp              database
154bac3221a0        ozgurozturknet/adanzyedocker   "sh"                3 minutes ago       Up 3 minutes        80/tcp              websunucu

-- how to create a specific network to arrange some properties, we created bridge2 for that
> docker network create --driver=bridge --subnet=10.10.0.0/16 --ip-range=10.10.10.0/24 --gateway=10.10.10.10 bridge2
8877105e80aae8a7070a6136dc0ecb0a36e89a52e9cac7f53396df7bbf679d79

> docker network ls
NETWORK ID          NAME                DRIVER              SCOPE
2bb8ee186599        bridge              bridge              local
df6f410dc383        bridge1             bridge              local
8877105e80aa        bridge2             bridge              local
bc224eb7a822        host                host                local
8ad1749707e8        none                null                local

> docker network inspect bridge2
[
    {
        "Name": "bridge2",
        "Id": "8877105e80aae8a7070a6136dc0ecb0a36e89a52e9cac7f53396df7bbf679d79",
        "Created": "2020-12-23T17:39:26.976799888Z",
        "Scope": "local",
        "Driver": "bridge",
        "EnableIPv6": false,
        "IPAM": {
            "Driver": "default",
            "Options": {},
            "Config": [
                {
                    "Subnet": "10.10.0.0/16",
                    "IPRange": "10.10.10.0/24",
                    "Gateway": "10.10.10.10"
                }
            ]
        },
        "Internal": false,
        "Attachable": false,
        "Ingress": false,
        "ConfigFrom": {
            "Network": ""
        },
        "ConfigOnly": false,
        "Containers": {},
        "Options": {},
        "Labels": {}
    }
]

> docker attach database
/usr/src/myapp # ifconfig
eth0      Link encap:Ethernet  HWaddr 02:42:AC:13:00:03
          inet addr:172.19.0.3  Bcast:172.19.255.255  Mask:255.255.0.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:21 errors:0 dropped:0 overruns:0 frame:0
          TX packets:9 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:1594 (1.5 KiB)  TX bytes:658 (658.0 B)

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:6 errors:0 dropped:0 overruns:0 frame:0
          TX packets:6 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:437 (437.0 B)  TX bytes:437 (437.0 B)

-- we can bind a container to two different networks
> docker network connect bridge2 database

> docker attach database
/usr/src/myapp # ifconfig
eth0      Link encap:Ethernet  HWaddr 02:42:AC:13:00:03
          inet addr:172.19.0.3  Bcast:172.19.255.255  Mask:255.255.0.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:22 errors:0 dropped:0 overruns:0 frame:0
          TX packets:9 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:1664 (1.6 KiB)  TX bytes:658 (658.0 B)

eth1      Link encap:Ethernet  HWaddr 02:42:0A:0A:0A:00
          inet addr:10.10.10.0  Bcast:10.10.255.255  Mask:255.255.0.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:15 errors:0 dropped:0 overruns:0 frame:0
          TX packets:0 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:0
          RX bytes:1242 (1.2 KiB)  TX bytes:0 (0.0 B)

lo        Link encap:Local Loopback
          inet addr:127.0.0.1  Mask:255.0.0.0
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:6 errors:0 dropped:0 overruns:0 frame:0
          TX packets:6 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000
          RX bytes:437 (437.0 B)  TX bytes:437 (437.0 B)


-- The database container was diconnected bridge2 network 
> docker network disconnect bridge2 database

> docker network inspect bridge2
[
    {
        "Name": "bridge2",
        "Id": "8877105e80aae8a7070a6136dc0ecb0a36e89a52e9cac7f53396df7bbf679d79",
        "Created": "2020-12-23T17:39:26.976799888Z",
        "Scope": "local",
        "Driver": "bridge",
        "EnableIPv6": false,
        "IPAM": {
            "Driver": "default",
            "Options": {},
            "Config": [
                {
                    "Subnet": "10.10.0.0/16",
                    "IPRange": "10.10.10.0/24",
                    "Gateway": "10.10.10.10"
                }
            ]
        },
        "Internal": false,
        "Attachable": false,
        "Ingress": false,
        "ConfigFrom": {
            "Network": ""
        },
        "ConfigOnly": false,
        "Containers": {},
        "Options": {},
        "Labels": {}
    }
]

-- if someone connects a network we can not remove this network 
> docker network rm bridge1
Error response from daemon: error while removing network: network bridge1 id df6f410dc3837433cbfaece7b6724564b9a4a791c58dbc1ddf768176f2086adb has active endpoints

> docker network inspect bridge1
[
    {
        "Name": "bridge1",
        "Id": "df6f410dc3837433cbfaece7b6724564b9a4a791c58dbc1ddf768176f2086adb",
        "Created": "2020-12-23T17:30:18.988810011Z",
        "Scope": "local",
        "Driver": "bridge",
        "EnableIPv6": false,
        "IPAM": {
            "Driver": "default",
            "Options": {},
            "Config": [
                {
                    "Subnet": "172.19.0.0/16",
                    "Gateway": "172.19.0.1"
                }
            ]
        },
        "Internal": false,
        "Attachable": false,
        "Ingress": false,
        "ConfigFrom": {
            "Network": ""
        },
        "ConfigOnly": false,
        "Containers": {
            "154bac3221a033f060edde72f2ba067c5978b5f2e226423b0c911bab1cc550e5": {
                "Name": "websunucu",
                "EndpointID": "96e8b6aa5dc1963988228b4ba33ffa3ccc81cf92e73e5b366573643b90321412",
                "MacAddress": "02:42:ac:13:00:02",
                "IPv4Address": "172.19.0.2/16",
                "IPv6Address": ""
            },
            "981c5e69174824af13723c43935f933e8b43cd69c48bffbce55137c452ba02c1": {
                "Name": "database",
                "EndpointID": "f765ec233548beed8cc9fe85d70c6e541112b9472a1505814fd8877f2d8db8c3",
                "MacAddress": "02:42:ac:13:00:03",
                "IPv4Address": "172.19.0.3/16",
                "IPv6Address": ""
            }
        },
        "Options": {},
        "Labels": {}
    }
]

-- deleted bridge2 network
> docker network rm bridge2
bridge2

-- deleted 'websunucu and database' container with using force
> docker container rm -f websunucu database
websunucu
database

-- Finally we removed bridge1 which has no longer connected container
> docker network rm bridge1
bridge1

> docker network ls
NETWORK ID          NAME                DRIVER              SCOPE
2bb8ee186599        bridge              bridge              local
bc224eb7a822        host                host                local
8ad1749707e8        none                null                local

--------------------------------------------------------------------

Date of Notes : 24-12-2020

---- Docker Logs

> docker container run -d --name appone ozgurozturknet/app1
f7913b5107c90ca7c6d201495c028b878e56d5f990882530ef713944cec3c8ef

> docker logs appone
Merhaba arkadaslar ben App1 uygulamasiyim

> docker container run -d --name con1 -p 80:80 nginx
79b89d2ef2abbface4ac6ffb9106f8cafd3916650086558fd15b53a0ecf3dc6a

> docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                NAMES
79b89d2ef2ab        nginx               "/docker-entrypoint."   4 seconds ago       Up 6 seconds        0.0.0.0:80->80/tcp   con1

-- how to look logs of containers
> docker logs con1
/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
/docker-entrypoint.sh: Configuration complete; ready for start up

--  We can see with 'docker logs' command for nginx logs beacuse of that above link (access.log -> /dev/stdout). Those two folders connected.
> docker exec -it con1 sh
# cd /var/log/nginx
# ls
access.log  error.log
# ls -l
total 0
lrwxrwxrwx 1 root root 11 Dec 15 20:20 access.log -> /dev/stdout
lrwxrwxrwx 1 root root 11 Dec 15 20:20 error.log -> /dev/stderr

> docker logs --help

Usage:  docker logs [OPTIONS] CONTAINER

Fetch the logs of a container

Options:
      --details        Show extra details provided to logs
  -f, --follow         Follow log output
      --since string   Show logs since timestamp (e.g.
                       2013-01-02T13:23:37) or relative (e.g. 42m for 42
                       minutes)
      --tail string    Number of lines to show from the end of the logs
                       (default "all")
  -t, --timestamps     Show timestamps
      --until string   Show logs before a timestamp (e.g.
                       2013-01-02T13:23:37) or relative (e.g. 42m for 42
                       minutes)

> docker container run -d --name con1 -p 80:80 nginx
55023dd07f684ff44e27bd6ce92e1710484c99a9eae6735a27a06fbe121743fe

> docker logs con1
/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
/docker-entrypoint.sh: Configuration complete; ready for start up

> docker logs --details con1
 /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
 /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
 /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
 /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
 /docker-entrypoint.sh: Configuration complete; ready for start up

--  looks at logs with timestamp
> docker logs -t con1
2020-12-24T11:42:07.562302532Z /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
2020-12-24T11:42:07.562533275Z /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
2020-12-24T11:42:07.566558778Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
2020-12-24T11:42:07.573026724Z 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
2020-12-24T11:42:07.584589832Z 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
2020-12-24T11:42:07.585064060Z /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
2020-12-24T11:42:07.589955979Z /docker-entrypoint.sh: Configuration complete; ready for start up

> docker logs --until 2020-12-24T11:42:07.573026724Z con1
/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf


> docker logs --since 2020-12-24T11:42:07.573026724Z con1
10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
/docker-entrypoint.sh: Configuration complete; ready for start up


> docker logs con1
/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
/docker-entrypoint.sh: Configuration complete; ready for start up

--  how to look at last three line log
> docker logs --tail 3 con1
10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
/docker-entrypoint.sh: Configuration complete; ready for start up

--  how to look at last one line log
> docker logs --tail 1 con1
/docker-entrypoint.sh: Configuration complete; ready for start up

--  how to trace instant(live) logs with using -f parameter
> docker logs -f con1
/docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
/docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
/docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
/docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
/docker-entrypoint.sh: Configuration complete; ready for start up

--  Lets look at which driver we use for logging (default json-file)
> docker info
Client:
 Debug Mode: false

Server:
 Containers: 2
  Running: 1
  Paused: 0
  Stopped: 1
 Images: 7
 Server Version: 19.03.12
 Storage Driver: overlay2
  Backing Filesystem: extfs
  Supports d_type: true
  Native Overlay Diff: true
 Logging Driver: json-file
 Cgroup Driver: cgroupfs
 Plugins:
  Volume: local
  Network: bridge host ipvlan macvlan null overlay
  Log: awslogs fluentd gcplogs gelf journald json-file local logentries splunk syslog
 Swarm: inactive
 Runtimes: runc
 Default Runtime: runc
 Init Binary: docker-init
 containerd version: 7ad184331fa3e55e52b890ea95e65ba581ae3429
 runc version: dc9208a3303feef5b3839f4323d9beb36df0a9dd
 init version: fec3683
 Security Options:
  seccomp
   Profile: default
 Kernel Version: 4.19.130-boot2docker
 Operating System: Boot2Docker 19.03.12 (TCL 10.1)
 OSType: linux
 Architecture: x86_64
 CPUs: 1
 Total Memory: 985.4MiB
 Name: default
 ID: PJQ7:KCNZ:BRBQ:QDZH:GSB7:HK6M:JI24:HVHS:WDY4:QETZ:ZFF5:VLRU
 Docker Root Dir: /mnt/sda1/var/lib/docker
 Debug Mode: false
 Username: gunerhanale
 Registry: https://index.docker.io/v1/
 Labels:
  provider=virtualbox
 Experimental: false
 Insecure Registries:
  127.0.0.0/8
 Live Restore Enabled: false
 Product License: Community Engine

-- we can change logging driver when create a container
> docker container run --log-driver splunk nginx
C:\Program Files\Docker Toolbox\docker.exe: Error response from daemon: failed to initialize logging driver: splunk: splunk-url is expected.


- Docker Stats and Top (to manage all container status)

--  We can see without a connection which process is working in a container (like linux command 'ps')
> docker top con1
UID                 PID                 PPID                C                   STIME               TTY                 TIME                CMD
root                3315                3295                0                   11:42               ?                   00:00:00            nginx: master process nginx -g daemon off;
101                 3364                3315                0                   11:42               ?                   00:00:00            nginx: worker process 

--  We can look at that how much all working containers use CPU, RAM, IO etc.
> docker stats
CONTAINER ID        NAME                CPU %               MEM USAGE / LIMIT     MEM %               NET I/O             BLOCK I/O           PIDS
55023dd07f68        con1                0.00%               2.207MiB / 985.4MiB   0.22%               1.33kB / 0B         0B / 8.19kB         2

> docker stats con1


---- Container Cpu and Memory Limit

--  default value is limitless 
> docker container run -d ozgurozturknet/adanzyedocker
7a63d892af121782416c596afdd4e463209e7ddfdf372d60f97fd2ca6a66fb6f

> docker stats
CONTAINER ID        NAME                CPU %               MEM USAGE / LIMIT     MEM %               NET I/O             BLOCK I/O           PIDS
17aa303dbdbd        unruffled_galileo   0.01%               4.445MiB / 985.4MiB   0.45%               656B / 0B           4.6MB / 0B          82
55023dd07f68        con1                0.00%               2.121MiB / 985.4MiB   0.22%               1.4kB / 0B          0B / 8.19kB         2

--  we can set memory size (b,k,m or g) with using '--memory'
> docker container run -d --memory=100m ozgurozturknet/adanzyedocker
3c4474d961dffcb6047b38a2d75fc09989b32834f223758b71eac72e82e17a84

> docker stats
CONTAINER ID        NAME                CPU %               MEM USAGE / LIMIT     MEM %               NET I/O             BLOCK I/O           PIDS
3c4474d961df        exciting_rhodes     0.02%               4.234MiB / 100MiB     4.23%               726B / 0B           0B / 0B             82
7a63d892af12        busy_lewin          0.01%               4.262MiB / 985.4MiB   0.43%               866B / 0B           0B / 0B             82

--  we can set Swap size of (b,k,m or g) with using '--memory-swap' and Swap should be bigger than memory size. When the memory is over, swap helps us to maintain.
> docker container run -d --memory=100m --memory-swap=200m ozgurozturknet/adanzyedocker
484c0291bff6f5e0ec6796f2f2be157291df031c060f000f0c1bc97e72d42096

> docker stats
CONTAINER ID        NAME                CPU %               MEM USAGE / LIMIT     MEM %               NET I/O             BLOCK I/O           PIDS
484c0291bff6        musing_cohen        0.00%               4.344MiB / 100MiB     4.34%               866B / 0B           0B / 0B             82
3c4474d961df        exciting_rhodes     0.02%               4.215MiB / 100MiB     4.21%               936B / 0B           0B / 0B             82
7a63d892af12        busy_lewin          0.00%               4.262MiB / 985.4MiB   0.43%               1.01kB / 0B         0B / 0B             82

-- we can set how much core we want to use with using '--cpus' (--cpus="0.5", --cpus="1.5", --cpus="2")
> docker container run -d --cpus="0.5" ozgurozturknet/adanzyedocker
7345b73051f9100d0f57753e62be8d40eaacac0831b33f748676de882adb941b

-- we can set which number of cores we want to use with using '--cpuset-cpus' (--cpuset-cpus="0", --cpuset-cpus="0,3")
> docker container run -d --cpus="0.5" --cpuset-cpus="0" ozgurozturknet/adanzyedocker
8a52cd2c00a47238401d309b7b093ae8495108402feb34047037f9cfdf3b9700


---- Environment Variables

--  how to list Environment Variables for Windows
> Get-ChildItem Env:

Name                           Value
----                           -----
ALLUSERSPROFILE                C:\ProgramData
APPDATA                        C:\Users\ebubekir\AppData\Roaming
CommonProgramFiles             C:\Program Files\Common Files
CommonProgramFiles(x86)        C:\Program Files (x86)\Common Files
CommonProgramW6432             C:\Program Files\Common Files
COMPOSE_CONVERT_WINDOWS_PATHS  true
COMPUTERNAME                   DESKTOP-DL2IOOE
ComSpec                        C:\Windows\system32\cmd.exe
DOCKER_CERT_PATH               C:\Users\ebubekir\.docker\machine\machines\default
DOCKER_HOST                    tcp://192.168.99.100:2376
DOCKER_MACHINE_NAME            default
DOCKER_TLS_VERIFY              1
DOCKER_TOOLBOX_INSTALL_PATH    C:\Program Files\Docker Toolbox
HOMEDRIVE                      C:
HOMEPATH                       \Users\ebubekir
JAVA_HOME                      C:\Program Files\Java\jdk1.8.0_45
JAVA_OPTIONS                   -Dfile.encoding=UTF-8 -Duser.language=en
JRE_HOME                       C:\Program Files\Java\jre1.8.0_45
LOCALAPPDATA                   C:\Users\ebubekir\AppData\Local
LOGONSERVER                    \\DESKTOP-DL2IOOE
NO_PROXY                       192.168.99.100
NUMBER_OF_PROCESSORS           4
OneDrive                       C:\Users\ebubekir\OneDrive
OS                             Windows_NT
Path                           C:\oraclexe\app\oracle\product\11.2.0\server\bin;C:\ProgramData\Oracle\Java\javapath;C:\Windows\system32;C:\...
PATHEXT                        .COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.CPL
PROCESSOR_ARCHITECTURE         AMD64
PROCESSOR_IDENTIFIER           Intel64 Family 6 Model 58 Stepping 9, GenuineIntel
PROCESSOR_LEVEL                6
PROCESSOR_REVISION             3a09
ProgramData                    C:\ProgramData
ProgramFiles                   C:\Program Files
ProgramFiles(x86)              C:\Program Files (x86)
ProgramW6432                   C:\Program Files
PSModulePath                   C:\Users\ebubekir\Documents\WindowsPowerShell\Modules;C:\Program Files\WindowsPowerShell\Modules;C:\Windows\...
PUBLIC                         C:\Users\Public
SESSIONNAME                    Console
SystemDrive                    C:
SystemRoot                     C:\Windows
TEMP                           C:\Users\ebubekir\AppData\Local\Temp
TMP                            C:\Users\ebubekir\AppData\Local\Temp
USERDOMAIN                     DESKTOP-DL2IOOE
USERDOMAIN_ROAMINGPROFILE      DESKTOP-DL2IOOE
USERNAME                       ebubekir
USERPROFILE                    C:\Users\ebubekir
VBOX_MSI_INSTALL_PATH          C:\Program Files\Oracle\VirtualBox\
windir                         C:\Windows

--  how to look at a environment variable for Windows
> $Env:JAVA_HOME
C:\Program Files\Java\jdk1.8.0_45

--  how to add a new environment variable for Windows
> $Env:test="denemedir"
> $Env:test
denemedir
> Get-ChildItem Env:

Name                           Value
----                           -----
ALLUSERSPROFILE                C:\ProgramData
APPDATA                        C:\Users\ebubekir\AppData\Roaming
CommonProgramFiles             C:\Program Files\Common Files
CommonProgramFiles(x86)        C:\Program Files (x86)\Common Files
CommonProgramW6432             C:\Program Files\Common Files
COMPOSE_CONVERT_WINDOWS_PATHS  true
COMPUTERNAME                   DESKTOP-DL2IOOE
ComSpec                        C:\Windows\system32\cmd.exe
DOCKER_CERT_PATH               C:\Users\ebubekir\.docker\machine\machines\default
DOCKER_HOST                    tcp://192.168.99.100:2376
DOCKER_MACHINE_NAME            default
DOCKER_TLS_VERIFY              1
DOCKER_TOOLBOX_INSTALL_PATH    C:\Program Files\Docker Toolbox
HOMEDRIVE                      C:
HOMEPATH                       \Users\ebubekir
JAVA_HOME                      C:\Program Files\Java\jdk1.8.0_45
JAVA_OPTIONS                   -Dfile.encoding=UTF-8 -Duser.language=en
JRE_HOME                       C:\Program Files\Java\jre1.8.0_45
LOCALAPPDATA                   C:\Users\ebubekir\AppData\Local
LOGONSERVER                    \\DESKTOP-DL2IOOE
NO_PROXY                       192.168.99.100
NUMBER_OF_PROCESSORS           4
OneDrive                       C:\Users\ebubekir\OneDrive
OS                             Windows_NT
Path                           C:\oraclexe\app\oracle\product\11.2.0\server\bin;C:\ProgramData\Oracle\Java\javapath;C:\Windows\system32;C:\...
PATHEXT                        .COM;.EXE;.BAT;.CMD;.VBS;.VBE;.JS;.JSE;.WSF;.WSH;.MSC;.CPL
PROCESSOR_ARCHITECTURE         AMD64
PROCESSOR_IDENTIFIER           Intel64 Family 6 Model 58 Stepping 9, GenuineIntel
PROCESSOR_LEVEL                6
PROCESSOR_REVISION             3a09
ProgramData                    C:\ProgramData
ProgramFiles                   C:\Program Files
ProgramFiles(x86)              C:\Program Files (x86)
ProgramW6432                   C:\Program Files
PSModulePath                   C:\Users\ebubekir\Documents\WindowsPowerShell\Modules;C:\Program Files\WindowsPowerShell\Modules;C:\Windows\...
PUBLIC                         C:\Users\Public
SESSIONNAME                    Console
SystemDrive                    C:
SystemRoot                     C:\Windows
TEMP                           C:\Users\ebubekir\AppData\Local\Temp
test                           denemedir
TMP                            C:\Users\ebubekir\AppData\Local\Temp
USERDOMAIN                     DESKTOP-DL2IOOE
USERDOMAIN_ROAMINGPROFILE      DESKTOP-DL2IOOE
USERNAME                       ebubekir
USERPROFILE                    C:\Users\ebubekir
VBOX_MSI_INSTALL_PATH          C:\Program Files\Oracle\VirtualBox\
windir                         C:\Windows

--  how to create a ubuntu container
> docker run -it ubuntu bash
Unable to find image 'ubuntu:latest' locally
latest: Pulling from library/ubuntu
da7391352a9b: Pull complete
14428a6d4bcd: Pull complete
2c2d948710f2: Pull complete
Digest: sha256:c95a8e48bf88e9849f3e0f723d9f49fa12c5a00cfc6e60d2bc99d87555295e4c
Status: Downloaded newer image for ubuntu:latest

--  how to list environment variables for linux
root@ebefd76eea45:/# printenv
HOSTNAME=ebefd76eea45
PWD=/
HOME=/root
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=00:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.zst=01;31:*.tzst=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.wim=01;31:*.swm=01;31:*.dwm=01;31:*.esd=01;31:*.jpg=01;35:*.jpeg=01;35:*.mjpg=01;35:*.mjpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.m4a=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.oga=00;36:*.opus=00;36:*.spx=00;36:*.xspf=00;36:
TERM=xterm
SHLVL=1
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
_=/usr/bin/printenv

--  how to list a new environment variable for linux
root@ebefd76eea45:/# echo $TERM
xterm

--  how to add a new environment variable for Windows
root@ebefd76eea45:/# export test="denemedir"

root@ebefd76eea45:/# echo $test
denemedir

--  How to set Environment variables when docker container creates
> docker container run -it --env VAR1=deneme1 --env VAR2=deneme2 ubuntu bash
root@78bc40790750:/# printenv
HOSTNAME=78bc40790750
PWD=/
HOME=/root
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=00:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.zst=01;31:*.tzst=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.wim=01;31:*.swm=01;31:*.dwm=01;31:*.esd=01;31:*.jpg=01;35:*.jpeg=01;35:*.mjpg=01;35:*.mjpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.m4a=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.oga=00;36:*.opus=00;36:*.spx=00;36:*.xspf=00;36:
TERM=xterm
SHLVL=1
VAR1=deneme1
VAR2=deneme2
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
_=/usr/bin/printenv


-- how to set an environment variable from our computer's variables when we create a container
> docker container run -it --env JAVA_HOME ubuntu bash
root@07d5e11cb0b7:/# printenv
HOSTNAME=07d5e11cb0b7
JAVA_HOME=C:\Program Files\Java\jdk1.8.0_45
PWD=/
HOME=/root
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=00:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.zst=01;31:*.tzst=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.wim=01;31:*.swm=01;31:*.dwm=01;31:*.esd=01;31:*.jpg=01;35:*.jpeg=01;35:*.mjpg=01;35:*.mjpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.m4a=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.oga=00;36:*.opus=00;36:*.spx=00;36:*.xspf=00;36:
TERM=xterm
SHLVL=1
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
_=/usr/bin/printenv
root@07d5e11cb0b7:/# exit

-- how to add Environment variable list from own computer folder when create a container 
> cd C:\AdanZyeDocker\kisim4\bolum42
> docker container run -it --env-file .\env.list ubuntu bash
root@45dffb9b281c:/# printenv
var3=deneme3
HOSTNAME=45dffb9b281c
PWD=/
HOME=/root
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=00:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.zst=01;31:*.tzst=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.wim=01;31:*.swm=01;31:*.dwm=01;31:*.esd=01;31:*.jpg=01;35:*.jpeg=01;35:*.mjpg=01;35:*.mjpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=00;36:*.au=00;36:*.flac=00;36:*.m4a=00;36:*.mid=00;36:*.midi=00;36:*.mka=00;36:*.mp3=00;36:*.mpc=00;36:*.ogg=00;36:*.ra=00;36:*.wav=00;36:*.oga=00;36:*.opus=00;36:*.spx=00;36:*.xspf=00;36:
TERM=xterm
SHLVL=1
VAR1=deneme1
VAR2=deneme2
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
Var4=deneme4
_=/usr/bin/printenv
root@45dffb9b281c:/# exit
exit

-- We can use an environment variable to determine which database we use. Ex:This image expect us to set an environment variable named 'veritabani'.
> docker container run --env database=test.pizzashop.com ozgurozturknet/env1
Unable to find image 'ozgurozturknet/env1:latest' locally
latest: Pulling from ozgurozturknet/env1
169185f82c45: Already exists
1e929b64ace7: Already exists
041d4f4c8c88: Pull complete
6edcf4321129: Pull complete
Digest: sha256:1e05debfdde6e4ec9e33af6b8b58820e26666c7f016ba6a1d90c58749467a726
Status: Downloaded newer image for ozgurozturknet/env1:latest
Baglanilan veritabani: null

> docker container run --env veritabani=test.pizzashop.com ozgurozturknet/env1
Baglanilan veritabani: test.pizzashop.com

> docker container run --env veritabani=prod.pizzashop.com ozgurozturknet/env1
Baglanilan veritabani: prod.pizzashop.com


-------------------------------------------------------------------------


Date of Notes : 26-12-2020

---- Images Tags and Named

> docker image pull ozgurozturknet/adanzyedocker
Using default tag: latest
latest: Pulling from ozgurozturknet/adanzyedocker
Digest: sha256:10631a62b96b8dc8c468fe482aff70871c6c81f4a49ea4c5350ce765cf9f2185
Status: Image is up to date for ozgurozturknet/adanzyedocker:latest
docker.io/ozgurozturknet/adanzyedocker:latest

> docker image pull ubuntu
Using default tag: latest
latest: Pulling from library/ubuntu
Digest: sha256:c95a8e48bf88e9849f3e0f723d9f49fa12c5a00cfc6e60d2bc99d87555295e4c
Status: Image is up to date for ubuntu:latest
docker.io/library/ubuntu:latest   (Official Images)

> docker image pull gcr.io/google-containers/busybox
Using default tag: latest
latest: Pulling from google-containers/busybox
a3ed95caeb02: Pull complete
138cfc514ce4: Pull complete
Digest: sha256:d8d3bc2c183ed2f9f10e7258f84971202325ee6011ba137112e01e30f206de67
Status: Downloaded newer image for gcr.io/google-containers/busybox:latest
gcr.io/google-containers/busybox:latest

> docker pull ozgurozturknet/adanzyedocker:v1
v1: Pulling from ozgurozturknet/adanzyedocker
9d48c3bd43c5: Already exists
d3565940ff69: Already exists
1cc6c921162a: Already exists
17877ce0de23: Already exists
4e10ed3cf6fc: Already exists
21e5a7e65c47: Pull complete
a43a0e78be9e: Pull complete
e0901adfff3d: Pull complete
80318ccc635a: Pull complete
d94141d9ce4d: Pull complete
Digest: sha256:d8121aa20720e34ed37845b7c0490110481723463e85716afa3ab169c6afe6e4
Status: Downloaded newer image for ozgurozturknet/adanzyedocker:v1
docker.io/ozgurozturknet/adanzyedocker:v1

> docker pull ozgurozturknet/adanzyedocker:v2
v2: Pulling from ozgurozturknet/adanzyedocker
9d48c3bd43c5: Already exists
d3565940ff69: Already exists
1cc6c921162a: Already exists
17877ce0de23: Already exists
4e10ed3cf6fc: Already exists
21e5a7e65c47: Already exists
a43a0e78be9e: Already exists
e0901adfff3d: Already exists
80318ccc635a: Already exists
13de18232897: Pull complete
Digest: sha256:74b49d0ad4a8bba936659051cdd3c93f5a0381286bcb60b273045e1326968ae9
Status: Downloaded newer image for ozgurozturknet/adanzyedocker:v2
docker.io/ozgurozturknet/adanzyedocker:v2

> docker image pull ubuntu:20.04
20.04: Pulling from library/ubuntu
Digest: sha256:c95a8e48bf88e9849f3e0f723d9f49fa12c5a00cfc6e60d2bc99d87555295e4c
Status: Downloaded newer image for ubuntu:20.04
docker.io/library/ubuntu:20.04

> docker image ls
REPOSITORY                         TAG                 IMAGE ID            CREATED             SIZE
httpd                              alpine              5d779ff71c18        8 days ago          55.5MB
alpine                             latest              389fef711851        9 days ago          5.58MB
nginx                              latest              ae2feff98a0c        10 days ago         133MB
centos                             latest              300e315adb2f        2 weeks ago         209MB
ubuntu                             20.04               f643c72bc252        4 weeks ago         72.9MB
ubuntu                             latest              f643c72bc252        4 weeks ago         72.9MB
ozgurozturknet/hello-app           latest              7feb3d617d2d        8 months ago        5.6MB
ozgurozturknet/webdb               latest              3e6048caa2a4        11 months ago       437MB
ozgurozturknet/webkayit            latest              3b8929349c0b        11 months ago       483MB
ozgurozturknet/env1                latest              8c4c4f717b65        11 months ago       126MB
ozgurozturknet/adanzyedocker       latest              2b4647565690        14 months ago       284MB
ozgurozturknet/adanzyedocker       v2                  b97509fa9f19        14 months ago       283MB
ozgurozturknet/adanzyedocker       v1                  a5a841543d41        14 months ago       283MB
ozgurozturknet/app1                latest              353d147de1ee        15 months ago       126MB
gcr.io/google-containers/busybox   latest              e7d168d7db45        5 years ago         2.43MB 


> docker pull mysql
Using default tag: latest
latest: Pulling from library/mysql
6ec7b7d162b2: Already exists
fedd960d3481: Pull complete
7ab947313861: Pull complete
64f92f19e638: Pull complete
3e80b17bff96: Pull complete
014e976799f9: Pull complete
59ae84fee1b3: Pull complete
ffe10de703ea: Pull complete
657af6d90c83: Pull complete
98bfb480322c: Pull complete
6aa3859c4789: Pull complete
1ed875d851ef: Pull complete
Digest: sha256:78800e6d3f1b230e35275145e657b82c3fb02a27b2d8e76aac2f5e90c1c30873
Status: Downloaded newer image for mysql:latest
docker.io/library/mysql:latest

> docker pull mysql:8
8: Pulling from library/mysql
Digest: sha256:78800e6d3f1b230e35275145e657b82c3fb02a27b2d8e76aac2f5e90c1c30873
Status: Downloaded newer image for mysql:8
docker.io/library/mysql:8

> docker pull mysql:5
5: Pulling from library/mysql
6ec7b7d162b2: Already exists
fedd960d3481: Already exists
7ab947313861: Already exists
64f92f19e638: Already exists
3e80b17bff96: Already exists
014e976799f9: Already exists
59ae84fee1b3: Already exists
7d1da2a18e2e: Pull complete
301a28b700b9: Pull complete
529dc8dbeaf3: Pull complete
bc9d021dc13f: Pull complete
Digest: sha256:c3a567d3e3ad8b05dfce401ed08f0f6bf3f3b64cc17694979d5f2e5d78e10173
Status: Downloaded newer image for mysql:5
docker.io/library/mysql:5

> docker pull mysql:5.7
5.7: Pulling from library/mysql
Digest: sha256:c3a567d3e3ad8b05dfce401ed08f0f6bf3f3b64cc17694979d5f2e5d78e10173
Status: Downloaded newer image for mysql:5.7
docker.io/library/mysql:5.7

> docker image ls
REPOSITORY                         TAG                 IMAGE ID            CREATED             SIZE
mysql                              5                   f07dfa83b528        4 days ago          448MB
mysql                              5.7                 f07dfa83b528        4 days ago          448MB
mysql                              8                   a347a5928046        4 days ago          545MB
mysql                              latest              a347a5928046        4 days ago          545MB
httpd                              alpine              5d779ff71c18        8 days ago          55.5MB
alpine                             latest              389fef711851        9 days ago          5.58MB
nginx                              latest              ae2feff98a0c        10 days ago         133MB
centos                             latest              300e315adb2f        2 weeks ago         209MB
ubuntu                             20.04               f643c72bc252        4 weeks ago         72.9MB
ubuntu                             latest              f643c72bc252        4 weeks ago         72.9MB
ozgurozturknet/hello-app           latest              7feb3d617d2d        8 months ago        5.6MB
ozgurozturknet/webdb               latest              3e6048caa2a4        11 months ago       437MB
ozgurozturknet/webkayit            latest              3b8929349c0b        11 months ago       483MB
ozgurozturknet/env1                latest              8c4c4f717b65        11 months ago       126MB
ozgurozturknet/adanzyedocker       latest              2b4647565690        14 months ago       284MB
ozgurozturknet/adanzyedocker       v2                  b97509fa9f19        14 months ago       283MB
ozgurozturknet/adanzyedocker       v1                  a5a841543d41        14 months ago       283MB
ozgurozturknet/app1                latest              353d147de1ee        15 months ago       126MB
gcr.io/google-containers/busybox   latest              e7d168d7db45        5 years ago         2.43MB


---- How to create a docker image

//We wrote Docker file in this folder
> code .
> ls


    Directory: C:\AdanZyeDocker\kisim5\bolum48


Mode                LastWriteTime         Length Name
----                -------------         ------ ----
d-----       26.12.2020     14:55                myapp
-a----       26.12.2020     14:55            134 Dockerfile


PS C:\AdanZyeDocker\kisim5\bolum48> docker image build -t gunerhanale/hello .
Sending build context to Docker daemon  4.608kB
Step 1/6 : FROM ubuntu:18.04
18.04: Pulling from library/ubuntu
f22ccc0b8772: Pull complete
3cf8fb62ba5f: Pull complete
e80c964ece6a: Pull complete
Digest: sha256:fd25e706f3dea2a5ff705dbc3353cf37f08307798f3e360a13e9385840f73fb3
Status: Downloaded newer image for ubuntu:18.04
 ---> 2c047404e52d
Step 2/6 : RUN apt-get update -y
 ---> Running in f277ff79e047
Get:1 http://security.ubuntu.com/ubuntu bionic-security InRelease [88.7 kB]
Get:2 http://archive.ubuntu.com/ubuntu bionic InRelease [242 kB]
Get:3 http://security.ubuntu.com/ubuntu bionic-security/universe amd64 Packages [1372 kB]
Get:4 http://archive.ubuntu.com/ubuntu bionic-updates InRelease [88.7 kB]
Get:5 http://archive.ubuntu.com/ubuntu bionic-backports InRelease [74.6 kB]
Get:6 http://archive.ubuntu.com/ubuntu bionic/multiverse amd64 Packages [186 kB]
Get:7 http://archive.ubuntu.com/ubuntu bionic/restricted amd64 Packages [13.5 kB]
Get:8 http://archive.ubuntu.com/ubuntu bionic/main amd64 Packages [1344 kB]
Get:9 http://security.ubuntu.com/ubuntu bionic-security/main amd64 Packages [1816 kB]
Get:10 http://archive.ubuntu.com/ubuntu bionic/universe amd64 Packages [11.3 MB]
Get:11 http://security.ubuntu.com/ubuntu bionic-security/multiverse amd64 Packages [15.3 kB]
Get:12 http://security.ubuntu.com/ubuntu bionic-security/restricted amd64 Packages [237 kB]
Get:13 http://archive.ubuntu.com/ubuntu bionic-updates/main amd64 Packages [2244 kB]
Get:14 http://archive.ubuntu.com/ubuntu bionic-updates/restricted amd64 Packages [266 kB]
Get:15 http://archive.ubuntu.com/ubuntu bionic-updates/multiverse amd64 Packages [53.8 kB]
Get:16 http://archive.ubuntu.com/ubuntu bionic-updates/universe amd64 Packages [2136 kB]
Get:17 http://archive.ubuntu.com/ubuntu bionic-backports/universe amd64 Packages [11.4 kB]
Get:18 http://archive.ubuntu.com/ubuntu bionic-backports/main amd64 Packages [11.3 kB]
Fetched 21.5 MB in 20s (1052 kB/s)
Reading package lists...
Removing intermediate container f277ff79e047
 ---> 17bb265f635d
Step 3/6 : RUN apt-get install default-jre -y
 ---> Running in 30cb4bc6abdb
Reading package lists...
Building dependency tree...
Reading state information...
...
...
...
Setting up default-jre (2:1.11-68ubuntu1~18.04.1) ...
Processing triggers for libc-bin (2.27-3ubuntu1.3) ...
Processing triggers for ca-certificates (20201027ubuntu0.18.04.1) ...
Updating certificates in /etc/ssl/certs...
0 added, 0 removed; done.
Running hooks in /etc/ca-certificates/update.d...

done.
done.
Removing intermediate container 30cb4bc6abdb
 ---> c2360b9f7ad0
Step 4/6 : WORKDIR /merhaba
 ---> Running in 7aca6ceb0c4b
Removing intermediate container 7aca6ceb0c4b
 ---> baa3afeb4244
Step 5/6 : COPY /myapp .
 ---> e385e04ab5ec
Step 6/6 : CMD ["java", "merhaba"]
 ---> Running in b4693fcadeca
Removing intermediate container b4693fcadeca
 ---> e9dc642dd346
Successfully built e9dc642dd346
Successfully tagged gunerhanale/hello:latest
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.

> docker image ls
REPOSITORY                         TAG                 IMAGE ID            CREATED             SIZE
gunerhanale/hello                latest              e9dc642dd346        42 seconds ago      477MB
mysql                              5                   f07dfa83b528        4 days ago          448MB
mysql                              5.7                 f07dfa83b528        4 days ago          448MB
mysql                              8                   a347a5928046        4 days ago          545MB
mysql                              latest              a347a5928046        4 days ago          545MB
httpd                              alpine              5d779ff71c18        9 days ago          55.5MB
alpine                             latest              389fef711851        9 days ago          5.58MB
nginx                              latest              ae2feff98a0c        10 days ago         133MB
centos                             latest              300e315adb2f        2 weeks ago         209MB
ubuntu                             20.04               f643c72bc252        4 weeks ago         72.9MB
ubuntu                             latest              f643c72bc252        4 weeks ago         72.9MB
ubuntu                             18.04               2c047404e52d        4 weeks ago         63.3MB
ozgurozturknet/hello-app           latest              7feb3d617d2d        8 months ago        5.6MB
ozgurozturknet/webdb               latest              3e6048caa2a4        11 months ago       437MB
ozgurozturknet/webkayit            latest              3b8929349c0b        11 months ago       483MB
ozgurozturknet/env1                latest              8c4c4f717b65        11 months ago       126MB
ozgurozturknet/adanzyedocker       latest              2b4647565690        14 months ago       284MB
ozgurozturknet/adanzyedocker       v2                  b97509fa9f19        14 months ago       283MB
ozgurozturknet/adanzyedocker       v1                  a5a841543d41        14 months ago       283MB
ozgurozturknet/app1                latest              353d147de1ee        15 months ago       126MB
gcr.io/google-containers/busybox   latest              e7d168d7db45        5 years ago         2.43MB

> docker container run gunerhanale/hello
Merhaba arkadaslar. Ben merhaba isimli Java konsol uygulamas?y?m

> docker image history gunerhanale/hello
IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT
e9dc642dd346        2 minutes ago       /bin/sh -c #(nop)  CMD ["java" "merhaba"]       0B
e385e04ab5ec        2 minutes ago       /bin/sh -c #(nop) COPY dir:89fe398503f2ed78f   653B
baa3afeb4244        2 minutes ago       /bin/sh -c #(nop) WORKDIR /merhaba              0B
c2360b9f7ad0        2 minutes ago       /bin/sh -c apt-get install default-jre -y       380MB
17bb265f635d        4 minutes ago       /bin/sh -c apt-get update -y                    34.6MB
2c047404e52d        4 weeks ago         /bin/sh -c #(nop)  CMD ["/bin/bash"]            0B
<missing>           4 weeks ago         /bin/sh -c mkdir -p /run/systemd && echo 'do   7B
<missing>           4 weeks ago         /bin/sh -c [ -z "$(apt-get indextargets)" ]     0B
<missing>           4 weeks ago         /bin/sh -c set -xe   && echo '#!/bin/sh' > /   745B
<missing>           4 weeks ago         /bin/sh -c #(nop) ADD file:6ef542de9959c3061   63.3MB

> docker image history gunerhanale/hello
IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT
e9dc642dd346        16 minutes ago      /bin/sh -c #(nop)  CMD ["java" "merhaba"]       0B
e385e04ab5ec        16 minutes ago      /bin/sh -c #(nop) COPY dir:89fe398503f2ed78f   653B
baa3afeb4244        16 minutes ago      /bin/sh -c #(nop) WORKDIR /merhaba              0B
c2360b9f7ad0        16 minutes ago      /bin/sh -c apt-get install default-jre -y       380MB
17bb265f635d        18 minutes ago      /bin/sh -c apt-get update -y                    34.6MB
2c047404e52d        4 weeks ago         /bin/sh -c #(nop)  CMD ["/bin/bash"]            0B
<missing>           4 weeks ago         /bin/sh -c mkdir -p /run/systemd && echo 'do   7B
<missing>           4 weeks ago         /bin/sh -c [ -z "$(apt-get indextargets)" ]     0B
<missing>           4 weeks ago         /bin/sh -c set -xe   && echo '#!/bin/sh' > /   745B
<missing>           4 weeks ago         /bin/sh -c #(nop) ADD file:6ef542de9959c3061   63.3MB

> docker image history ubuntu:18.04
IMAGE               CREATED             CREATED BY                                      SIZE                COMMENT
2c047404e52d        4 weeks ago         /bin/sh -c #(nop)  CMD ["/bin/bash"]            0B
<missing>           4 weeks ago         /bin/sh -c mkdir -p /run/systemd && echo 'do   7B
<missing>           4 weeks ago         /bin/sh -c [ -z "$(apt-get indextargets)" ]     0B
<missing>           4 weeks ago         /bin/sh -c set -xe   && echo '#!/bin/sh' > /   745B
<missing>           4 weeks ago         /bin/sh -c #(nop) ADD file:6ef542de9959c3061   63.3MB

> docker image push gunerhanale/hello
The push refers to repository [docker.io/gunerhanale/hello]
16cb125f1ebc: Pushed
236f6217591d: Pushed
b6bb456b95fe: Pushed
abd43f8b7b6e: Pushed
fe6d8881187d: Pushed
23135df75b44: Pushed
b43408d5f11b: Pushed
latest: digest: sha256:e64804023a52f4447430d950ccb71812496ff78b8af35276be498c842644a40b size: 1782

> docker container run gunerhanale/hello
Merhaba arkadaslar. Ben merhaba isimli Java konsol uygulamas?y?m

> docker image ls
REPOSITORY                         TAG                 IMAGE ID            CREATED             SIZE
ebubekirnet/merhaba                latest              e9dc642dd346        27 minutes ago      477MB
gunerhanale/hello                  latest              e9dc642dd346        27 minutes ago      477MB
mysql                              5                   f07dfa83b528        4 days ago          448MB
mysql                              5.7                 f07dfa83b528        4 days ago          448MB
mysql                              8                   a347a5928046        4 days ago          545MB
mysql                              latest              a347a5928046        4 days ago          545MB
httpd                              alpine              5d779ff71c18        9 days ago          55.5MB
alpine                             latest              389fef711851        9 days ago          5.58MB
nginx                              latest              ae2feff98a0c        10 days ago         133MB
centos                             latest              300e315adb2f        2 weeks ago         209MB
ubuntu                             20.04               f643c72bc252        4 weeks ago         72.9MB
ubuntu                             latest              f643c72bc252        4 weeks ago         72.9MB
ubuntu                             18.04               2c047404e52d        4 weeks ago         63.3MB
ozgurozturknet/hello-app           latest              7feb3d617d2d        8 months ago        5.6MB
ozgurozturknet/webdb               latest              3e6048caa2a4        11 months ago       437MB
ozgurozturknet/webkayit            latest              3b8929349c0b        11 months ago       483MB
ozgurozturknet/env1                latest              8c4c4f717b65        11 months ago       126MB
ozgurozturknet/adanzyedocker       latest              2b4647565690        14 months ago       284MB
ozgurozturknet/adanzyedocker       v2                  b97509fa9f19        14 months ago       283MB
ozgurozturknet/adanzyedocker       v1                  a5a841543d41        14 months ago       283MB
ozgurozturknet/app1                latest              353d147de1ee        15 months ago       126MB
gcr.io/google-containers/busybox   latest              e7d168d7db45        5 years ago         2.43MB

> docker image rm e9dc
Error response from daemon: conflict: unable to delete e9dc642dd346 (must be forced) - image is referenced in multiple repositories

> docker image rm gunerhanale/hello
Untagged: gunerhanale/hello:latest
Untagged: gunerhanale/hello@sha256:e64804023a52f4447430d950ccb71812496ff78b8af35276be498c842644a40b

> docker image rm gunerhanale/hello:latest
Error: No such image: gunerhanale/hello:latest

> docker image ls
REPOSITORY                         TAG                 IMAGE ID            CREATED             SIZE
ebubekirnet/merhaba                latest              e9dc642dd346        28 minutes ago      477MB
mysql                              5                   f07dfa83b528        4 days ago          448MB
mysql                              5.7                 f07dfa83b528        4 days ago          448MB
mysql                              8                   a347a5928046        4 days ago          545MB
mysql                              latest              a347a5928046        4 days ago          545MB
httpd                              alpine              5d779ff71c18        9 days ago          55.5MB
alpine                             latest              389fef711851        9 days ago          5.58MB
nginx                              latest              ae2feff98a0c        10 days ago         133MB
centos                             latest              300e315adb2f        2 weeks ago         209MB
ubuntu                             20.04               f643c72bc252        4 weeks ago         72.9MB
ubuntu                             latest              f643c72bc252        4 weeks ago         72.9MB
ubuntu                             18.04               2c047404e52d        4 weeks ago         63.3MB
ozgurozturknet/hello-app           latest              7feb3d617d2d        8 months ago        5.6MB
ozgurozturknet/webdb               latest              3e6048caa2a4        11 months ago       437MB
ozgurozturknet/webkayit            latest              3b8929349c0b        11 months ago       483MB
ozgurozturknet/env1                latest              8c4c4f717b65        11 months ago       126MB
ozgurozturknet/adanzyedocker       latest              2b4647565690        14 months ago       284MB
ozgurozturknet/adanzyedocker       v2                  b97509fa9f19        14 months ago       283MB
ozgurozturknet/adanzyedocker       v1                  a5a841543d41        14 months ago       283MB
ozgurozturknet/app1                latest              353d147de1ee        15 months ago       126MB
gcr.io/google-containers/busybox   latest              e7d168d7db45        5 years ago         2.43MB

> docker image rm ebubekirnet/merhaba
Error response from daemon: conflict: unable to remove repository reference "ebubekirnet/merhaba" (must force) - container d5410c06ad68 is using its referenced image e9dc642dd346

> docker image rm e9dc
Error response from daemon: conflict: unable to delete e9dc642dd346 (must be forced) - image is being used by stopped container d5410c06ad68

> docker image rm -f  e9dc
Untagged: ebubekirnet/merhaba:latest
Deleted: sha256:e9dc642dd346e08ec0aa9daa738485a9f16ee91d12c811cbb998cf5a7206788a
Deleted: sha256:e385e04ab5ec2a004121ccb226f83425678dbeb14511d6e1583c79e5ed870d6b
Deleted: sha256:baa3afeb42448826001cab4da1fbb240d7b916147cfaaed023289828c8d7c7e9
Deleted: sha256:c2360b9f7ad0a06345c83a6989255bcf58fb69b3f2c9977e76a0e46484a2f281
Deleted: sha256:17bb265f635d1d52c4f5dc76da5ed0704dac9d334b2c3c07bd22a21c37a25a00

> docker image ls
REPOSITORY                         TAG                 IMAGE ID            CREATED             SIZE
mysql                              5                   f07dfa83b528        4 days ago          448MB
mysql                              5.7                 f07dfa83b528        4 days ago          448MB
mysql                              8                   a347a5928046        4 days ago          545MB
mysql                              latest              a347a5928046        4 days ago          545MB
httpd                              alpine              5d779ff71c18        9 days ago          55.5MB
alpine                             latest              389fef711851        9 days ago          5.58MB
nginx                              latest              ae2feff98a0c        10 days ago         133MB
centos                             latest              300e315adb2f        2 weeks ago         209MB
ubuntu                             20.04               f643c72bc252        4 weeks ago         72.9MB
ubuntu                             latest              f643c72bc252        4 weeks ago         72.9MB
ubuntu                             18.04               2c047404e52d        4 weeks ago         63.3MB
ozgurozturknet/hello-app           latest              7feb3d617d2d        8 months ago        5.6MB
ozgurozturknet/webdb               latest              3e6048caa2a4        11 months ago       437MB
ozgurozturknet/webkayit            latest              3b8929349c0b        11 months ago       483MB
ozgurozturknet/env1                latest              8c4c4f717b65        11 months ago       126MB
ozgurozturknet/adanzyedocker       latest              2b4647565690        14 months ago       284MB
ozgurozturknet/adanzyedocker       v2                  b97509fa9f19        14 months ago       283MB
ozgurozturknet/adanzyedocker       v1                  a5a841543d41        14 months ago       283MB
ozgurozturknet/app1                latest              353d147de1ee        15 months ago       126MB
gcr.io/google-containers/busybox   latest              e7d168d7db45        5 years ago         2.43MB

> docker container run gunerhanale/hello
Unable to find image 'gunerhanale/hello:latest' locally
latest: Pulling from gunerhanale/hello
f22ccc0b8772: Already exists
3cf8fb62ba5f: Already exists
e80c964ece6a: Already exists
8a72761f5381: Already exists
7f008cb103da: Already exists
28dfc487c900: Already exists
8ea572452c53: Already exists
Digest: sha256:e64804023a52f4447430d950ccb71812496ff78b8af35276be498c842644a40b
Status: Downloaded newer image for gunerhanale/hello:latest
Merhaba arkadaslar. Ben merhaba isimli Java konsol uygulamas?y?m

> docker image ls
REPOSITORY                         TAG                 IMAGE ID            CREATED             SIZE
gunerhanale/hello                  latest              e9dc642dd346        29 minutes ago      477MB
mysql                              5                   f07dfa83b528        4 days ago          448MB
mysql                              5.7                 f07dfa83b528        4 days ago          448MB
mysql                              8                   a347a5928046        4 days ago          545MB
mysql                              latest              a347a5928046        4 days ago          545MB
httpd                              alpine              5d779ff71c18        9 days ago          55.5MB
alpine                             latest              389fef711851        9 days ago          5.58MB
nginx                              latest              ae2feff98a0c        10 days ago         133MB
centos                             latest              300e315adb2f        2 weeks ago         209MB
ubuntu                             20.04               f643c72bc252        4 weeks ago         72.9MB
ubuntu                             latest              f643c72bc252        4 weeks ago         72.9MB
ubuntu                             18.04               2c047404e52d        4 weeks ago         63.3MB
ozgurozturknet/hello-app           latest              7feb3d617d2d        8 months ago        5.6MB
ozgurozturknet/webdb               latest              3e6048caa2a4        11 months ago       437MB
ozgurozturknet/webkayit            latest              3b8929349c0b        11 months ago       483MB
ozgurozturknet/env1                latest              8c4c4f717b65        11 months ago       126MB
ozgurozturknet/adanzyedocker       latest              2b4647565690        14 months ago       284MB
ozgurozturknet/adanzyedocker       v2                  b97509fa9f19        14 months ago       283MB
ozgurozturknet/adanzyedocker       v1                  a5a841543d41        14 months ago       283MB
ozgurozturknet/app1                latest              353d147de1ee        15 months ago       126MB
gcr.io/google-containers/busybox   latest              e7d168d7db45        5 years ago         2.43MB


PS C:\AdanZyeDocker\kisim5\bolum50> code .
PS C:\AdanZyeDocker\kisim5\bolum50> cd .\py\
PS C:\AdanZyeDocker\kisim5\bolum50\py> ls


    Directory: C:\AdanZyeDocker\kisim5\bolum50\py


Mode                LastWriteTime         Length Name
----                -------------         ------ ----
-a----       21.12.2020     16:48            118 Dockerfile
-a----       21.12.2020     16:48            134 Dockerfile.ozgurozturknet_merhaba
-a----       21.12.2020     16:48            238 index.py
-a----       21.12.2020     16:48              5 requirements.txt


PS C:\AdanZyeDocker\kisim5\bolum50\py> docker image build -t gunerhanale/py .
Sending build context to Docker daemon   5.12kB
Step 1/6 : FROM python:alpine
alpine: Pulling from library/python
801bfaa63ef2: Already exists
8723b2b92bec: Pull complete
4e07029ccd64: Pull complete
594990504179: Pull complete
140d7fec7322: Pull complete
Digest: sha256:7492c1f615e3651629bd6c61777e9660caa3819cf3561a47d1d526dfeee02cf6
Status: Downloaded newer image for python:alpine
 ---> d4d4f50f871a
Step 2/6 : COPY . /app
 ---> 59508dc1ff3c
Step 3/6 : WORKDIR /app
 ---> Running in c1386a5d6ca8
Removing intermediate container c1386a5d6ca8
 ---> 737fc25e2210
Step 4/6 : RUN pip install -r requirements.txt
 ---> Running in 16d9e700aef9
Collecting flask
  Downloading Flask-1.1.2-py2.py3-none-any.whl (94 kB)
Collecting click>=5.1
  Downloading click-7.1.2-py2.py3-none-any.whl (82 kB)
Collecting itsdangerous>=0.24
  Downloading itsdangerous-1.1.0-py2.py3-none-any.whl (16 kB)
Collecting Jinja2>=2.10.1
  Downloading Jinja2-2.11.2-py2.py3-none-any.whl (125 kB)
Collecting MarkupSafe>=0.23
  Downloading MarkupSafe-1.1.1.tar.gz (19 kB)
Collecting Werkzeug>=0.15
  Downloading Werkzeug-1.0.1-py2.py3-none-any.whl (298 kB)
Building wheels for collected packages: MarkupSafe
  Building wheel for MarkupSafe (setup.py): started
  Building wheel for MarkupSafe (setup.py): finished with status 'done'
  Created wheel for MarkupSafe: filename=MarkupSafe-1.1.1-py3-none-any.whl size=12629 sha256=cfd16ad4d533223bc666dacda2885910252e02c08f00f6d018c5c100d65f3376
  Stored in directory: /root/.cache/pip/wheels/e0/19/6f/6ba857621f50dc08e084312746ed3ebc14211ba30037d5e44e
Successfully built MarkupSafe
Installing collected packages: MarkupSafe, Werkzeug, Jinja2, itsdangerous, click, flask
Successfully installed Jinja2-2.11.2 MarkupSafe-1.1.1 Werkzeug-1.0.1 click-7.1.2 flask-1.1.2 itsdangerous-1.1.0
Removing intermediate container 16d9e700aef9
 ---> 7d0668fc0d7b
Step 5/6 : EXPOSE 5000
 ---> Running in 8bb427b8232a
Removing intermediate container 8bb427b8232a
 ---> 0cbeb6c3eb51
Step 6/6 : CMD python ./index.py
 ---> Running in 53653e2887aa
Removing intermediate container 53653e2887aa
 ---> eb55156a81c2
Successfully built eb55156a81c2
Successfully tagged gunerhanale/py:latest
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.

PS C:\AdanZyeDocker\kisim5\bolum50\py> docker image ls
REPOSITORY                         TAG                 IMAGE ID            CREATED             SIZE
gunerhanale/py                     latest              eb55156a81c2        57 minutes ago      55.2MB
gunerhanale/hello                  latest              e9dc642dd346        2 hours ago         477MB
mysql                              5                   f07dfa83b528        4 days ago          448MB
mysql                              5.7                 f07dfa83b528        4 days ago          448MB
mysql                              8                   a347a5928046        4 days ago          545MB
mysql                              latest              a347a5928046        4 days ago          545MB
httpd                              alpine              5d779ff71c18        9 days ago          55.5MB
python                             alpine              d4d4f50f871a        9 days ago          44.2MB
alpine                             latest              389fef711851        9 days ago          5.58MB
nginx                              latest              ae2feff98a0c        10 days ago         133MB
centos                             latest              300e315adb2f        2 weeks ago         209MB
ubuntu                             20.04               f643c72bc252        4 weeks ago         72.9MB
ubuntu                             latest              f643c72bc252        4 weeks ago         72.9MB
ubuntu                             18.04               2c047404e52d        4 weeks ago         63.3MB
ozgurozturknet/hello-app           latest              7feb3d617d2d        8 months ago        5.6MB
ozgurozturknet/webdb               latest              3e6048caa2a4        11 months ago       437MB
ozgurozturknet/webkayit            latest              3b8929349c0b        11 months ago       483MB
ozgurozturknet/env1                latest              8c4c4f717b65        11 months ago       126MB
ozgurozturknet/adanzyedocker       latest              2b4647565690        14 months ago       284MB
ozgurozturknet/adanzyedocker       v2                  b97509fa9f19        14 months ago       283MB
ozgurozturknet/adanzyedocker       v1                  a5a841543d41        14 months ago       283MB
ozgurozturknet/app1                latest              353d147de1ee        15 months ago       126MB
gcr.io/google-containers/busybox   latest              e7d168d7db45        5 years ago         2.43MB

PS C:\AdanZyeDocker\kisim5\bolum50\py> docker container run --rm -p 80:5000 gunerhanale/py
 * Serving Flask app "index" (lazy loading)
 * Environment: production
   WARNING: This is a development server. Do not use it in a production deployment.
   Use a production WSGI server instead.
 * Debug mode: on
 * Running on http://0.0.0.0:5000/ (Press CTRL+C to quit)
 * Restarting with stat
 * Debugger is active!
 * Debugger PIN: 227-939-784
192.168.99.1 - - [26/Dec/2020 14:50:39] "GET / HTTP/1.1" 200 -
192.168.99.1 - - [26/Dec/2020 14:50:39] "GET / HTTP/1.1" 200 -
192.168.99.1 - - [26/Dec/2020 14:50:40] "GET / HTTP/1.1" 200 -
PS C:\AdanZyeDocker\kisim5\bolum50\py> docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES
9f87a78dfebe        gunerhanale/py      "/bin/sh -c 'python "   57 minutes ago      Up 55 seconds       0.0.0.0:80->5000/tcp   dazzling_lewin

PS C:\AdanZyeDocker\kisim5\bolum50\py> docker stop 9f8
9f8

PS C:\AdanZyeDocker\kisim5\bolum50\py> cd ..
PS C:\AdanZyeDocker\kisim5\bolum50> cd .\nodejs\
PS C:\AdanZyeDocker\kisim5\bolum50\nodejs> ls


    Directory: C:\AdanZyeDocker\kisim5\bolum50\nodejs


Mode                LastWriteTime         Length Name
----                -------------         ------ ----
-a----       21.12.2020     16:48            406 Dockerfile
-a----       21.12.2020     16:48            276 package.json
-a----       21.12.2020     16:48            291 server.js


PS C:\AdanZyeDocker\kisim5\bolum50\nodejs> docker image build -t gunerhanale/node .
Sending build context to Docker daemon  4.096kB
Step 1/7 : FROM node:10
10: Pulling from library/node
22f9b9782fc3: Pull complete
072739d44e4f: Pull complete
5111f27e9600: Pull complete
dc22afea6082: Pull complete
0ad0b403cda0: Pull complete
bca65cadbc25: Pull complete
4c7d04f68114: Pull complete
e12fb7d7d7a0: Pull complete
7f9efcb97b17: Pull complete
Digest: sha256:57e6dc91af813f8d1c7e05d60871eca8cba67b1e120c1ae7192315114cf68de2
Status: Downloaded newer image for node:10
 ---> 4ee0f07a0e63
Step 2/7 : WORKDIR /usr/src/app
 ---> Running in cf9f59d30883
Removing intermediate container cf9f59d30883
 ---> 3552b7a57eef
Step 3/7 : COPY package*.json ./
 ---> 894035ac09c5
Step 4/7 : RUN npm install
 ---> Running in 356a9f16c3b5
npm notice created a lockfile as package-lock.json. You should commit this file.
npm WARN docker_web_app@1.0.0 No repository field.
npm WARN docker_web_app@1.0.0 No license field.

added 50 packages from 37 contributors and audited 50 packages in 4.01s
found 0 vulnerabilities

Removing intermediate container 356a9f16c3b5
 ---> 9a0a2c9022b9
Step 5/7 : COPY server.js .
 ---> 089f50ff0a5d
Step 6/7 : EXPOSE 8080
 ---> Running in 817d58e469d9
Removing intermediate container 817d58e469d9
 ---> 4e3faf8de439
Step 7/7 : CMD [ "node", "server.js" ]
 ---> Running in b3c940adf48a
Removing intermediate container b3c940adf48a
 ---> f9f1a9fb06b7
Successfully built f9f1a9fb06b7
Successfully tagged gunerhanale/node:latest
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.

PS C:\AdanZyeDocker\kisim5\bolum50\nodejs> docker image build -t gunerhanale/node .
Sending build context to Docker daemon  4.096kB
Step 1/7 : FROM node:10
 ---> 4ee0f07a0e63
Step 2/7 : WORKDIR /usr/src/app
 ---> Using cache
 ---> 3552b7a57eef
Step 3/7 : COPY package*.json ./
 ---> Using cache
 ---> 894035ac09c5
Step 4/7 : RUN npm install
 ---> Using cache
 ---> 9a0a2c9022b9
Step 5/7 : COPY server.js .
 ---> Using cache
 ---> 089f50ff0a5d
Step 6/7 : EXPOSE 8080
 ---> Using cache
 ---> 4e3faf8de439
Step 7/7 : CMD [ "node", "server.js" ]
 ---> Using cache
 ---> f9f1a9fb06b7
Successfully built f9f1a9fb06b7
Successfully tagged gunerhanale/node:latest
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.

PS C:\AdanZyeDocker\kisim5\bolum50\nodejs> docker image ls
REPOSITORY                         TAG                 IMAGE ID            CREATED             SIZE
gunerhanale/node                   latest              f9f1a9fb06b7        20 seconds ago      914MB
gunerhanale/py                     latest              eb55156a81c2        About an hour ago   55.2MB
gunerhanale/hello                  latest              e9dc642dd346        2 hours ago         477MB
mysql                              5                   f07dfa83b528        4 days ago          448MB
mysql                              5.7                 f07dfa83b528        4 days ago          448MB
mysql                              8                   a347a5928046        4 days ago          545MB
mysql                              latest              a347a5928046        4 days ago          545MB
node                               10                  4ee0f07a0e63        8 days ago          911MB
httpd                              alpine              5d779ff71c18        9 days ago          55.5MB
python                             alpine              d4d4f50f871a        9 days ago          44.2MB
alpine                             latest              389fef711851        9 days ago          5.58MB
nginx                              latest              ae2feff98a0c        10 days ago         133MB
centos                             latest              300e315adb2f        2 weeks ago         209MB
ubuntu                             20.04               f643c72bc252        4 weeks ago         72.9MB
ubuntu                             latest              f643c72bc252        4 weeks ago         72.9MB
ubuntu                             18.04               2c047404e52d        4 weeks ago         63.3MB
ozgurozturknet/hello-app           latest              7feb3d617d2d        8 months ago        5.6MB
ozgurozturknet/webdb               latest              3e6048caa2a4        11 months ago       437MB
ozgurozturknet/webkayit            latest              3b8929349c0b        11 months ago       483MB
ozgurozturknet/env1                latest              8c4c4f717b65        11 months ago       126MB
ozgurozturknet/adanzyedocker       latest              2b4647565690        14 months ago       284MB
ozgurozturknet/adanzyedocker       v2                  b97509fa9f19        14 months ago       283MB
ozgurozturknet/adanzyedocker       v1                  a5a841543d41        14 months ago       283MB
ozgurozturknet/app1                latest              353d147de1ee        15 months ago       126MB
gcr.io/google-containers/busybox   latest              e7d168d7db45        5 years ago         2.43MB

PS C:\AdanZyeDocker\kisim5\bolum50\nodejs> docker image build -t gunerhanale/node .
Sending build context to Docker daemon  4.096kB
Step 1/7 : FROM node:10
 ---> 4ee0f07a0e63
Step 2/7 : WORKDIR /usr/src/app
 ---> Using cache
 ---> 3552b7a57eef
Step 3/7 : COPY package*.json ./
 ---> Using cache
 ---> 894035ac09c5
Step 4/7 : RUN npm install
 ---> Using cache
 ---> 9a0a2c9022b9
Step 5/7 : COPY server.js .
 ---> 6f34e36b9804
Step 6/7 : EXPOSE 8080
 ---> Running in 81ce603a91dd
Removing intermediate container 81ce603a91dd
 ---> e6b684ea69f3
Step 7/7 : CMD [ "node", "server.js" ]
 ---> Running in c44551aa6333
Removing intermediate container c44551aa6333
 ---> 369b881d949d
Successfully built 369b881d949d
Successfully tagged gunerhanale/node:latest
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.
PS C:\AdanZyeDocker\kisim5\bolum50\nodejs>

PS C:\AdanZyeDocker\kisim5\bolum50\nodejs2> docker image build -t node2 .
Sending build context to Docker daemon  4.096kB
Step 1/7 : FROM node:10
 ---> 4ee0f07a0e63
Step 2/7 : WORKDIR /usr/src/app
 ---> Using cache
 ---> 3552b7a57eef
Step 3/7 : COPY package.json .
 ---> f28ceb6ab91b
Step 4/7 : COPY server.js .
 ---> 92c64f053e0c
Step 5/7 : RUN npm install
 ---> Running in bfdc098826a0
npm notice created a lockfile as package-lock.json. You should commit this file.
npm WARN docker_web_app@1.0.0 No repository field.
npm WARN docker_web_app@1.0.0 No license field.

added 50 packages from 37 contributors and audited 50 packages in 5.313s
found 0 vulnerabilities

Removing intermediate container bfdc098826a0
 ---> 6ad7b17829c8
Step 6/7 : EXPOSE 8080
 ---> Running in d15594b8a52d
Removing intermediate container d15594b8a52d
 ---> f1c0fa75944b
Step 7/7 : CMD [ "node", "server.js" ]
 ---> Running in 31b1b540fea9
Removing intermediate container 31b1b540fea9
 ---> 015d8a720466
Successfully built 015d8a720466
Successfully tagged node2:latest
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.

PS C:\AdanZyeDocker\kisim5\bolum50\nodejs2> docker container run -d -p 80:8080 node2
24100443bccad022351ed1397937472358bf6688c2b50a88c42aa2bc617ace64

PS C:\AdanZyeDocker\kisim5\bolum50\nodejs2> docker image build -t node2 .
Sending build context to Docker daemon  4.096kB
Step 1/7 : FROM node:10
 ---> 4ee0f07a0e63
Step 2/7 : WORKDIR /usr/src/app
 ---> Using cache
 ---> 3552b7a57eef
Step 3/7 : COPY package.json .
 ---> Using cache
 ---> f28ceb6ab91b
Step 4/7 : COPY server.js .
 ---> 475b892b7007
Step 5/7 : RUN npm install
 ---> Running in 82e83080ca9e
npm notice created a lockfile as package-lock.json. You should commit this file.
npm WARN docker_web_app@1.0.0 No repository field.
npm WARN docker_web_app@1.0.0 No license field.

added 50 packages from 37 contributors and audited 50 packages in 4.353s
found 0 vulnerabilities

Removing intermediate container 82e83080ca9e
 ---> c9428a31a855
Step 6/7 : EXPOSE 8080
 ---> Running in 0182c52e23f1
Removing intermediate container 0182c52e23f1
 ---> 4b3a99580038
Step 7/7 : CMD [ "node", "server.js" ]
 ---> Running in c5bfe71b8ec5
Removing intermediate container c5bfe71b8ec5
 ---> 324d3f0ec7c2
Successfully built 324d3f0ec7c2
Successfully tagged node2:latest
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.

PS C:\AdanZyeDocker\kisim5\bolum50\nodejs2> docker image build -t node2 .
Sending build context to Docker daemon  4.096kB
Step 1/7 : FROM node:10
 ---> 4ee0f07a0e63
Step 2/7 : WORKDIR /usr/src/app
 ---> Using cache
 ---> 3552b7a57eef
Step 3/7 : COPY package.json .
 ---> Using cache
 ---> f28ceb6ab91b
Step 4/7 : RUN npm install
 ---> Running in f445c9423aca
npm notice created a lockfile as package-lock.json. You should commit this file.
npm WARN docker_web_app@1.0.0 No repository field.
npm WARN docker_web_app@1.0.0 No license field.

added 50 packages from 37 contributors and audited 50 packages in 4.143s
found 0 vulnerabilities

Removing intermediate container f445c9423aca
 ---> 3e578feb60af
Step 5/7 : COPY server.js .
 ---> aab5adf53d5b
Step 6/7 : EXPOSE 8080
 ---> Running in 15ea455029bb
Removing intermediate container 15ea455029bb
 ---> c9d70e2c3b04
Step 7/7 : CMD [ "node", "server.js" ]
 ---> Running in ce19e8a246da
Removing intermediate container ce19e8a246da
 ---> a3ea4e4d797b
Successfully built a3ea4e4d797b
Successfully tagged node2:latest
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.

//Commands line is changed.
PS C:\AdanZyeDocker\kisim5\bolum50\nodejs2> docker image build -t node2 .
Sending build context to Docker daemon  4.096kB
Step 1/7 : FROM node:10
 ---> 4ee0f07a0e63
Step 2/7 : WORKDIR /usr/src/app
 ---> Using cache
 ---> 3552b7a57eef
Step 3/7 : COPY package.json .
 ---> Using cache
 ---> f28ceb6ab91b
Step 4/7 : RUN npm install
 ---> Using cache
 ---> 3e578feb60af
Step 5/7 : COPY server.js .
 ---> 4e035ee88dfc
Step 6/7 : EXPOSE 8080
 ---> Running in e0b9a165975f
Removing intermediate container e0b9a165975f
 ---> c1cd55b3171e
Step 7/7 : CMD [ "node", "server.js" ]
 ---> Running in cfd5e08d2cfa
Removing intermediate container cfd5e08d2cfa
 ---> ddd29ef51525
Successfully built ddd29ef51525
Successfully tagged node2:latest
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.

PS C:\AdanZyeDocker\kisim5\bolum50\nodejs2> docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES
24100443bcca        015d8a720466        "docker-entrypoint.s"   7 minutes ago       Up 7 minutes        0.0.0.0:80->8080/tcp   affectionate_chebyshev

PS C:\AdanZyeDocker\kisim5\bolum50\nodejs2> docker rm -f 241
241

PS C:\AdanZyeDocker\kisim5\bolum50\nodejs2> docker container run -d -p 80:8080 node2
60af3053a10d34f57a124be897bafb8fb17e058df4464555cadfdbdbac664ad2

PS C:\AdanZyeDocker\kisim5\bolum50\nodejs2> docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                  NAMES
60af3053a10d        node2               "docker-entrypoint.s"   5 seconds ago       Up 6 seconds        0.0.0.0:80->8080/tcp   agitated_pike

Date of Notes : 27-12-2020 

**Schell notes**

1. '>' : add some notes
root@5b63847f6133:/# echo $SHELL
/bin/bash
root@5b63847f6133:/# echo $SHELL > test.txt
root@5b63847f6133:/# cat test.txt
/bin/bash
root@5b63847f6133:/#

2. '&' Ampersand : work as a background
root@5b63847f6133:/# ./test.sh &

3. 'jobs' : listed which jobs have been working at the background
root@5b63847f6133:/# jobs
[1]+ Running                ./test.sh & 

4. 'grep' : to find sth in text
root@5b63847f6133:/# cat abc.txt
123456
root@5b63847f6133:/# grep 3 abc.txt
123456

5. '|' pipe : the left side will be an input of the right side
root@5b63847f6133:/# cat abc.txt | grep 3
123456

6. ';' semicolon : run more than one command in the same line (command1;command2;command3)
root@5b63847f6133:/# ls
abc.txt  boot  etc   lib    lib64   media  opt   root  sbin  sys      test.txt  usr
bin      dev   home  lib32  libx32  mnt    proc  run   srv   test.sh  tmp       var
root@5b63847f6133:/# date
Sun Dec 27 20:38:28 UTC 2020
root@5b63847f6133:/# ls;date
abc.txt  boot  etc   lib    lib64   media  opt   root  sbin  sys      test.txt  usr
bin      dev   home  lib32  libx32  mnt    proc  run   srv   test.sh  tmp       var
Sun Dec 27 20:38:33 UTC 2020

7. '&&' double ampersand : If the left side of double ampersand works, the right side of double ampersand will be working!
root@5b63847f6133:/# cat abc.txt
123456
root@5b63847f6133:/# cat def.txt
cat: def.txt: No such file or directory
root@5b63847f6133:/# cat abc.txt && echo "the file was found"
123456
the file was found
root@5b63847f6133:/# cat def.txt && echo "the file was found"
cat: def.txt: No such file or directory

8. '||' double pipe : If the left side of double pipe works, the right side of double pipe will not be working! (Opposite of &&)
root@5b63847f6133:/# cat abc.txt || echo "test"
123456
root@5b63847f6133:/# cat def.txt || echo "test"
cat: def.txt: No such file or directory
test


**How to use CMD and HEALTHCHECK commands in the docker file**
PS C:\AdanZyeDocker\kisim5\bolum52\hello-docker> docker image build -t gunerhanale/hello-docker .
Sending build context to Docker daemon  14.34kB
Step 1/12 : FROM nginx:latest
 ---> ae2feff98a0c
Step 2/12 : LABEL maintainer="Ozgur Ozturk @ozgurozturknet"
 ---> Running in 12dc1f6a535b
Removing intermediate container 12dc1f6a535b
 ---> 627be6fa1661
Step 3/12 : LABEL version="1.0"
 ---> Running in bef8c6563f38
Removing intermediate container bef8c6563f38
 ---> be16768d262d
Step 4/12 : LABEL name="hello-docker"
 ---> Running in 4970388d22d8
Removing intermediate container 4970388d22d8
 ---> 99ad6a649592
Step 5/12 : ENV KULLANICI="Dunyali"
 ---> Running in 4f022d8dd68a
Removing intermediate container 4f022d8dd68a
 ---> 346999083b00
Step 6/12 : RUN printf "deb http://archive.debian.org/debian/ jessie main\ndeb-src http://archive.debian.org/debian/ jessie main\ndeb http://security.debian.org jessie/updates main\ndeb-src http://security.debian.org jessie/updates main" > /etc/apt/sources.list
 ---> Running in 14cec9fd1a7c
Removing intermediate container 14cec9fd1a7c
 ---> 6f9ce8c69470
Step 7/12 : RUN apt-get update
 ---> Running in 35cec7cc3d6b
Ign:1 http://archive.debian.org/debian jessie InRelease
Get:2 http://archive.debian.org/debian jessie Release [148 kB]
Get:3 http://security.debian.org jessie/updates InRelease [44.9 kB]
Get:4 http://archive.debian.org/debian jessie Release.gpg [2420 B]
Get:5 http://archive.debian.org/debian jessie/main Sources [7063 kB]
Get:6 http://security.debian.org jessie/updates/main Sources [366 kB]
Get:7 http://security.debian.org jessie/updates/main amd64 Packages [781 kB]
Get:8 http://archive.debian.org/debian jessie/main amd64 Packages [6818 kB]
Fetched 15.2 MB in 55s (275 kB/s)
Reading package lists...
Removing intermediate container 35cec7cc3d6b
 ---> bec371f2b15a
Step 8/12 : RUN apt-get install curl -y
 ---> Running in 83f1e3610f25
Reading package lists...
Building dependency tree...
Reading state information...
curl is already the newest version (7.64.0-4+deb10u1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
Removing intermediate container 83f1e3610f25
 ---> aebc88ee3ccc
Step 9/12 : WORKDIR /usr/share/nginx/html
 ---> Running in 7e267852471a
Removing intermediate container 7e267852471a
 ---> b7edcdc865d9
Step 10/12 : COPY Hello_docker.html /usr/share/nginx/html
 ---> 3e15c77f27b0
Step 11/12 : HEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 CMD curl -f http://localhost/ || exit 1
 ---> Running in 4c5ce4a36502
Removing intermediate container 4c5ce4a36502
 ---> c91824e85846
Step 12/12 : CMD sed -e s/Kullanici/"$KULLANICI"/ Hello_docker.html > index1.html && sed -e s/Hostname/"$HOSTNAME"/ index1.html > index.html ; rm index1.html Hello_docker.html; nginx -g 'daemon off;'
 ---> Running in 6980a6347dc6
Removing intermediate container 6980a6347dc6
 ---> 1e868e9a350e
Successfully built 1e868e9a350e
Successfully tagged gunerhanale/hello-docker:latest
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.


PS C:\AdanZyeDocker\kisim5\bolum52\hello-docker> docker container run -d --name hellodocker -p 80:80 gunerhanale/hello-docker
bf94821cc66b79fe3f2897e4410a63665b429de74264bcfffe8461e6a747f394

PS C:\AdanZyeDocker\kisim5\bolum52\hello-docker> docker ps
CONTAINER ID        IMAGE                      COMMAND                  CREATED              STATUS                        PORTS                NAMES
bf94821cc66b        gunerhanale/hello-docker   "/docker-entrypoint."   About a minute ago   Up About a minute (healthy)   0.0.0.0:80->80/tcp   hellodocker

PS C:\AdanZyeDocker\kisim5\bolum52\hello-docker> docker container run -d --name hellodocker2 -p 8090:80 gunerhanale/hello-docker
21ed49d42d397eb740d01532dcdb1615798837ff15e317ee5705154945be9d07

PS C:\AdanZyeDocker\kisim5\bolum52\hello-docker> docker ps
CONTAINER ID        IMAGE                      COMMAND                  CREATED             STATUS                            PORTS                  NAMES
21ed49d42d39        gunerhanale/hello-docker   "/docker-entrypoint."   1 second ago        Up 2 seconds (health: starting)   0.0.0.0:8090->80/tcp   hellodocker2
bf94821cc66b        gunerhanale/hello-docker   "/docker-entrypoint."   5 minutes ago       Up 5 minutes (healthy)            0.0.0.0:80->80/tcp     hellodocker

PS C:\AdanZyeDocker\kisim5\bolum52\hello-docker> docker ps
CONTAINER ID        IMAGE                      COMMAND                  CREATED             STATUS                   PORTS                  NAMES
21ed49d42d39        gunerhanale/hello-docker   "/docker-entrypoint."   2 minutes ago       Up 2 minutes (healthy)   0.0.0.0:8090->80/tcp   hellodocker2
bf94821cc66b        gunerhanale/hello-docker   "/docker-entrypoint."   7 minutes ago       Up 7 minutes (healthy)   0.0.0.0:80->80/tcp     hellodocker

**reduced steps as 8 step
PS C:\AdanZyeDocker\kisim5\bolum52\hello-docker> docker image build -t gunerhanale/hello-docker .
Sending build context to Docker daemon  17.92kB
Step 1/8 : FROM nginx:latest
 ---> ae2feff98a0c
Step 2/8 : LABEL maintainer="Ebubekir Gunerhanal @gunerhanale" version="1.0" name="hello-docker"
 ---> Running in 7093e11602b9
Removing intermediate container 7093e11602b9
 ---> 79dacdc0bc31
Step 3/8 : ENV KULLANICI="Dunyali"
 ---> Running in 53c822384a38
Removing intermediate container 53c822384a38
 ---> 98566e2bfa0c
Step 4/8 : RUN printf "deb http://archive.debian.org/debian/ jessie main\ndeb-src http://archive.debian.org/debian/ jessie main\ndeb http://security.debian.org jessie/updates main\ndeb-src http://security.debian.org jessie/updates main" > /etc/apt/sources.list && apt-get update && apt-get install curl -y
 ---> Running in 2c0ba5eb1d93
Ign:1 http://archive.debian.org/debian jessie InRelease
Get:2 http://security.debian.org jessie/updates InRelease [44.9 kB]
Get:3 http://archive.debian.org/debian jessie Release [148 kB]
Get:4 http://security.debian.org jessie/updates/main Sources [366 kB]
Get:5 http://archive.debian.org/debian jessie Release.gpg [2420 B]
Get:6 http://security.debian.org jessie/updates/main amd64 Packages [781 kB]
Get:7 http://archive.debian.org/debian jessie/main Sources [7063 kB]
Get:8 http://archive.debian.org/debian jessie/main amd64 Packages [6818 kB]
Fetched 15.2 MB in 19s (811 kB/s)
Reading package lists...
Reading package lists...
Building dependency tree...
Reading state information...
curl is already the newest version (7.64.0-4+deb10u1).
0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.
Removing intermediate container 2c0ba5eb1d93
 ---> 2bc19af4ebe6
Step 5/8 : WORKDIR /usr/share/nginx/html
 ---> Running in 5a184362a191
Removing intermediate container 5a184362a191
 ---> ee892d03b4d9
Step 6/8 : COPY Hello_docker.html /usr/share/nginx/html
 ---> 1ccc85615212
Step 7/8 : HEALTHCHECK --interval=30s --timeout=10s --start-period=5s --retries=3 CMD curl -f http://localhost/ || exit 1
 ---> Running in e871f8fc18f5
Removing intermediate container e871f8fc18f5
 ---> 29677c1cbdf8
Step 8/8 : CMD sed -e s/Kullanici/"$KULLANICI"/ Hello_docker.html > index1.html && sed -e s/Hostname/"$HOSTNAME"/ index1.html > index.html ; rm index1.html Hello_docker.html; nginx -g 'daemon off;'
 ---> Running in 8273cb598090
Removing intermediate container 8273cb598090
 ---> 0303df2d19f7
Successfully built 0303df2d19f7
Successfully tagged gunerhanale/hello-docker:latest
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.

**we can set env with two different way(-e or --env)**
PS C:\AdanZyeDocker\kisim5\bolum52\hello-docker> docker container run -d -p 8095:80 --name hd2 -e KULLANICI="Ebubekir" gunerhanale/hello-docker
8bdf55a0d6cb3d7977632d0533296aef85187cd6328250c0eb5ad47b418ac59b
PS C:\AdanZyeDocker\kisim5\bolum52\hello-docker> docker exec -it hd2 sh
# echo $HOSTNAME
8bdf55a0d6cb
# echo $KULLANICI
Ebubekir

PS C:\AdanZyeDocker\kisim5\bolum52\hello-docker> docker ps
CONTAINER ID        IMAGE                      COMMAND                  CREATED             STATUS                       PORTS                  NAMES
8bdf55a0d6cb        gunerhanale/hello-docker   "/docker-entrypoint."   24 minutes ago      Up 24 minutes (healthy)      0.0.0.0:8095->80/tcp   hd2
21ed49d42d39        1e868e9a350e               "/docker-entrypoint."   56 minutes ago      Up 56 minutes (healthy)      0.0.0.0:8090->80/tcp   hellodocker2
bf94821cc66b        1e868e9a350e               "/docker-entrypoint."   About an hour ago   Up About an hour (healthy)   0.0.0.0:80->80/tcp     hellodocker
PS C:\AdanZyeDocker\kisim5\bolum52\hello-docker>

**I uploaded gunerhanale/hello-docker image to dockerhub**
PS C:\AdanZyeDocker\kisim5\bolum52\hello-docker> docker image push gunerhanale/hello-docker
The push refers to repository [docker.io/gunerhanale/hello-docker]
c24c9007075a: Pushed
ce406df1a7bb: Pushed
4eaf0ea085df: Mounted from library/nginx
2c7498eef94a: Mounted from library/nginx
7d2b207c2679: Mounted from library/nginx
5c4e5adc71a8: Mounted from library/nginx
87c8a1d8f54f: Mounted from library/mysql
latest: digest: sha256:b5873bc16973c8047791f999c331c8254839d3c2bd0a07c4474ae52cd0f9be61 size: 1782

------------------------------------------------------------------------------------
Date of Notes : 28-12-2020

**What is the different between ADD and COPY**

PS C:\Users\ebubekir> cd C:\AdanZyeDocker\kisim5\bolum54

PS C:\AdanZyeDocker\kisim5\bolum54> ls


    Directory: C:\AdanZyeDocker\kisim5\bolum54


Mode                LastWriteTime         Length Name
----                -------------         ------ ----
-a----       21.12.2020     16:48            125 Dockerfile
-a----       21.12.2020     16:48       12389281 wordpress.tar.gz


PS C:\AdanZyeDocker\kisim5\bolum54> code .

PS C:\AdanZyeDocker\kisim5\bolum54> docker image build -t addcopy .
Sending build context to Docker daemon  12.39MB
Step 1/5 : FROM alpine:latest
 ---> 389fef711851
Step 2/5 : WORKDIR /app1
 ---> Running in 9d12877ec601
Removing intermediate container 9d12877ec601
 ---> 149635389eed
Step 3/5 : COPY wordpress.tar.gz .
 ---> 39135a1aae34
Step 4/5 : ADD wordpress.tar.gz .
 ---> 4922cd9028f0
Step 5/5 : ADD https://wordpress.org/latest.tar.gz .
Downloading [==================================================>]  15.42MB/15.42MB

 ---> 7b406f85e0e2
Successfully built 7b406f85e0e2
Successfully tagged addcopy:latest
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.

PS C:\AdanZyeDocker\kisim5\bolum54> docker run -it addcopy sh
/app1 # ls
latest.tar.gz     wordpress         wordpress.tar.gz
/app1 # ls -l
total 27168
-rw-------    1 root     root      15422346 Dec  8 22:14 latest.tar.gz
drwxr-xr-x    5 nobody   nobody        4096 Dec 18  2019 wordpress
-rwxr-xr-x    1 root     root      12389281 Dec 21 15:48 wordpress.tar.gz
/app1 # cd wordpress/
/app1/wordpress # ls
index.php             wp-activate.php       wp-comments-post.php  wp-cron.php           wp-load.php           wp-settings.php       xmlrpc.php
license.txt           wp-admin              wp-config-sample.php  wp-includes           wp-login.php          wp-signup.php
readme.html           wp-blog-header.php    wp-content            wp-links-opml.php     wp-mail.php           wp-trackback.php


**What is the different between ENTRYPOINT and CMD**
When we create a container, normally CMD command line of the Dockerfile will work. But We can change it when we create a container with giving a new CMD.
However We can not do that with ENTRYPOINT,  ENTRYPOINT command line will certanly work. We can not give new CMD command while creating new container. 

PS C:\AdanZyeDocker\kisim5\bolum55> ls


    Directory: C:\AdanZyeDocker\kisim5\bolum55


Mode                LastWriteTime         Length Name
----                -------------         ------ ----
d-----       22.12.2020     18:07                myapp
-a----       21.12.2020     16:48            105 Dockerfile
-a----       21.12.2020     16:48             52 Dockerfile.Centos


PS C:\AdanZyeDocker\kisim5\bolum55> code .

PS C:\AdanZyeDocker\kisim5\bolum55> docker image build -t javaimage .
Sending build context to Docker daemon  5.632kB
Step 1/4 : FROM mcr.microsoft.com/java/jre:8-zulu-alpine
8-zulu-alpine: Pulling from java/jre
801bfaa63ef2: Already exists
5a35a9018f71: Pull complete
Digest: sha256:a4e3d9f5fb50e9460ebafe8bbbbb1a7b7710737d4b653f8a4f51a6eddb9b46e1
Status: Downloaded newer image for mcr.microsoft.com/java/jre:8-zulu-alpine
 ---> 282970e7f217
Step 2/4 : WORKDIR /merhaba
 ---> Running in 0c97d5333cfa
Removing intermediate container 0c97d5333cfa
 ---> 49005f4a02b0
Step 3/4 : COPY /myapp .
 ---> 35b449b0ff65
Step 4/4 : CMD [ "java", "merhaba" ]
 ---> Running in 71b627452a78
Removing intermediate container 71b627452a78
 ---> 64cac2a59de7
Successfully built 64cac2a59de7
Successfully tagged javaimage:latest
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.

PS C:\AdanZyeDocker\kisim5\bolum55> docker run javaimage
Merhaba arkadaslar. Ben merhaba isimli Java konsol uygulamasym

**We did changed command that we want to run**
PS C:\AdanZyeDocker\kisim5\bolum55> docker run javaimage ls
merhaba.class
merhaba.java

PS C:\AdanZyeDocker\kisim5\bolum55> docker image build -t javaimage .
Sending build context to Docker daemon  5.632kB
Step 1/4 : FROM mcr.microsoft.com/java/jre:8-zulu-alpine
 ---> 282970e7f217
Step 2/4 : WORKDIR /merhaba
 ---> Using cache
 ---> 49005f4a02b0
Step 3/4 : COPY /myapp .
 ---> Using cache
 ---> 35b449b0ff65
Step 4/4 : ENTRYPOINT [ "java", "merhaba" ]
 ---> Running in 3d4d55c7d6c7
Removing intermediate container 3d4d55c7d6c7
 ---> 0bab9bd5727a
Successfully built 0bab9bd5727a
Successfully tagged javaimage:latest
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.

**We didn't change command that we want to run**  
PS C:\AdanZyeDocker\kisim5\bolum55> docker run javaimage ls
Merhaba arkadaslar. Ben merhaba isimli Java konsol uygulamasym


**If we have two commands at the same time in Dockerfile, the CMD command line will be the input parameter of the ENTRYPOINT.**

PS C:\AdanZyeDocker\kisim5\bolum55> docker image build -t pingimage -f .\Dockerfile.Centos .
Sending build context to Docker daemon  5.632kB
Step 1/2 : FROM centos:latest
 ---> 300e315adb2f
Step 2/2 : ENTRYPOINT ["ping", "127.0.0.1"]
 ---> Using cache
 ---> 9d9915b3f5b2
Successfully built 9d9915b3f5b2
Successfully tagged pingimage:latest
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.

PS C:\AdanZyeDocker\kisim5\bolum55> docker container run pingimage
PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.
64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.036 ms
64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.171 ms
64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.058 ms
64 bytes from 127.0.0.1: icmp_seq=4 ttl=64 time=0.079 ms
64 bytes from 127.0.0.1: icmp_seq=5 ttl=64 time=0.082 ms

PS C:\AdanZyeDocker\kisim5\bolum55> docker image build -t pingimage -f .\Dockerfile.Centos .
Sending build context to Docker daemon  5.632kB
Step 1/3 : FROM centos:latest
 ---> 300e315adb2f
Step 2/3 : ENTRYPOINT ["ping"]
 ---> Running in b8b10f4be27c
Removing intermediate container b8b10f4be27c
 ---> 985e6f09e706
Step 3/3 : CMD [ "127.0.0.1" ]
 ---> Running in 9dd95cc8d1a1
Removing intermediate container 9dd95cc8d1a1
 ---> b42312776ad9
Successfully built b42312776ad9
Successfully tagged pingimage:latest
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.

PS C:\AdanZyeDocker\kisim5\bolum55> docker container run pingimage
PING 127.0.0.1 (127.0.0.1) 56(84) bytes of data.
64 bytes from 127.0.0.1: icmp_seq=1 ttl=64 time=0.029 ms
64 bytes from 127.0.0.1: icmp_seq=2 ttl=64 time=0.078 ms
64 bytes from 127.0.0.1: icmp_seq=3 ttl=64 time=0.067 ms
64 bytes from 127.0.0.1: icmp_seq=4 ttl=64 time=0.070 ms

PS C:\AdanZyeDocker\kisim5\bolum55> docker container run pingimage 127.0.0.2
PING 127.0.0.2 (127.0.0.2) 56(84) bytes of data.
64 bytes from 127.0.0.2: icmp_seq=1 ttl=64 time=0.030 ms
64 bytes from 127.0.0.2: icmp_seq=2 ttl=64 time=0.085 ms

**What is the differences between exec and CMD format**

PS C:\AdanZyeDocker\kisim5\bolum56> docker image build -t execshell .
Sending build context to Docker daemon  2.048kB
Step 1/3 : FROM centos:latest
 ---> 300e315adb2f
Step 2/3 : ENV TEST="Bu bir denemedir"
 ---> Running in f2d7a08f7274
Removing intermediate container f2d7a08f7274
 ---> 2b9a9b8f20d0
Step 3/3 : CMD [ "echo", "$TEST" ]
 ---> Running in c4428d6a9ca7
Removing intermediate container c4428d6a9ca7
 ---> 4e11c4eaf24e
Successfully built 4e11c4eaf24e
Successfully tagged execshell:latest
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.

**When we create a container, exec format of CMD will not use ENV because it doesn't open a shell.** 
**Step 3/3 : CMD [ "echo", "$TEST" ]**
PS C:\AdanZyeDocker\kisim5\bolum56> docker run --name exec execshell
$TEST

PS C:\AdanZyeDocker\kisim5\bolum56> docker image build -t execshell .
Sending build context to Docker daemon  2.048kB
Step 1/3 : FROM centos:latest
 ---> 300e315adb2f
Step 2/3 : ENV TEST="Bu bir denemedir"
 ---> Using cache
 ---> 2b9a9b8f20d0
Step 3/3 : CMD echo $TEST
 ---> Running in 688b50fd83b8
Removing intermediate container 688b50fd83b8
 ---> efbe90be46c4
Successfully built efbe90be46c4
Successfully tagged execshell:latest
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.

**After The Dockerfile converted with using shell fomrat of CMD, it used ENV form schell**
**Step 3/3 : CMD echo $TEST**

PS C:\AdanZyeDocker\kisim5\bolum56> docker run --name shell execshell
Bu bir denemedir

**We can look at that what is the difference about COMMAND**
PS C:\AdanZyeDocker\kisim5\bolum56> docker ps -a
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                      PORTS               NAMES
fcd76d105821        execshell           "/bin/sh -c 'echo $T"    8 minutes ago       Exited (0) 9 minutes ago                        shell
8a17233c404e        4e11c4eaf24e        "echo $TEST"             13 minutes ago      Exited (0) 13 minutes ago                       exec


**How to use Multi stage Build**
**This is bad example to build image with running java app (SDK or JRE)**
PS C:\AdanZyeDocker\kisim5\bolum57> docker image build -t javasdk .
Sending build context to Docker daemon  3.584kB
Step 1/5 : FROM mcr.microsoft.com/java/jdk:8-zulu-alpine
8-zulu-alpine: Pulling from java/jdk
801bfaa63ef2: Already exists
a7d3efedfa62: Pull complete
Digest: sha256:43c9e408ba84aa4a991931d42479cb22b09c9d08e7c29d8264b64dbf44e0b357
Status: Downloaded newer image for mcr.microsoft.com/java/jdk:8-zulu-alpine
 ---> 2c27c5cd2fb4
Step 2/5 : COPY /source /usr/src/uygulama
 ---> c9624a243f11
Step 3/5 : WORKDIR /usr/src/uygulama
 ---> Running in 80eec64d1018
Removing intermediate container 80eec64d1018
 ---> 61d06e3a74cc
Step 4/5 : RUN javac uygulama.java
 ---> Running in c944d42184ed
Removing intermediate container c944d42184ed
 ---> 3bfb9564b63b
Step 5/5 : CMD ["java", "uygulama"]
 ---> Running in 2659c8c7bee1
Removing intermediate container 2659c8c7bee1
 ---> 5f7eaa774547
Successfully built 5f7eaa774547
Successfully tagged javasdk:latest
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.

PS C:\AdanZyeDocker\kisim5\bolum57> docker run javasdk
Merhaba ben bir java konsol uygulamasiyim

PS C:\AdanZyeDocker\kisim5\bolum57> docker ps -a
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                      PORTS               NAMES
aeb7d78a69be        javasdk             "java uygulama"          8 seconds ago       Exited (0) 9 seconds ago                        thirsty_montalcini

**How to copy files from container to host-machine
PS C:\AdanZyeDocker\kisim5\bolum57> docker cp thirsty_montalcini:/usr/src/uygulama .
PS C:\AdanZyeDocker\kisim5\bolum57> ls


    Directory: C:\AdanZyeDocker\kisim5\bolum57


Mode                LastWriteTime         Length Name
----                -------------         ------ ----
d-----       22.12.2020     18:07                source
d-----       28.12.2020     20:13                uygulama
-a----       21.12.2020     16:48            155 Dockerfile


PS C:\AdanZyeDocker\kisim5\bolum57> cd .\uygulama\
PS C:\AdanZyeDocker\kisim5\bolum57\uygulama> ls


    Directory: C:\AdanZyeDocker\kisim5\bolum57\uygulama


Mode                LastWriteTime         Length Name
----                -------------         ------ ----
-a----       28.12.2020     20:13            451 uygulama.class
-a----       21.12.2020     16:48            153 uygulama.java


PS C:\AdanZyeDocker\kisim5\bolum57> ls


    Directory: C:\AdanZyeDocker\kisim5\bolum57


Mode                LastWriteTime         Length Name
----                -------------         ------ ----
d-----       22.12.2020     18:07                source
d-----       28.12.2020     20:13                uygulama
-a----       21.12.2020     16:48            155 Dockerfile
-a----       28.12.2020     21:04            117 Dockerfile.jre


PS C:\AdanZyeDocker\kisim5\bolum57> docker image build -t javajre -f .\Dockerfile.jre .
Sending build context to Docker daemon  7.168kB
Step 1/4 : FROM mcr.microsoft.com/java/jre:8-zulu-alpine
 ---> 282970e7f217
Step 2/4 : COPY /uygulama /uygulama
 ---> 83df2a2119ea
Step 3/4 : WORKDIR /uygulama
 ---> Running in ef25751d1c0c
Removing intermediate container ef25751d1c0c
 ---> 178a711e418f
Step 4/4 : CMD ["java" , "uygulama"]
 ---> Running in 088f7616f737
Removing intermediate container 088f7616f737
 ---> 7ff216c2c3e6
Successfully built 7ff216c2c3e6
Successfully tagged javajre:latest
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.

PS C:\AdanZyeDocker\kisim5\bolum57> docker image ls
REPOSITORY                         TAG                 IMAGE ID            CREATED             SIZE
javajre                            latest              7ff216c2c3e6        15 seconds ago      144MB
javasdk                            latest              5f7eaa774547        54 minutes ago      245MB

**How to use Multi-stage Build to create new image with together compile step**

PS C:\AdanZyeDocker\kisim5\bolum58> cat .\Dockerfile
FROM mcr.microsoft.com/java/jdk:8-zulu-alpine AS compiler
COPY /source /usr/src/uygulama
WORKDIR /usr/src/uygulama
RUN javac uygulama.java

FROM mcr.microsoft.com/java/jre:8-zulu-alpine
WORKDIR /uygulama
COPY --from=compiler /usr/src/uygulama .
CMD [ "java", "uygulama" ]

PS C:\AdanZyeDocker\kisim5\bolum58> docker image build -t javalast .
Sending build context to Docker daemon  3.584kB
Step 1/8 : FROM mcr.microsoft.com/java/jdk:8-zulu-alpine AS compiler
 ---> 2c27c5cd2fb4
Step 2/8 : COPY /source /usr/src/uygulama
 ---> Using cache
 ---> c9624a243f11
Step 3/8 : WORKDIR /usr/src/uygulama
 ---> Using cache
 ---> 61d06e3a74cc
Step 4/8 : RUN javac uygulama.java
 ---> Using cache
 ---> 3bfb9564b63b
Step 5/8 : FROM mcr.microsoft.com/java/jre:8-zulu-alpine
 ---> 282970e7f217
Step 6/8 : WORKDIR /uygulama
 ---> Running in a7e7f002c82a
Removing intermediate container a7e7f002c82a
 ---> 210ed9d706c5
Step 7/8 : COPY --from=compiler /usr/src/uygulama .
 ---> 4271c76e2d30
Step 8/8 : CMD [ "java", "uygulama" ]
 ---> Running in 9ab4be72dff4
Removing intermediate container 9ab4be72dff4
 ---> 95b24806ef40
Successfully built 95b24806ef40
Successfully tagged javalast:latest
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.

PS C:\AdanZyeDocker\kisim5\bolum58> docker image ls
REPOSITORY                         TAG                 IMAGE ID            CREATED              SIZE
javalast                           latest              95b24806ef40        About a minute ago   144MB
javajre                            latest              7ff216c2c3e6        About an hour ago    144MB
javasdk                            latest              5f7eaa774547        2 hours ago          245MB

Extra information: We can use '--from' sth from another image 
Exp: COPY --from=nginx:latest /usr/src/uygulama .

**How to use 'Build ARG'**

PS C:\AdanZyeDocker\kisim5\bolum59> docker image build -t app:3.7.6 .
Sending build context to Docker daemon  2.048kB
Step 1/4 : FROM ubuntu:latest
 ---> f643c72bc252
Step 2/4 : WORKDIR /gecici
 ---> Running in 262511c46d36
Removing intermediate container 262511c46d36
 ---> f84ec4fad7d9
Step 3/4 : ADD https://www.python.org/ftp/python/3.7.6/Python-3.7.6.tgz .
Downloading [==================================================>]  23.15MB/23.15MB

 ---> 1141f7f67ef8
Step 4/4 : CMD ls -al
 ---> Running in 30432e419d36
Removing intermediate container 30432e419d36
 ---> a04e4828df3a
Successfully built a04e4828df3a
Successfully tagged app:3.7.6
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.

PS C:\AdanZyeDocker\kisim5\bolum59> docker image build -t app:3.8.1 .
Sending build context to Docker daemon  2.048kB
Step 1/4 : FROM ubuntu:latest
 ---> f643c72bc252
Step 2/4 : WORKDIR /gecici
 ---> Using cache
 ---> f84ec4fad7d9
Step 3/4 : ADD https://www.python.org/ftp/python/3.8.1/Python-3.8.1.tgz .
Downloading [==================================================>]  23.98MB/23.98MB

 ---> 90989d5f39d5
Step 4/4 : CMD ls -al
 ---> Running in 950dd06f92d1
Removing intermediate container 950dd06f92d1
 ---> 3db4d6254032
Successfully built 3db4d6254032
Successfully tagged app:3.8.1
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.

**We added 'VERSION' variable in Dockerdile, and then we used to set a value with using '--build-arg' parameter**
**In addition to that, we could set a default value in Dockerfile for ARG**
PS C:\AdanZyeDocker\kisim5\bolum59> docker image build -t x1 --build-arg VERSION=3.7.1 .
Sending build context to Docker daemon  2.048kB
Step 1/5 : FROM ubuntu:latest
 ---> f643c72bc252
Step 2/5 : WORKDIR /gecici
 ---> Using cache
 ---> f84ec4fad7d9
Step 3/5 : ARG VERSION
 ---> Running in 7dd6eff7edd6
Removing intermediate container 7dd6eff7edd6
 ---> 2f18cb6251ab
Step 4/5 : ADD https://www.python.org/ftp/python/${VERSION}/Python-${VERSION}.tgz .
Downloading [==================================================>]   22.8MB/22.8MB

 ---> bd0c7fbdd6fa
Step 5/5 : CMD ls -al
 ---> Running in 761c60cb9ee8
Removing intermediate container 761c60cb9ee8
 ---> f01f69a0386b
Successfully built f01f69a0386b
Successfully tagged x1:latest
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.


PS C:\AdanZyeDocker\kisim5\bolum59> docker image build -t x2 --build-arg VERSION=3.8.1 .
Sending build context to Docker daemon  2.048kB
Step 1/5 : FROM ubuntu:latest
 ---> f643c72bc252
Step 2/5 : WORKDIR /gecici
 ---> Using cache
 ---> f84ec4fad7d9
Step 3/5 : ARG VERSION
 ---> Using cache
 ---> 2f18cb6251ab
Step 4/5 : ADD https://www.python.org/ftp/python/${VERSION}/Python-${VERSION}.tgz .
Downloading [==================================================>]  23.98MB/23.98MB

 ---> 67a05601ee95
Step 5/5 : CMD ls -al
 ---> Running in 2c10d9e6eeed
Removing intermediate container 2c10d9e6eeed
 ---> 50e4138860c7
Successfully built 50e4138860c7
Successfully tagged x2:latest
SECURITY WARNING: You are building a Docker image from Windows against a non-Windows Docker host. All files and directories added to build context will have '-rwxr-xr-x' permissions. It is recommended to double check and reset permissions for sensitive files and directories.

**How to create image from a container, Not with the Dockerfile**
**Lets build image using a different way like as create after doing an update or download sth in a container**

PS C:\> docker container run -it --name con1 ubuntu:latest bash

root@764391b692ef:/# apt-get update
Get:1 http://archive.ubuntu.com/ubuntu focal InRelease [265 kB]
Get:2 http://security.ubuntu.com/ubuntu focal-security InRelease [109 kB]
Get:3 http://security.ubuntu.com/ubuntu focal-security/restricted amd64 Packages [103 kB]
Get:4 http://archive.ubuntu.com/ubuntu focal-updates InRelease [114 kB]
Get:5 http://security.ubuntu.com/ubuntu focal-security/universe amd64 Packages [645 kB]
Get:6 http://archive.ubuntu.com/ubuntu focal-backports InRelease [101 kB]
Get:7 http://archive.ubuntu.com/ubuntu focal/multiverse amd64 Packages [177 kB]
Get:8 http://archive.ubuntu.com/ubuntu focal/universe amd64 Packages [11.3 MB]
Get:9 http://security.ubuntu.com/ubuntu focal-security/main amd64 Packages [495 kB]
Get:10 http://security.ubuntu.com/ubuntu focal-security/multiverse amd64 Packages [1167 B]
Get:11 http://archive.ubuntu.com/ubuntu focal/main amd64 Packages [1275 kB]
Get:12 http://archive.ubuntu.com/ubuntu focal/restricted amd64 Packages [33.4 kB]
Get:13 http://archive.ubuntu.com/ubuntu focal-updates/universe amd64 Packages [885 kB]
Get:14 http://archive.ubuntu.com/ubuntu focal-updates/main amd64 Packages [885 kB]
Get:15 http://archive.ubuntu.com/ubuntu focal-updates/restricted amd64 Packages [136 kB]
Get:16 http://archive.ubuntu.com/ubuntu focal-updates/multiverse amd64 Packages [30.4 kB]
Get:17 http://archive.ubuntu.com/ubuntu focal-backports/universe amd64 Packages [4250 B]
Fetched 16.6 MB in 35s (475 kB/s)
Reading package lists... Done

root@764391b692ef:/# mkdir /temp

root@764391b692ef:/# cd temp/

root@764391b692ef:/temp# apt-get install wget
Reading package lists... Done
Building dependency tree
Reading state information... Done
The following additional packages will be installed:
...
0 added, 0 removed; done.
Running hooks in /etc/ca-certificates/update.d...
done.

root@764391b692ef:/temp# wget https://wordpress.org/latest.tar.gz
--2020-12-28 22:10:42--  https://wordpress.org/latest.tar.gz
Resolving wordpress.org (wordpress.org)... 198.143.164.252
Connecting to wordpress.org (wordpress.org)|198.143.164.252|:443... connected.
HTTP request sent, awaiting response... 200 OK
Length: 15422346 (15M) [application/octet-stream]
Saving to: 'latest.tar.gz'

latest.tar.gz                           100%[============================================================================>]  14.71M   720KB/s    in 22s

2020-12-28 22:11:05 (680 KB/s) - 'latest.tar.gz' saved [15422346/15422346]

root@764391b692ef:/temp# exit
exit

PS C:\> docker ps -a
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                     PORTS               NAMES
764391b692ef        ubuntu:latest       "bash"                   4 minutes ago       Exited (0) 8 seconds ago                       con1

**created a image with using 'commit' from container**
PS C:\> docker commit con1 gunerhanale/con1:latest
sha256:3ca863429e3973badb171f99b59d34eb4d9c3ccddbbda2f8716903b131d3dcec

PS C:\> docker image ls
REPOSITORY                         TAG                 IMAGE ID            CREATED             SIZE
gunerhanale/con1                   latest              3ca863429e39        6 seconds ago       122MB

PS C:\> docker run -it --name con2 gunerhanale/con1:latest bash

root@a90ed46883e9:/# ls
bin  boot  dev  etc  home  lib  lib32  lib64  libx32  media  mnt  opt  proc  root  run  sbin  srv  sys  temp  tmp  usr  var

root@a90ed46883e9:/# cd temp/

root@a90ed46883e9:/temp# ls
latest.tar.gz

root@a90ed46883e9:/temp# exit
exit

**How to add some commands while creating a image from container (with '-c' parameter)** 
PS C:\> docker commit -c 'CMD ["java","uygulama"]' con1 gunerhanale/con1:second
sha256:a7b9533cfdb3d5c47e67ad8de8725f9ddce993b9d26168eb620d2613f5a46b2a

PS C:\> docker image inspect gunerhanale/con1:second
[
    {
        "Id": "sha256:a7b9533cfdb3d5c47e67ad8de8725f9ddce993b9d26168eb620d2613f5a46b2a",
        "RepoTags": [
            "gunerhanale/con1:second"
        ],
        "RepoDigests": [],
        "Parent": "sha256:f643c72bc25212974c16f3348b3a898b1ec1eb13ec1539e10a103e6e217eb2f1",
        "Comment": "",
        "Created": "2020-12-28T22:16:40.321541613Z",
        "Container": "764391b692efe46276fe01699211fc9a160730a4b6be2802a219a0247c8f229b",
        "ContainerConfig": {
            "Hostname": "764391b692ef",
            "Domainname": "",
            "User": "",
            "AttachStdin": true,
            "AttachStdout": true,
            "AttachStderr": true,
            "Tty": true,
            "OpenStdin": true,
            "StdinOnce": true,
            "Env": [
                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            ],
            "Cmd": [
                "bash"
            ],
            "Image": "ubuntu:latest",
            "Volumes": null,
            "WorkingDir": "",
            "Entrypoint": null,
            "OnBuild": null,
            "Labels": {}
        },
        "DockerVersion": "19.03.12",
        "Author": "",
        "Config": {
            "Hostname": "764391b692ef",
            "Domainname": "",
            "User": "",
            "AttachStdin": true,
            "AttachStdout": true,
            "AttachStderr": true,
            "Tty": true,
            "OpenStdin": true,
            "StdinOnce": true,
            "Env": [
                "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"
            ],
            "Cmd": [
                "/bin/sh",
                "-c",
                "[java,uygulama]"
            ],
            "Image": "ubuntu:latest",
            "Volumes": null,
            "WorkingDir": "",
            "Entrypoint": null,
            "OnBuild": null,
            "Labels": {}
        },
        "Architecture": "amd64",
        "Os": "linux",
        "Size": 122257773,
        "VirtualSize": 122257773,
        "GraphDriver": {
            "Data": {
                "LowerDir": "/mnt/sda1/var/lib/docker/overlay2/f3c58764500e7a1651791b6b9da394036c8a034475ad0037f7191800a7b93969/diff:/mnt/sda1/var/lib/docker/overlay2/a9835bac38a9ae0824cd5c9c57134c74684cb21bb86d1a5b1c9f05b3ffeaa4d5/diff:/mnt/sda1/var/lib/docker/overlay2/185a395e953e7964ce23c29844c5ec7cc7fe19dbcf287a93ed504dd2ae1d1070/diff",
                "MergedDir": "/mnt/sda1/var/lib/docker/overlay2/68223a8c2e1c251aea80fba573b4d87f5ca3bff43eb7fd9c48c06937b512ce4d/merged",
                "UpperDir": "/mnt/sda1/var/lib/docker/overlay2/68223a8c2e1c251aea80fba573b4d87f5ca3bff43eb7fd9c48c06937b512ce4d/diff",
                "WorkDir": "/mnt/sda1/var/lib/docker/overlay2/68223a8c2e1c251aea80fba573b4d87f5ca3bff43eb7fd9c48c06937b512ce4d/work"
            },
            "Name": "overlay2"
        },
        "RootFS": {
            "Type": "layers",
            "Layers": [
                "sha256:bacd3af13903e13a43fe87b6944acd1ff21024132aad6e74b4452d984fb1a99a",
                "sha256:9069f84dbbe96d4c50a656a05bbe6b6892722b0d1116a8f7fd9d274f4e991bf6",
                "sha256:f6253634dc78da2f2e3bee9c8063593f880dc35d701307f30f65553e0f50c18c",
                "sha256:e5d84b5cf84b48391f19a5f6c5aed1e810f84f2fe5c0cccc97a588d65784f1e3"
            ]
        },
        "Metadata": {
            "LastTagTime": "2020-12-28T22:16:40.328908925Z"
        }
    }
]

**How to save and load images without using Internet(Dockerhub) because of security**

**saved image in local image folder as con1image.tar**
PS C:\AdanZyeDocker\kisim5\bolum61\image> docker save gunerhanale/con1:latest -o con1image.tar
PS C:\AdanZyeDocker\kisim5\bolum61\image> ls


    Directory: C:\AdanZyeDocker\kisim5\bolum61\image


Mode                LastWriteTime         Length Name
----                -------------         ------ ----
-a----       28.12.2020     23:56      125017600 con1image.tar

**uploaded image from local file which is con1image.tar**
PS C:\AdanZyeDocker\kisim5\bolum61\image> docker load -i .\con1image.tar
Loaded image: gunerhanale/con1:latest


**How to establish a registy server for own local company to pull or push images**
PS C:\> docker pull registry
Using default tag: latest
latest: Pulling from library/registry
0a6724ff3fcd: Pull complete
d550a247d74f: Pull complete
1a938458ca36: Pull complete
acd758c36fc9: Pull complete
9af6d68b484a: Pull complete
Digest: sha256:d5459fcb27aecc752520df4b492b08358a1912fcdfa454f7d2101d4b09991daa
Status: Downloaded newer image for registry:latest
docker.io/library/registry:latest

PS C:\> docker run -d -p 5000:5000 --restart always --name registry registry
c1883aec39d78d757b1c4911047cce8de07c388d9368a4df7f60ed46da275c89

PS C:\> docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES
c1883aec39d7        registry            "/entrypoint.sh /etc"   2 seconds ago       Up 3 seconds        0.0.0.0:5000->5000/tcp   registry

PS C:\> docker pull ozgurozturknet/hello-app:latest
latest: Pulling from ozgurozturknet/hello-app
Digest: sha256:a4b3acfb88eafb47a7b5f1266f25ff114d3148186d130dad5d4319086b26c4c2
Status: Image is up to date for ozgurozturknet/hello-app:latest
docker.io/ozgurozturknet/hello-app:latest

**How to set a tag to an image**
PS C:\>  docker image tag ozgurozturknet/hello-app:latest 192.168.99.100:5000/hello-app:latest

PS C:\> docker image ls
REPOSITORY                         TAG                 IMAGE ID            CREATED             SIZE
192.168.99.100:5000/hello-app      latest              7feb3d617d2d        8 months ago        5.6MB
ozgurozturknet/hello-app           latest              7feb3d617d2d        8 months ago        5.6MB

**How to push an image to local registry server**
PS C:\> docker image push 192.168.99.100:5000/hello-app:latest
The push refers to repository [192.168.99.100:5000/hello-app]
Get https://192.168.99.100:5000/v2/: http: server gave HTTP response to HTTPS client

**How to pull an image from local registry server**
PS C:\> docker pull 192.168.99.100:5000/hello-app:latest

--------------------------------------------------------------------------------
Date of Notes : 29-12-2020

* ***Docker Compose***
**It provides us to describe as yaml format for multiple container system.**

PS C:\> docker-compose --version
docker-compose version 1.24.1, build 4667896b

PS C:\> cd .\AdanZyeDocker\kisim6\bolum65\
PS C:\AdanZyeDocker\kisim6\bolum65> ls


    Directory: C:\AdanZyeDocker\kisim6\bolum65


Mode                LastWriteTime         Length Name
----                -------------         ------ ----
-a----       21.12.2020     16:48            603 docker-compose.yml


PS C:\AdanZyeDocker\kisim6\bolum65> code .

PS C:\AdanZyeDocker\kisim6\bolum65> docker-compose up -d
Creating network "bolum65_webnet" with driver "bridge"
Pulling mysqldb (ozgurozturknet/webdb:)...
latest: Pulling from ozgurozturknet/webdb
804555ee0376: Pull complete
c53bab458734: Pull complete
ca9d72777f90: Pull complete
2d7aad6cb96e: Pull complete
8d6ca35c7908: Pull complete
6ddae009e760: Pull complete
327ae67bbe7b: Pull complete
31f1f8385b27: Pull complete
a5a3ad97e819: Pull complete
48bede7828ac: Pull complete
380afa2e6973: Pull complete
f5b0fbeeef97: Pull complete
Digest: sha256:7f4395879908dbd63fff2696c45b04e6d0d06b21978178bef069e1db75795f81
Status: Downloaded newer image for ozgurozturknet/webdb:latest
Pulling websrv (ozgurozturknet/webkayit:)...
latest: Pulling from ozgurozturknet/webkayit
8ec398bc0356: Pull complete
85cf4fc86478: Pull complete
970dadf4ccb6: Pull complete
8c04561117a4: Pull complete
d6b7434b63a2: Pull complete
83d8859e9744: Pull complete
9c3d824d0ad5: Pull complete
9e316fd5b3b3: Pull complete
578b40496c37: Pull complete
814ae7711d3c: Pull complete
4896fed78b6b: Pull complete
e74d71e9611d: Pull complete
46017765526c: Pull complete
280386098458: Pull complete
1433594449f4: Pull complete
21a3ca16847f: Pull complete
cabc7e54115f: Pull complete
267dd10c80bb: Pull complete
a725e4aedc93: Pull complete
Digest: sha256:8816eb13e7f175d6ee80244f4a22eba544a5fbcbba29c8e82db1b79634521a00
Status: Downloaded newer image for ozgurozturknet/webkayit:latest
Creating bolum65_mysqldb_1 ... done
Creating bolum65_websrv_1  ... done

PS C:\AdanZyeDocker\kisim6\bolum65> docker ps
CONTAINER ID        IMAGE                     COMMAND                  CREATED             STATUS              PORTS                 NAMES
0913d726dd16        ozgurozturknet/webkayit   "docker-php-entrypoi"   58 minutes ago      Up 58 minutes       0.0.0.0:80->80/tcp    bolum65_websrv_1
e29c7e59f838        ozgurozturknet/webdb      "docker-entrypoint.s"   58 minutes ago      Up 58 minutes       3306/tcp, 33060/tcp   bolum65_mysqldb_1

PS C:\AdanZyeDocker\kisim6\bolum65> docker network ls
NETWORK ID          NAME                DRIVER              SCOPE
52873de2c6d4        bolum65_webnet      bridge              local
27a007c939a4        bridge              bridge              local
bc224eb7a822        host                host                local
9e453215f63e        myBridge            bridge              local
8ad1749707e8        none                null                local

PS C:\AdanZyeDocker\kisim6\bolum65> docker-compose down
Stopping bolum65_websrv_1  ... done
Stopping bolum65_mysqldb_1 ... done
Removing bolum65_websrv_1  ... done
Removing bolum65_mysqldb_1 ... done
Removing network bolum65_webnet
_____

PS C:\AdanZyeDocker\kisim6\bolum66> ls


    Directory: C:\AdanZyeDocker\kisim6\bolum66


Mode                LastWriteTime         Length Name
----                -------------         ------ ----
-a----       21.12.2020     16:48            603 docker-compose.yml


PS C:\AdanZyeDocker\kisim6\bolum66> cat .\docker-compose.yml
version: '3.7'

services:
   mysqldb:
     image: ozgurozturknet/webdb
     environment:
      MYSQL_DATABASE: proje
      MYSQL_USER: projemaster
      MYSQL_PASSWORD: master1234
      MYSQL_ROOT_PASSWORD: master1234
     networks:
      - webnet

   websrv:
     depends_on:
       - mysqldb
     image: ozgurozturknet/webkayit
     ports:
       - "80:80"
     restart: always
     networks:
       - webnet
     environment:
       DB_SERVER: mysqldb
       DB_USERNAME: projemaster
       DB_PASS: master1234
       DB_NAME: proje
networks:
  webnet:
    driver: bridge

PS C:\AdanZyeDocker\kisim6\bolum66> docker-compose up
Creating network "bolum66_webnet" with driver "bridge"
Creating bolum66_mysqldb_1 ... done
Creating bolum66_websrv_1  ... done
Attaching to bolum66_mysqldb_1, bolum66_websrv_1
mysqldb_1  | 2020-12-29 22:29:14+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 5.7.28-1debian9 started.
mysqldb_1  | 2020-12-29 22:29:14+00:00 [Note] [Entrypoint]: Switching to dedicated user 'mysql'
mysqldb_1  | 2020-12-29 22:29:14+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 5.7.28-1debian9 started.
mysqldb_1  | 2020-12-29 22:29:14+00:00 [Note] [Entrypoint]: Initializing database files
mysqldb_1  | 2020-12-29T22:29:14.846124Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).
websrv_1   | AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 172.21.0.3. Set the 'ServerName' directive globally to suppress this message
websrv_1   | AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 172.21.0.3. Set the 'ServerName' directive globally to suppress this message
websrv_1   | [Tue Dec 29 22:29:15.540907 2020] [mpm_prefork:notice] [pid 1] AH00163: Apache/2.4.38 (Debian) PHP/7.3.13 configured -- resuming normal operations
mysqldb_1  | 2020-12-29T22:29:15.456091Z 0 [Warning] InnoDB: New log files created, LSN=45790
mysqldb_1  | 2020-12-29T22:29:15.550289Z 0 [Warning] InnoDB: Creating foreign key constraint system tables.
mysqldb_1  | 2020-12-29T22:29:15.610131Z 0 [Warning] No existing UUID has been found, so we assume that this is the first time that this server has been started. Generating a new UUID: 4888c71d-4a25-11eb-9259-0242ac150002.
mysqldb_1  | 2020-12-29T22:29:15.612237Z 0 [Warning] Gtid table is not ready to be used. Table 'mysql.gtid_executed' cannot be opened.
mysqldb_1  | 2020-12-29T22:29:16.294613Z 0 [Warning] CA certificate ca.pem is self signed.
mysqldb_1  | 2020-12-29T22:29:16.900402Z 1 [Warning] root@localhost is created with an empty password ! Please consider switching off the --initialize-insecure option.
mysqldb_1  | 2020-12-29 22:29:19+00:00 [Note] [Entrypoint]: Database files initialized
mysqldb_1  | 2020-12-29 22:29:19+00:00 [Note] [Entrypoint]: Starting temporary server
mysqldb_1  | 2020-12-29 22:29:19+00:00 [Note] [Entrypoint]: Waiting for server startup
mysqldb_1  | 2020-12-29T22:29:19.940407Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).
mysqldb_1  | 2020-12-29T22:29:19.951887Z 0 [Note] mysqld (mysqld 5.7.28) starting as process 78 ...
mysqldb_1  | 2020-12-29T22:29:19.973072Z 0 [Note] InnoDB: PUNCH HOLE support available
mysqldb_1  | 2020-12-29T22:29:19.974381Z 0 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins
mysqldb_1  | 2020-12-29T22:29:19.975089Z 0 [Note] InnoDB: Uses event mutexes
mysqldb_1  | 2020-12-29T22:29:19.977265Z 0 [Note] InnoDB: GCC builtin __atomic_thread_fence() is used for memory barrier
mysqldb_1  | 2020-12-29T22:29:19.978432Z 0 [Note] InnoDB: Compressed tables use zlib 1.2.11
mysqldb_1  | 2020-12-29T22:29:19.979954Z 0 [Note] InnoDB: Using Linux native AIO
mysqldb_1  | 2020-12-29T22:29:19.982168Z 0 [Note] InnoDB: Number of pools: 1
mysqldb_1  | 2020-12-29T22:29:19.991319Z 0 [Note] InnoDB: Using CPU crc32 instructions
mysqldb_1  | 2020-12-29T22:29:20.017566Z 0 [Note] InnoDB: Initializing buffer pool, total size = 128M, instances = 1, chunk size = 128M
mysqldb_1  | 2020-12-29T22:29:20.048890Z 0 [Note] InnoDB: Completed initialization of buffer pool
mysqldb_1  | 2020-12-29T22:29:20.060727Z 0 [Note] InnoDB: If the mysqld execution user is authorized, page cleaner thread priority can be changed. See the man page of setpriority().
mysqldb_1  | 2020-12-29T22:29:20.078021Z 0 [Note] InnoDB: Highest supported file format is Barracuda.
mysqldb_1  | 2020-12-29T22:29:20.108605Z 0 [Note] InnoDB: Creating shared tablespace for temporary tables
mysqldb_1  | 2020-12-29T22:29:20.109450Z 0 [Note] InnoDB: Setting file './ibtmp1' size to 12 MB. Physically writing the file full; Please wait ...
mysqldb_1  | 2020-12-29T22:29:20.159008Z 0 [Note] InnoDB: File './ibtmp1' size is now 12 MB.
mysqldb_1  | 2020-12-29T22:29:20.160742Z 0 [Note] InnoDB: 96 redo rollback segment(s) found. 96 redo rollback segment(s) are active.
mysqldb_1  | 2020-12-29T22:29:20.161983Z 0 [Note] InnoDB: 32 non-redo rollback segment(s) are active.
mysqldb_1  | 2020-12-29T22:29:20.168102Z 0 [Note] InnoDB: Waiting for purge to start
mysqldb_1  | 2020-12-29T22:29:20.223757Z 0 [Note] InnoDB: 5.7.28 started; log sequence number 2628227
mysqldb_1  | 2020-12-29T22:29:20.224630Z 0 [Note] Plugin 'FEDERATED' is disabled.
mysqldb_1  | 2020-12-29T22:29:20.230641Z 0 [Note] InnoDB: Loading buffer pool(s) from /var/lib/mysql/ib_buffer_pool
mysqldb_1  | 2020-12-29T22:29:20.250642Z 0 [Note] InnoDB: Buffer pool(s) load completed at 201229 22:29:20
mysqldb_1  | 2020-12-29T22:29:20.254764Z 0 [Note] Found ca.pem, server-cert.pem and server-key.pem in data directory. Trying to enable SSL support using them.
mysqldb_1  | 2020-12-29T22:29:20.256236Z 0 [Note] Skipping generation of SSL certificates as certificate files are present in data directory.
mysqldb_1  | 2020-12-29T22:29:20.260431Z 0 [Warning] CA certificate ca.pem is self signed.
mysqldb_1  | 2020-12-29T22:29:20.261743Z 0 [Note] Skipping generation of RSA key pair as key files are present in data directory.
mysqldb_1  | 2020-12-29T22:29:20.280749Z 0 [Warning] Insecure configuration for --pid-file: Location '/var/run/mysqld' in the path is accessible to all OS users. Consider choosing a different directory.
mysqldb_1  | 2020-12-29T22:29:20.307251Z 0 [Note] Event Scheduler: Loaded 0 events
mysqldb_1  | 2020-12-29T22:29:20.308026Z 0 [Note] mysqld: ready for connections.
mysqldb_1  | Version: '5.7.28'  socket: '/var/run/mysqld/mysqld.sock'  port: 0  MySQL Community Server (GPL)
mysqldb_1  | 2020-12-29 22:29:20+00:00 [Note] [Entrypoint]: Temporary server started.
mysqldb_1  | Warning: Unable to load '/usr/share/zoneinfo/iso3166.tab' as time zone. Skipping it.
mysqldb_1  | Warning: Unable to load '/usr/share/zoneinfo/leap-seconds.list' as time zone. Skipping it.
mysqldb_1  | Warning: Unable to load '/usr/share/zoneinfo/zone.tab' as time zone. Skipping it.
mysqldb_1  | Warning: Unable to load '/usr/share/zoneinfo/zone1970.tab' as time zone. Skipping it.
mysqldb_1  | 2020-12-29 22:29:24+00:00 [Note] [Entrypoint]: Creating database proje
mysqldb_1  | 2020-12-29 22:29:24+00:00 [Note] [Entrypoint]: Creating user projemaster
mysqldb_1  | 2020-12-29 22:29:24+00:00 [Note] [Entrypoint]: Giving user projemaster access to schema proje
mysqldb_1  |
mysqldb_1  | 2020-12-29 22:29:24+00:00 [Note] [Entrypoint]: /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/tabloyarat.sql
mysqldb_1  |
mysqldb_1  |
mysqldb_1  | 2020-12-29 22:29:24+00:00 [Note] [Entrypoint]: Stopping temporary server
mysqldb_1  | 2020-12-29T22:29:24.606165Z 0 [Note] Giving 0 client threads a chance to die gracefully
mysqldb_1  | 2020-12-29T22:29:24.606585Z 0 [Note] Shutting down slave threads
mysqldb_1  | 2020-12-29T22:29:24.606879Z 0 [Note] Forcefully disconnecting 0 remaining clients
mysqldb_1  | 2020-12-29T22:29:24.607157Z 0 [Note] Event Scheduler: Purging the queue. 0 events
mysqldb_1  | 2020-12-29T22:29:24.607683Z 0 [Note] Binlog end
mysqldb_1  | 2020-12-29T22:29:24.624488Z 0 [Note] Shutting down plugin 'ngram'
mysqldb_1  | 2020-12-29T22:29:24.630426Z 0 [Note] Shutting down plugin 'partition'
mysqldb_1  | 2020-12-29T22:29:24.632205Z 0 [Note] Shutting down plugin 'BLACKHOLE'
mysqldb_1  | 2020-12-29T22:29:24.633451Z 0 [Note] Shutting down plugin 'ARCHIVE'
mysqldb_1  | 2020-12-29T22:29:24.634612Z 0 [Note] Shutting down plugin 'PERFORMANCE_SCHEMA'
mysqldb_1  | 2020-12-29T22:29:24.635471Z 0 [Note] Shutting down plugin 'MRG_MYISAM'
mysqldb_1  | 2020-12-29T22:29:24.638472Z 0 [Note] Shutting down plugin 'MyISAM'
mysqldb_1  | 2020-12-29T22:29:24.645093Z 0 [Note] Shutting down plugin 'INNODB_SYS_VIRTUAL'
mysqldb_1  | 2020-12-29T22:29:24.658379Z 0 [Note] Shutting down plugin 'INNODB_SYS_DATAFILES'
mysqldb_1  | 2020-12-29T22:29:24.658703Z 0 [Note] Shutting down plugin 'INNODB_SYS_TABLESPACES'
mysqldb_1  | 2020-12-29T22:29:24.659107Z 0 [Note] Shutting down plugin 'INNODB_SYS_FOREIGN_COLS'
mysqldb_1  | 2020-12-29T22:29:24.659854Z 0 [Note] Shutting down plugin 'INNODB_SYS_FOREIGN'
mysqldb_1  | 2020-12-29T22:29:24.662954Z 0 [Note] Shutting down plugin 'INNODB_SYS_FIELDS'
mysqldb_1  | 2020-12-29T22:29:24.673195Z 0 [Note] Shutting down plugin 'INNODB_SYS_COLUMNS'
mysqldb_1  | 2020-12-29T22:29:24.673541Z 0 [Note] Shutting down plugin 'INNODB_SYS_INDEXES'
mysqldb_1  | 2020-12-29T22:29:24.673570Z 0 [Note] Shutting down plugin 'INNODB_SYS_TABLESTATS'
mysqldb_1  | 2020-12-29T22:29:24.673587Z 0 [Note] Shutting down plugin 'INNODB_SYS_TABLES'
mysqldb_1  | 2020-12-29T22:29:24.673601Z 0 [Note] Shutting down plugin 'INNODB_FT_INDEX_TABLE'
mysqldb_1  | 2020-12-29T22:29:24.673616Z 0 [Note] Shutting down plugin 'INNODB_FT_INDEX_CACHE'
mysqldb_1  | 2020-12-29T22:29:24.673630Z 0 [Note] Shutting down plugin 'INNODB_FT_CONFIG'
mysqldb_1  | 2020-12-29T22:29:24.673644Z 0 [Note] Shutting down plugin 'INNODB_FT_BEING_DELETED'
mysqldb_1  | 2020-12-29T22:29:24.673659Z 0 [Note] Shutting down plugin 'INNODB_FT_DELETED'
mysqldb_1  | 2020-12-29T22:29:24.673673Z 0 [Note] Shutting down plugin 'INNODB_FT_DEFAULT_STOPWORD'
mysqldb_1  | 2020-12-29T22:29:24.673688Z 0 [Note] Shutting down plugin 'INNODB_METRICS'
mysqldb_1  | 2020-12-29T22:29:24.673702Z 0 [Note] Shutting down plugin 'INNODB_TEMP_TABLE_INFO'
mysqldb_1  | 2020-12-29T22:29:24.673716Z 0 [Note] Shutting down plugin 'INNODB_BUFFER_POOL_STATS'
mysqldb_1  | 2020-12-29T22:29:24.673730Z 0 [Note] Shutting down plugin 'INNODB_BUFFER_PAGE_LRU'
mysqldb_1  | 2020-12-29T22:29:24.673744Z 0 [Note] Shutting down plugin 'INNODB_BUFFER_PAGE'
mysqldb_1  | 2020-12-29T22:29:24.673758Z 0 [Note] Shutting down plugin 'INNODB_CMP_PER_INDEX_RESET'
mysqldb_1  | 2020-12-29T22:29:24.673773Z 0 [Note] Shutting down plugin 'INNODB_CMP_PER_INDEX'
mysqldb_1  | 2020-12-29T22:29:24.673788Z 0 [Note] Shutting down plugin 'INNODB_CMPMEM_RESET'
mysqldb_1  | 2020-12-29T22:29:24.673803Z 0 [Note] Shutting down plugin 'INNODB_CMPMEM'
mysqldb_1  | 2020-12-29T22:29:24.673818Z 0 [Note] Shutting down plugin 'INNODB_CMP_RESET'
mysqldb_1  | 2020-12-29T22:29:24.673832Z 0 [Note] Shutting down plugin 'INNODB_CMP'
mysqldb_1  | 2020-12-29T22:29:24.673847Z 0 [Note] Shutting down plugin 'INNODB_LOCK_WAITS'
mysqldb_1  | 2020-12-29T22:29:24.673957Z 0 [Note] Shutting down plugin 'INNODB_LOCKS'
mysqldb_1  | 2020-12-29T22:29:24.673989Z 0 [Note] Shutting down plugin 'INNODB_TRX'
mysqldb_1  | 2020-12-29T22:29:24.674004Z 0 [Note] Shutting down plugin 'InnoDB'
mysqldb_1  | 2020-12-29T22:29:24.674173Z 0 [Note] InnoDB: FTS optimize thread exiting.
mysqldb_1  | 2020-12-29T22:29:24.674377Z 0 [Note] InnoDB: Starting shutdown...
mysqldb_1  | 2020-12-29T22:29:24.775268Z 0 [Note] InnoDB: Dumping buffer pool(s) to /var/lib/mysql/ib_buffer_pool
mysqldb_1  | 2020-12-29T22:29:24.775536Z 0 [Note] InnoDB: Buffer pool(s) dump completed at 201229 22:29:24
mysqldb_1  | 2020-12-29T22:29:26.130270Z 0 [Note] InnoDB: Shutdown completed; log sequence number 12444399
mysqldb_1  | 2020-12-29T22:29:26.140189Z 0 [Note] InnoDB: Removed temporary tablespace data file: "ibtmp1"
mysqldb_1  | 2020-12-29T22:29:26.143012Z 0 [Note] Shutting down plugin 'MEMORY'
mysqldb_1  | 2020-12-29T22:29:26.144550Z 0 [Note] Shutting down plugin 'CSV'
mysqldb_1  | 2020-12-29T22:29:26.145364Z 0 [Note] Shutting down plugin 'sha256_password'
mysqldb_1  | 2020-12-29T22:29:26.145640Z 0 [Note] Shutting down plugin 'mysql_native_password'
mysqldb_1  | 2020-12-29T22:29:26.152505Z 0 [Note] Shutting down plugin 'binlog'
mysqldb_1  | 2020-12-29T22:29:26.176234Z 0 [Note] mysqld: Shutdown complete
mysqldb_1  |
mysqldb_1  | 2020-12-29 22:29:26+00:00 [Note] [Entrypoint]: Temporary server stopped
mysqldb_1  |
mysqldb_1  | 2020-12-29 22:29:26+00:00 [Note] [Entrypoint]: MySQL init process done. Ready for start up.
mysqldb_1  |
mysqldb_1  | 2020-12-29T22:29:26.994026Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).
mysqldb_1  | 2020-12-29T22:29:26.998090Z 0 [Note] mysqld (mysqld 5.7.28) starting as process 1 ...
mysqldb_1  | 2020-12-29T22:29:27.008606Z 0 [Note] InnoDB: PUNCH HOLE support available
mysqldb_1  | 2020-12-29T22:29:27.011774Z 0 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins
mysqldb_1  | 2020-12-29T22:29:27.013072Z 0 [Note] InnoDB: Uses event mutexes
mysqldb_1  | 2020-12-29T22:29:27.015517Z 0 [Note] InnoDB: GCC builtin __atomic_thread_fence() is used for memory barrier
mysqldb_1  | 2020-12-29T22:29:27.015972Z 0 [Note] InnoDB: Compressed tables use zlib 1.2.11
mysqldb_1  | 2020-12-29T22:29:27.016161Z 0 [Note] InnoDB: Using Linux native AIO
mysqldb_1  | 2020-12-29T22:29:27.021984Z 0 [Note] InnoDB: Number of pools: 1
mysqldb_1  | 2020-12-29T22:29:27.034220Z 0 [Note] InnoDB: Using CPU crc32 instructions
mysqldb_1  | 2020-12-29T22:29:27.071860Z 0 [Note] InnoDB: Initializing buffer pool, total size = 128M, instances = 1, chunk size = 128M
mysqldb_1  | 2020-12-29T22:29:27.091136Z 0 [Note] InnoDB: Completed initialization of buffer pool
mysqldb_1  | 2020-12-29T22:29:27.102298Z 0 [Note] InnoDB: If the mysqld execution user is authorized, page cleaner thread priority can be changed. See the man page of setpriority().
mysqldb_1  | 2020-12-29T22:29:27.115317Z 0 [Note] InnoDB: Highest supported file format is Barracuda.
mysqldb_1  | 2020-12-29T22:29:27.132525Z 0 [Note] InnoDB: Creating shared tablespace for temporary tables
mysqldb_1  | 2020-12-29T22:29:27.133006Z 0 [Note] InnoDB: Setting file './ibtmp1' size to 12 MB. Physically writing the file full; Please wait ...
mysqldb_1  | 2020-12-29T22:29:27.177514Z 0 [Note] InnoDB: File './ibtmp1' size is now 12 MB.
mysqldb_1  | 2020-12-29T22:29:27.181295Z 0 [Note] InnoDB: 96 redo rollback segment(s) found. 96 redo rollback segment(s) are active.
mysqldb_1  | 2020-12-29T22:29:27.185534Z 0 [Note] InnoDB: 32 non-redo rollback segment(s) are active.
mysqldb_1  | 2020-12-29T22:29:27.189027Z 0 [Note] InnoDB: Waiting for purge to start
mysqldb_1  | 2020-12-29T22:29:27.241649Z 0 [Note] InnoDB: 5.7.28 started; log sequence number 12444399
mysqldb_1  | 2020-12-29T22:29:27.244013Z 0 [Note] Plugin 'FEDERATED' is disabled.
mysqldb_1  | 2020-12-29T22:29:27.255133Z 0 [Note] InnoDB: Loading buffer pool(s) from /var/lib/mysql/ib_buffer_pool
mysqldb_1  | 2020-12-29T22:29:27.301584Z 0 [Note] InnoDB: Buffer pool(s) load completed at 201229 22:29:27
mysqldb_1  | 2020-12-29T22:29:27.323048Z 0 [Note] Found ca.pem, server-cert.pem and server-key.pem in data directory. Trying to enable SSL support using them.
mysqldb_1  | 2020-12-29T22:29:27.323807Z 0 [Note] Skipping generation of SSL certificates as certificate files are present in data directory.
mysqldb_1  | 2020-12-29T22:29:27.333310Z 0 [Warning] CA certificate ca.pem is self signed.
mysqldb_1  | 2020-12-29T22:29:27.342043Z 0 [Note] Skipping generation of RSA key pair as key files are present in data directory.
mysqldb_1  | 2020-12-29T22:29:27.349812Z 0 [Note] Server hostname (bind-address): '*'; port: 3306
mysqldb_1  | 2020-12-29T22:29:27.355100Z 0 [Note] IPv6 is available.
mysqldb_1  | 2020-12-29T22:29:27.356049Z 0 [Note]   - '::' resolves to '::';
mysqldb_1  | 2020-12-29T22:29:27.358322Z 0 [Note] Server socket created on IP: '::'.
mysqldb_1  | 2020-12-29T22:29:27.383324Z 0 [Warning] Insecure configuration for --pid-file: Location '/var/run/mysqld' in the path is accessible to all OS users. Consider choosing a different directory.
mysqldb_1  | 2020-12-29T22:29:27.413901Z 0 [Note] Event Scheduler: Loaded 0 events
Gracefully stopping... (press Ctrl+C again to force)
Stopping bolum66_websrv_1  ... done
Stopping bolum66_mysqldb_1 ... done

**Cntrl+C only stops, not to remove container and network**
PS C:\AdanZyeDocker\kisim6\bolum66> docker ps -a
CONTAINER ID        IMAGE                     COMMAND                  CREATED              STATUS                      PORTS               NAMES
5e1d75f02c89        ozgurozturknet/webkayit   "docker-php-entrypoi"   About a minute ago   Exited (0) 10 seconds ago                       bolum66_websrv_1
024406a5f78f        ozgurozturknet/webdb      "docker-entrypoint.s"   About a minute ago   Exited (0) 8 seconds ago                        bolum66_mysqldb_1

PS C:\AdanZyeDocker\kisim6\bolum66> docker network ls
NETWORK ID          NAME                DRIVER              SCOPE
cc945668f6ea        bolum66_webnet      bridge              local
27a007c939a4        bridge              bridge              local
bc224eb7a822        host                host                local
9e453215f63e        myBridge            bridge              local
8ad1749707e8        none                null                local

**When we use 'down', it will be deleting all network and container
PS C:\AdanZyeDocker\kisim6\bolum66> docker-compose down
Removing bolum66_websrv_1  ... done
Removing bolum66_mysqldb_1 ... done
Removing network bolum66_webnet

PS C:\AdanZyeDocker\kisim6\bolum66> docker ps -a
CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES

PS C:\AdanZyeDocker\kisim6\bolum66> docker network ls
NETWORK ID          NAME                DRIVER              SCOPE
27a007c939a4        bridge              bridge              local
bc224eb7a822        host                host                local
9e453215f63e        myBridge            bridge              local
8ad1749707e8        none                null                local


PS C:\AdanZyeDocker\kisim6\bolum66> docker-compose up -d
Creating network "bolum66_webnet" with driver "bridge"
Creating bolum66_mysqldb_1 ... done
Creating bolum66_websrv_1  ... done

PS C:\AdanZyeDocker\kisim6\bolum66> docker-compose config
networks:
  webnet:
    driver: bridge
services:
  mysqldb:
    environment:
      MYSQL_DATABASE: proje
      MYSQL_PASSWORD: master1234
      MYSQL_ROOT_PASSWORD: master1234
      MYSQL_USER: projemaster
    image: ozgurozturknet/webdb
    networks:
      webnet: null
  websrv:
    depends_on:
    - mysqldb
    environment:
      DB_NAME: proje
      DB_PASS: master1234
      DB_SERVER: mysqldb
      DB_USERNAME: projemaster
    image: ozgurozturknet/webkayit
    networks:
      webnet: null
    ports:
    - published: 80
      target: 80
    restart: always
version: '3.7'

**Which images are working in docker-compose we can look at it**
PS C:\AdanZyeDocker\kisim6\bolum66> docker-compose images
The system cannot find the path specified.
    Container             Repository           Tag       Image Id      Size
----------------------------------------------------------------------------
bolum66_mysqldb_1   ozgurozturknet/webdb      latest   3e6048caa2a4   416 MB
bolum66_websrv_1    ozgurozturknet/webkayit   latest   3b8929349c0b   461 MB

PS C:\AdanZyeDocker\kisim6\bolum66> docker-compose logs
Attaching to bolum66_websrv_1, bolum66_mysqldb_1
websrv_1   | AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 172.22.0.3. Set the 'ServerName' directive globally to suppress this message
websrv_1   | AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 172.22.0.3. Set the 'ServerName' directive globally to suppress this message
websrv_1   | [Tue Dec 29 22:31:19.416143 2020] [mpm_prefork:notice] [pid 1] AH00163: Apache/2.4.38 (Debian) PHP/7.3.13 configured -- resuming normal operations
...
mysqldb_1  | 2020-12-29T22:31:32.125912Z 0 [Note] Server hostname (bind-address): '*'; port: 3306
mysqldb_1  | 2020-12-29T22:31:32.126795Z 0 [Note] IPv6 is available.
mysqldb_1  | 2020-12-29T22:31:32.127530Z 0 [Note]   - '::' resolves to '::';
mysqldb_1  | 2020-12-29T22:31:32.128023Z 0 [Note] Server socket created on IP: '::'.
mysqldb_1  | 2020-12-29T22:31:32.131097Z 0 [Warning] Insecure configuration for --pid-file: Location '/var/run/mysqld' in the path is accessible to all OS users. Consider choosing a different directory.
mysqldb_1  | 2020-12-29T22:31:32.184218Z 0 [Note] Event Scheduler: Loaded 0 events
mysqldb_1  | 2020-12-29T22:31:32.186341Z 0 [Note] mysqld: ready for connections.
mysqldb_1  | Version: '5.7.28'  socket: '/var/run/mysqld/mysqld.sock'  port: 3306  MySQL Community Server (GPL)

PS C:\AdanZyeDocker\kisim6\bolum66> docker-compose exec websrv ls -al
total 24
drwxrwxrwx 1 www-data www-data 4096 Jan 15  2020 .
drwxr-xr-x 1 root     root     4096 Dec 28  2019 ..
-rwxr-xr-x 1 root     root     1146 Jan 15  2020 add.php
drwxrwxrwx 1 root     root     4096 Jan 15  2020 images
-rwxr-xr-x 1 root     root      306 Jan  2  2019 index.html
-rwxr-xr-x 1 root     root      732 Jan 15  2020 view.php

PS C:\AdanZyeDocker\kisim6\bolum66> docker ps
CONTAINER ID        IMAGE                     COMMAND                  CREATED             STATUS              PORTS                 NAMES
13df7e8a1297        ozgurozturknet/webkayit   "docker-php-entrypoi"   4 minutes ago       Up 4 minutes        0.0.0.0:80->80/tcp    bolum66_websrv_1
b80d50658c18        ozgurozturknet/webdb      "docker-entrypoint.s"   4 minutes ago       Up 4 minutes        3306/tcp, 33060/tcp   bolum66_mysqldb_1

PS C:\AdanZyeDocker\kisim6\bolum66> docker-compose down
Stopping bolum66_websrv_1  ... done
Stopping bolum66_mysqldb_1 ... done
Removing bolum66_websrv_1  ... done
Removing bolum66_mysqldb_1 ... done
Removing network bolum66_webnet

-----------------------------------------------------------------------------

Date of Notes : 31-12-2020

**how to create yaml file to establish a system**

docker-compose.yml file:

version: "3.8"

services:
  veritabani:
    image: mysql:5.7
    restart: always
    volumes:
      - verilerim:/var/lib/mysql
    environment: 
      MYSQL_ROOT_PASSWORD: somewordpress
      MYSQL_DATABASE: wordpress
      MYSQL_USER: wordpress
      MYSQL_PASSWORD: wordpress
    networks: 
      - wpnet
  
  wordpress: 
    image: wordpress:latest
    depends_on: 
      - veritabani
    restart: always
    ports: 
      - "80:80"
    environment: 
      WORDPRESS_DB_HOST: veritabani:3306
      WORDPRESS_DB_USER: wordpress
      WORDPRESS_DB_PASSWORD: wordpress
      WORDPRESS_DB_DB_NAME: wordpress 
    networks: 
      - wpnet

volumes:
  verilerim:

networks:
  wpnet:
    driver: bridge
_________

**Lets run this compose**

PS C:\AdanZyeDocker\kisim6\bolum67> docker-compose up -d
Creating bolum67_veritabani_1 ... done
Creating bolum67_wordpress_1  ... done
PS C:\AdanZyeDocker\kisim6\bolum67> docker-compose ps
The system cannot find the path specified.
        Name                      Command               State          Ports
-----------------------------------------------------------------------------------
bolum67_veritabani_1   docker-entrypoint.sh mysqld      Up      3306/tcp, 33060/tcp
bolum67_wordpress_1    docker-entrypoint.sh apach ...   Up      0.0.0.0:80->80/tcp
PS C:\AdanZyeDocker\kisim6\bolum67> docker ps
CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                 NAMES
467370755d38        wordpress:latest    "docker-entrypoint.s"   28 seconds ago      Up 29 seconds       0.0.0.0:80->80/tcp    bolum67_wordpress_1
964ead859ab2        mysql:5.7           "docker-entrypoint.s"   28 seconds ago      Up 29 seconds       3306/tcp, 33060/tcp   bolum67_veritabani_1

PS C:\AdanZyeDocker\kisim6\bolum67> docker-compose down
Stopping bolum67_wordpress_1  ... done
Stopping bolum67_veritabani_1 ... done
Removing bolum67_wordpress_1  ... done
Removing bolum67_veritabani_1 ... done
Removing network bolum67_wpnet

PS C:\AdanZyeDocker\kisim6\bolum67> docker volume ls
DRIVER              VOLUME NAME
local               alistirma1
local               alistirma2
local               bolum67_verilerim

PS C:\AdanZyeDocker\kisim6\bolum67> docker volume rm bolum67_verilerim
bolum67_verilerim

_________

* ***Docker Compose Build***

**We can use docker-compose file to build image.**


docker-compose.yml
_________

version: '3.7'

services:
   mysqldb:
     image: ozgurozturknet/webdb
     environment:
      MYSQL_DATABASE: proje
      MYSQL_USER: projemaster
      MYSQL_PASSWORD: master1234
      MYSQL_ROOT_PASSWORD: master1234
     networks:
      - webnet

   websrv:
     build: .
     depends_on:
       - mysqldb
     ports:
       - "80:80"
     restart: always
     networks:
       - webnet
     environment:
       DB_SERVER: mysqldb
       DB_USERNAME: projemaster
       DB_PASS: master1234
       DB_NAME: proje
networks:
  webnet:
    driver: bridge
_________

Dockerfile

FROM php:7.3-apache
RUN apt-get update -y && apt-get install mariadb-client-10.3 -y
RUN docker-php-ext-install mysqli && docker-php-ext-enable mysqli
RUN mkdir /var/www/html/images
RUN chmod 777 /var/www/html/images
COPY ./php/ /var/www/html/
_________

PS C:\AdanZyeDocker\kisim6\bolum68> docker-compose up
Creating network "bolum68_webnet" with driver "bridge"
Building websrv
Step 1/6 : FROM php:7.3-apache
7.3-apache: Pulling from library/php
6ec7b7d162b2: Already exists
db606474d60c: Already exists
afb30f0cd8e0: Already exists
3bb2e8051594: Already exists
4c761b44e2cc: Already exists
c2199db96575: Already exists
1b9a9381eea8: Already exists
7f24471717dc: Pull complete
5a6ae2f3533e: Pull complete
829b3a244ebb: Pull complete
4e0fdda85420: Pull complete
b3c1e1a4703e: Pull complete
4ec16a0a5c33: Pull complete
3861ba4b3280: Pull complete
Digest: sha256:3b49947b1f5a2d7c0003f48b8144526fdb7bb0cb4e209f434efd047e298ed464
Status: Downloaded newer image for php:7.3-apache
 ---> ddceef02e8b3
Step 2/6 : RUN apt-get update -y && apt-get install mariadb-client-10.3 -y
 ---> Running in c6517f295d6f
Get:1 http://deb.debian.org/debian buster InRelease [121 kB]
Get:2 http://security.debian.org/debian-security buster/updates InRelease [65.4 kB]
Get:3 http://deb.debian.org/debian buster-updates InRelease [51.9 kB]
Get:4 http://security.debian.org/debian-security buster/updates/main amd64 Packages [258 kB]
Get:5 http://deb.debian.org/debian buster/main amd64 Packages [7907 kB]
Get:6 http://deb.debian.org/debian buster-updates/main amd64 Packages [7860 B]
Fetched 8412 kB in 10s (826 kB/s)
Reading package lists...
Reading package lists...
Building dependency tree...
Reading state information...
The following package was automatically installed and is no longer required:
  sensible-utils
Use 'apt autoremove' to remove it.
The following additional packages will be installed:
  libaio1 libconfig-inifiles-perl libdbd-mysql-perl libdbi-perl libmariadb3
  libreadline5 libsnappy1v5 libterm-readkey-perl mariadb-client-core-10.3
  mariadb-common mysql-common readline-common
Suggested packages:
  libclone-perl libmldbm-perl libnet-daemon-perl libsql-statement-perl
  readline-doc
The following NEW packages will be installed:
  libaio1 libconfig-inifiles-perl libdbd-mysql-perl libdbi-perl libmariadb3
  libreadline5 libsnappy1v5 libterm-readkey-perl mariadb-client-10.3
  mariadb-client-core-10.3 mariadb-common mysql-common readline-common
0 upgraded, 13 newly installed, 0 to remove and 1 not upgraded.
Need to get 8308 kB of archives.
After this operation, 55.3 MB of additional disk space will be used.
Get:1 http://deb.debian.org/debian buster/main amd64 readline-common all 7.0-5 [70.6 kB]
Get:2 http://deb.debian.org/debian buster/main amd64 libaio1 amd64 0.3.112-3 [11.2 kB]
Get:3 http://deb.debian.org/debian buster/main amd64 libconfig-inifiles-perl all 3.000001-1 [51.9 kB]
Get:4 http://deb.debian.org/debian buster/main amd64 libdbi-perl amd64 1.642-1+deb10u1 [775 kB]
Get:5 http://deb.debian.org/debian buster/main amd64 mysql-common all 5.8+1.0.5 [7324 B]
Get:6 http://deb.debian.org/debian buster/main amd64 mariadb-common all 1:10.3.27-0+deb10u1 [32.2 kB]
Get:7 http://deb.debian.org/debian buster/main amd64 libmariadb3 amd64 1:10.3.27-0+deb10u1 [171 kB]
Get:8 http://deb.debian.org/debian buster/main amd64 libdbd-mysql-perl amd64 4.050-2 [121 kB]
Get:9 http://deb.debian.org/debian buster/main amd64 libreadline5 amd64 5.2+dfsg-3+b13 [120 kB]
Get:10 http://deb.debian.org/debian buster/main amd64 libsnappy1v5 amd64 1.1.7-1 [17.0 kB]
Get:11 http://deb.debian.org/debian buster/main amd64 libterm-readkey-perl amd64 2.38-1 [27.4 kB]
Get:12 http://deb.debian.org/debian buster/main amd64 mariadb-client-core-10.3 amd64 1:10.3.27-0+deb10u1 [5763 kB]
Get:13 http://deb.debian.org/debian buster/main amd64 mariadb-client-10.3 amd64 1:10.3.27-0+deb10u1 [1141 kB]
debconf: delaying package configuration, since apt-utils is not installed
Fetched 8308 kB in 3s (2979 kB/s)
Selecting previously unselected package readline-common.
(Reading database ... 13530 files and directories currently installed.)
Preparing to unpack .../00-readline-common_7.0-5_all.deb ...
Unpacking readline-common (7.0-5) ...
Selecting previously unselected package libaio1:amd64.
Preparing to unpack .../01-libaio1_0.3.112-3_amd64.deb ...
Unpacking libaio1:amd64 (0.3.112-3) ...
Selecting previously unselected package libconfig-inifiles-perl.
Preparing to unpack .../02-libconfig-inifiles-perl_3.000001-1_all.deb ...
Unpacking libconfig-inifiles-perl (3.000001-1) ...
Selecting previously unselected package libdbi-perl:amd64.
Preparing to unpack .../03-libdbi-perl_1.642-1+deb10u1_amd64.deb ...
Unpacking libdbi-perl:amd64 (1.642-1+deb10u1) ...
Selecting previously unselected package mysql-common.
Preparing to unpack .../04-mysql-common_5.8+1.0.5_all.deb ...
Unpacking mysql-common (5.8+1.0.5) ...
Selecting previously unselected package mariadb-common.
Preparing to unpack .../05-mariadb-common_1%3a10.3.27-0+deb10u1_all.deb ...
Unpacking mariadb-common (1:10.3.27-0+deb10u1) ...
Selecting previously unselected package libmariadb3:amd64.
Preparing to unpack .../06-libmariadb3_1%3a10.3.27-0+deb10u1_amd64.deb ...
Unpacking libmariadb3:amd64 (1:10.3.27-0+deb10u1) ...
Selecting previously unselected package libdbd-mysql-perl:amd64.
Preparing to unpack .../07-libdbd-mysql-perl_4.050-2_amd64.deb ...
Unpacking libdbd-mysql-perl:amd64 (4.050-2) ...
Selecting previously unselected package libreadline5:amd64.
Preparing to unpack .../08-libreadline5_5.2+dfsg-3+b13_amd64.deb ...
Unpacking libreadline5:amd64 (5.2+dfsg-3+b13) ...
Selecting previously unselected package libsnappy1v5:amd64.
Preparing to unpack .../09-libsnappy1v5_1.1.7-1_amd64.deb ...
Unpacking libsnappy1v5:amd64 (1.1.7-1) ...
Selecting previously unselected package libterm-readkey-perl.
Preparing to unpack .../10-libterm-readkey-perl_2.38-1_amd64.deb ...
Unpacking libterm-readkey-perl (2.38-1) ...
Selecting previously unselected package mariadb-client-core-10.3.
Preparing to unpack .../11-mariadb-client-core-10.3_1%3a10.3.27-0+deb10u1_amd64.deb ...
Unpacking mariadb-client-core-10.3 (1:10.3.27-0+deb10u1) ...
Selecting previously unselected package mariadb-client-10.3.
Preparing to unpack .../12-mariadb-client-10.3_1%3a10.3.27-0+deb10u1_amd64.deb ...
Unpacking mariadb-client-10.3 (1:10.3.27-0+deb10u1) ...
Setting up libconfig-inifiles-perl (3.000001-1) ...
Setting up mysql-common (5.8+1.0.5) ...
update-alternatives: using /etc/mysql/my.cnf.fallback to provide /etc/mysql/my.cnf (my.cnf) in auto mode
Setting up libsnappy1v5:amd64 (1.1.7-1) ...
Setting up mariadb-common (1:10.3.27-0+deb10u1) ...
update-alternatives: using /etc/mysql/mariadb.cnf to provide /etc/mysql/my.cnf (my.cnf) in auto mode
Setting up libmariadb3:amd64 (1:10.3.27-0+deb10u1) ...
Setting up libterm-readkey-perl (2.38-1) ...
Setting up libaio1:amd64 (0.3.112-3) ...
Setting up readline-common (7.0-5) ...
Setting up libdbi-perl:amd64 (1.642-1+deb10u1) ...
Setting up libreadline5:amd64 (5.2+dfsg-3+b13) ...
Setting up libdbd-mysql-perl:amd64 (4.050-2) ...
Setting up mariadb-client-core-10.3 (1:10.3.27-0+deb10u1) ...
Setting up mariadb-client-10.3 (1:10.3.27-0+deb10u1) ...
Processing triggers for libc-bin (2.28-10) ...
Removing intermediate container c6517f295d6f
 ---> ccaf786d5061
Step 3/6 : RUN docker-php-ext-install mysqli && docker-php-ext-enable mysqli
 ---> Running in 2cc9f8f90440
Configuring for:
PHP Api Version:         20180731
Zend Module Api No:      20180731
Zend Extension Api No:   320180731
checking for grep that handles long lines and -e... /bin/grep
checking for egrep... /bin/grep -E
checking for a sed that does not truncate output... /bin/sed
checking for cc... cc
checking whether the C compiler works... yes
checking for C compiler default output file name... a.out
checking for suffix of executables...
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether cc accepts -g... yes
checking for cc option to accept ISO C89... none needed
checking how to run the C preprocessor... cc -E
checking for icc... no
checking for suncc... no
checking whether cc understands -c and -o together... yes
checking for system library directory... lib
checking if compiler supports -R... no
checking if compiler supports -Wl,-rpath,... yes
checking build system type... x86_64-pc-linux-gnu
checking host system type... x86_64-pc-linux-gnu
checking target system type... x86_64-pc-linux-gnu
checking for PHP prefix... /usr/local
checking for PHP includes... -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib
checking for PHP extension directory... /usr/local/lib/php/extensions/no-debug-non-zts-20180731
checking for PHP installed headers prefix... /usr/local/include/php
checking if debug is enabled... no
checking if zts is enabled... no
checking for re2c... re2c
checking for re2c version... 1.1.1 (ok)
checking for gawk... no
checking for nawk... nawk
checking if nawk is broken... no
checking for MySQLi support... yes, shared
checking whether to enable embedded MySQLi support... no
checking for specified location of the MySQL UNIX socket... no
checking for MySQL UNIX socket location... no
checking for ld used by cc... /usr/bin/ld
checking if the linker (/usr/bin/ld) is GNU ld... yes
checking for /usr/bin/ld option to reload object files... -r
checking for BSD-compatible nm... /usr/bin/nm -B
checking whether ln -s works... yes
checking how to recognize dependent libraries... pass_all
checking for ANSI C header files... yes
checking for sys/types.h... yes
checking for sys/stat.h... yes
checking for stdlib.h... yes
checking for string.h... yes
checking for memory.h... yes
checking for strings.h... yes
checking for inttypes.h... yes
checking for stdint.h... yes
checking for unistd.h... yes
checking dlfcn.h usability... yes
checking dlfcn.h presence... yes
checking for dlfcn.h... yes
checking the maximum length of command line arguments... 1572864
checking command to parse /usr/bin/nm -B output from cc object... ok
checking for objdir... .libs
checking for ar... ar
checking for ranlib... ranlib
checking for strip... strip
checking if cc supports -fno-rtti -fno-exceptions... no
checking for cc option to produce PIC... -fPIC
checking if cc PIC flag -fPIC works... yes
checking if cc static flag -static works... yes
checking if cc supports -c -o file.o... yes
checking whether the cc linker (/usr/bin/ld -m elf_x86_64) supports shared libraries... yes
checking whether -lc should be explicitly linked in... no
checking dynamic linker characteristics... GNU/Linux ld.so
checking how to hardcode library paths into programs... immediate
checking whether stripping libraries is possible... yes
checking if libtool supports shared libraries... yes
checking whether to build shared libraries... yes
checking whether to build static libraries... no

creating libtool
appending configuration tag "CXX" to libtool
configure: creating ./config.status
config.status: creating config.h
/bin/bash /usr/src/php/ext/mysqli/libtool --mode=compile cc -DZEND_ENABLE_STATIC_TSRMLS_CACHE=1 -I. -I/usr/src/php/ext/mysqli -DPHP_ATOM_INC -I/usr/src/php/ext/mysqli/include -I/usr/src/php/ext/mysqli/main -I/usr/src/php/ext/mysqli -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib  -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H  -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64   -c /usr/src/php/ext/mysqli/mysqli.c -o mysqli.lo
mkdir .libs
 cc -DZEND_ENABLE_STATIC_TSRMLS_CACHE=1 -I. -I/usr/src/php/ext/mysqli -DPHP_ATOM_INC -I/usr/src/php/ext/mysqli/include -I/usr/src/php/ext/mysqli/main -I/usr/src/php/ext/mysqli -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -c /usr/src/php/ext/mysqli/mysqli.c  -fPIC -DPIC -o .libs/mysqli.o
/bin/bash /usr/src/php/ext/mysqli/libtool --mode=compile cc -DZEND_ENABLE_STATIC_TSRMLS_CACHE=1 -I. -I/usr/src/php/ext/mysqli -DPHP_ATOM_INC -I/usr/src/php/ext/mysqli/include -I/usr/src/php/ext/mysqli/main -I/usr/src/php/ext/mysqli -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib  -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H  -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64   -c /usr/src/php/ext/mysqli/mysqli_api.c -o mysqli_api.lo
 cc -DZEND_ENABLE_STATIC_TSRMLS_CACHE=1 -I. -I/usr/src/php/ext/mysqli -DPHP_ATOM_INC -I/usr/src/php/ext/mysqli/include -I/usr/src/php/ext/mysqli/main -I/usr/src/php/ext/mysqli -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -c /usr/src/php/ext/mysqli/mysqli_api.c  -fPIC -DPIC -o .libs/mysqli_api.o
/bin/bash /usr/src/php/ext/mysqli/libtool --mode=compile cc -DZEND_ENABLE_STATIC_TSRMLS_CACHE=1 -I. -I/usr/src/php/ext/mysqli -DPHP_ATOM_INC -I/usr/src/php/ext/mysqli/include -I/usr/src/php/ext/mysqli/main -I/usr/src/php/ext/mysqli -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib  -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H  -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64   -c /usr/src/php/ext/mysqli/mysqli_prop.c -o mysqli_prop.lo
 cc -DZEND_ENABLE_STATIC_TSRMLS_CACHE=1 -I. -I/usr/src/php/ext/mysqli -DPHP_ATOM_INC -I/usr/src/php/ext/mysqli/include -I/usr/src/php/ext/mysqli/main -I/usr/src/php/ext/mysqli -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -c /usr/src/php/ext/mysqli/mysqli_prop.c  -fPIC -DPIC -o .libs/mysqli_prop.o
/bin/bash /usr/src/php/ext/mysqli/libtool --mode=compile cc -DZEND_ENABLE_STATIC_TSRMLS_CACHE=1 -I. -I/usr/src/php/ext/mysqli -DPHP_ATOM_INC -I/usr/src/php/ext/mysqli/include -I/usr/src/php/ext/mysqli/main -I/usr/src/php/ext/mysqli -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib  -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H  -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64   -c /usr/src/php/ext/mysqli/mysqli_nonapi.c -o mysqli_nonapi.lo
 cc -DZEND_ENABLE_STATIC_TSRMLS_CACHE=1 -I. -I/usr/src/php/ext/mysqli -DPHP_ATOM_INC -I/usr/src/php/ext/mysqli/include -I/usr/src/php/ext/mysqli/main -I/usr/src/php/ext/mysqli -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -c /usr/src/php/ext/mysqli/mysqli_nonapi.c  -fPIC -DPIC -o .libs/mysqli_nonapi.o
/bin/bash /usr/src/php/ext/mysqli/libtool --mode=compile cc -DZEND_ENABLE_STATIC_TSRMLS_CACHE=1 -I. -I/usr/src/php/ext/mysqli -DPHP_ATOM_INC -I/usr/src/php/ext/mysqli/include -I/usr/src/php/ext/mysqli/main -I/usr/src/php/ext/mysqli -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib  -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H  -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64   -c /usr/src/php/ext/mysqli/mysqli_fe.c -o mysqli_fe.lo
 cc -DZEND_ENABLE_STATIC_TSRMLS_CACHE=1 -I. -I/usr/src/php/ext/mysqli -DPHP_ATOM_INC -I/usr/src/php/ext/mysqli/include -I/usr/src/php/ext/mysqli/main -I/usr/src/php/ext/mysqli -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -c /usr/src/php/ext/mysqli/mysqli_fe.c  -fPIC -DPIC -o .libs/mysqli_fe.o
/bin/bash /usr/src/php/ext/mysqli/libtool --mode=compile cc -DZEND_ENABLE_STATIC_TSRMLS_CACHE=1 -I. -I/usr/src/php/ext/mysqli -DPHP_ATOM_INC -I/usr/src/php/ext/mysqli/include -I/usr/src/php/ext/mysqli/main -I/usr/src/php/ext/mysqli -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib  -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H  -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64   -c /usr/src/php/ext/mysqli/mysqli_report.c -o mysqli_report.lo
 cc -DZEND_ENABLE_STATIC_TSRMLS_CACHE=1 -I. -I/usr/src/php/ext/mysqli -DPHP_ATOM_INC -I/usr/src/php/ext/mysqli/include -I/usr/src/php/ext/mysqli/main -I/usr/src/php/ext/mysqli -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -c /usr/src/php/ext/mysqli/mysqli_report.c  -fPIC -DPIC -o .libs/mysqli_report.o
/bin/bash /usr/src/php/ext/mysqli/libtool --mode=compile cc -DZEND_ENABLE_STATIC_TSRMLS_CACHE=1 -I. -I/usr/src/php/ext/mysqli -DPHP_ATOM_INC -I/usr/src/php/ext/mysqli/include -I/usr/src/php/ext/mysqli/main -I/usr/src/php/ext/mysqli -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib  -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H  -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64   -c /usr/src/php/ext/mysqli/mysqli_driver.c -o mysqli_driver.lo
 cc -DZEND_ENABLE_STATIC_TSRMLS_CACHE=1 -I. -I/usr/src/php/ext/mysqli -DPHP_ATOM_INC -I/usr/src/php/ext/mysqli/include -I/usr/src/php/ext/mysqli/main -I/usr/src/php/ext/mysqli -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -c /usr/src/php/ext/mysqli/mysqli_driver.c  -fPIC -DPIC -o .libs/mysqli_driver.o
/bin/bash /usr/src/php/ext/mysqli/libtool --mode=compile cc -DZEND_ENABLE_STATIC_TSRMLS_CACHE=1 -I. -I/usr/src/php/ext/mysqli -DPHP_ATOM_INC -I/usr/src/php/ext/mysqli/include -I/usr/src/php/ext/mysqli/main -I/usr/src/php/ext/mysqli -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib  -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H  -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64   -c /usr/src/php/ext/mysqli/mysqli_warning.c -o mysqli_warning.lo
 cc -DZEND_ENABLE_STATIC_TSRMLS_CACHE=1 -I. -I/usr/src/php/ext/mysqli -DPHP_ATOM_INC -I/usr/src/php/ext/mysqli/include -I/usr/src/php/ext/mysqli/main -I/usr/src/php/ext/mysqli -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -c /usr/src/php/ext/mysqli/mysqli_warning.c  -fPIC -DPIC -o .libs/mysqli_warning.o
/bin/bash /usr/src/php/ext/mysqli/libtool --mode=compile cc -DZEND_ENABLE_STATIC_TSRMLS_CACHE=1 -I. -I/usr/src/php/ext/mysqli -DPHP_ATOM_INC -I/usr/src/php/ext/mysqli/include -I/usr/src/php/ext/mysqli/main -I/usr/src/php/ext/mysqli -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib  -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H  -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64   -c /usr/src/php/ext/mysqli/mysqli_exception.c -o mysqli_exception.lo
 cc -DZEND_ENABLE_STATIC_TSRMLS_CACHE=1 -I. -I/usr/src/php/ext/mysqli -DPHP_ATOM_INC -I/usr/src/php/ext/mysqli/include -I/usr/src/php/ext/mysqli/main -I/usr/src/php/ext/mysqli -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -c /usr/src/php/ext/mysqli/mysqli_exception.c  -fPIC -DPIC -o .libs/mysqli_exception.o
/bin/bash /usr/src/php/ext/mysqli/libtool --mode=compile cc -DZEND_ENABLE_STATIC_TSRMLS_CACHE=1 -I. -I/usr/src/php/ext/mysqli -DPHP_ATOM_INC -I/usr/src/php/ext/mysqli/include -I/usr/src/php/ext/mysqli/main -I/usr/src/php/ext/mysqli -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib  -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H  -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64   -c /usr/src/php/ext/mysqli/mysqli_result_iterator.c -o mysqli_result_iterator.lo
 cc -DZEND_ENABLE_STATIC_TSRMLS_CACHE=1 -I. -I/usr/src/php/ext/mysqli -DPHP_ATOM_INC -I/usr/src/php/ext/mysqli/include -I/usr/src/php/ext/mysqli/main -I/usr/src/php/ext/mysqli -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -c /usr/src/php/ext/mysqli/mysqli_result_iterator.c  -fPIC -DPIC -o .libs/mysqli_result_iterator.o
/bin/bash /usr/src/php/ext/mysqli/libtool --mode=link cc -DPHP_ATOM_INC -I/usr/src/php/ext/mysqli/include -I/usr/src/php/ext/mysqli/main -I/usr/src/php/ext/mysqli -I/usr/local/include/php -I/usr/local/include/php/main -I/usr/local/include/php/TSRM -I/usr/local/include/php/Zend -I/usr/local/include/php/ext -I/usr/local/include/php/ext/date/lib  -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -DHAVE_CONFIG_H  -fstack-protector-strong -fpic -fpie -O2 -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -Wl,-O1 -pie  -o mysqli.la -export-dynamic -avoid-version -prefer-pic -module -rpath /usr/src/php/ext/mysqli/modules  mysqli.lo mysqli_api.lo mysqli_prop.lo mysqli_nonapi.lo mysqli_fe.lo mysqli_report.lo mysqli_driver.lo mysqli_warning.lo mysqli_exception.lo mysqli_result_iterator.lo
cc -shared  .libs/mysqli.o .libs/mysqli_api.o .libs/mysqli_prop.o .libs/mysqli_nonapi.o .libs/mysqli_fe.o .libs/mysqli_report.o .libs/mysqli_driver.o .libs/mysqli_warning.o .libs/mysqli_exception.o .libs/mysqli_result_iterator.o   -Wl,-O1 -Wl,-soname -Wl,mysqli.so -o .libs/mysqli.so
creating mysqli.la
(cd .libs && rm -f mysqli.la && ln -s ../mysqli.la mysqli.la)
/bin/bash /usr/src/php/ext/mysqli/libtool --mode=install cp ./mysqli.la /usr/src/php/ext/mysqli/modules
cp ./.libs/mysqli.so /usr/src/php/ext/mysqli/modules/mysqli.so
cp ./.libs/mysqli.lai /usr/src/php/ext/mysqli/modules/mysqli.la
PATH="$PATH:/sbin" ldconfig -n /usr/src/php/ext/mysqli/modules
----------------------------------------------------------------------
Libraries have been installed in:
   /usr/src/php/ext/mysqli/modules

If you ever happen to want to link against installed libraries
in a given directory, LIBDIR, you must either use libtool, and
specify the full pathname of the library, or use the `-LLIBDIR'
flag during linking and do at least one of the following:
   - add LIBDIR to the `LD_LIBRARY_PATH' environment variable
     during execution
   - add LIBDIR to the `LD_RUN_PATH' environment variable
     during linking
   - use the `-Wl,--rpath -Wl,LIBDIR' linker flag
   - have your system administrator add LIBDIR to `/etc/ld.so.conf'

See any operating system documentation about shared libraries for
more information, such as the ld(1) and ld.so(8) manual pages.
----------------------------------------------------------------------

Build complete.
Don't forget to run 'make test'.

Installing shared extensions:     /usr/local/lib/php/extensions/no-debug-non-zts-20180731/
Installing header files:          /usr/local/include/php/
find . -name \*.gcno -o -name \*.gcda | xargs rm -f
find . -name \*.lo -o -name \*.o | xargs rm -f
find . -name \*.la -o -name \*.a | xargs rm -f
find . -name \*.so | xargs rm -f
find . -name .libs -a -type d|xargs rm -rf
rm -f libphp.la      modules/* libs/*

warning: mysqli (mysqli) is already loaded!

Removing intermediate container 2cc9f8f90440
 ---> 9a21e9ff2f72
Step 4/6 : RUN mkdir /var/www/html/images
 ---> Running in c94e6dedc05b
Removing intermediate container c94e6dedc05b
 ---> 398e48ed6b74
Step 5/6 : RUN chmod 777 /var/www/html/images
 ---> Running in c6c84fd217ad
Removing intermediate container c6c84fd217ad
 ---> b9435bb4b7be
Step 6/6 : COPY ./php/ /var/www/html/
 ---> 52355dc07b4f

Successfully built 52355dc07b4f
Successfully tagged bolum68_websrv:latest
WARNING: Image for service websrv was built because it did not already exist. To rebuild this image you must use `docker-compose build` or `docker-compose up --build`.
Creating bolum68_mysqldb_1 ... done
Creating bolum68_websrv_1  ... done
Attaching to bolum68_mysqldb_1, bolum68_websrv_1
mysqldb_1  | 2020-12-31 12:38:35+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 5.7.28-1debian9 started.
mysqldb_1  | 2020-12-31 12:38:35+00:00 [Note] [Entrypoint]: Switching to dedicated user 'mysql'
mysqldb_1  | 2020-12-31 12:38:35+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 5.7.28-1debian9 started.
mysqldb_1  | 2020-12-31 12:38:36+00:00 [Note] [Entrypoint]: Initializing database files
websrv_1   | AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 172.20.0.3. Set the 'ServerName' directive globally to suppress this message
websrv_1   | AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 172.20.0.3. Set the 'ServerName' directive globally to suppress this message
websrv_1   | [Thu Dec 31 12:38:36.260989 2020] [mpm_prefork:notice] [pid 1] AH00163: Apache/2.4.38 (Debian) PHP/7.3.25 configured -- resuming normal operations
mysqldb_1  | 2020-12-31T12:38:36.106042Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).
mysqldb_1  | 2020-12-31T12:38:36.461949Z 0 [Warning] InnoDB: New log files created, LSN=45790
mysqldb_1  | 2020-12-31T12:38:36.530371Z 0 [Warning] InnoDB: Creating foreign key constraint system tables.
mysqldb_1  | 2020-12-31T12:38:36.704007Z 0 [Warning] No existing UUID has been found, so we assume that this is the first time that this server has been started. Generating a new UUID: 1a2058e9-4b65-11eb-95c3-0242ac140002.
mysqldb_1  | 2020-12-31T12:38:36.705570Z 0 [Warning] Gtid table is not ready to be used. Table 'mysql.gtid_executed' cannot be opened.
mysqldb_1  | 2020-12-31T12:38:37.394427Z 0 [Warning] CA certificate ca.pem is self signed.
mysqldb_1  | 2020-12-31T12:38:38.076353Z 1 [Warning] root@localhost is created with an empty password ! Please consider switching off the --initialize-insecure option.
mysqldb_1  | 2020-12-31 12:38:40+00:00 [Note] [Entrypoint]: Database files initialized
mysqldb_1  | 2020-12-31 12:38:40+00:00 [Note] [Entrypoint]: Starting temporary server
mysqldb_1  | 2020-12-31 12:38:40+00:00 [Note] [Entrypoint]: Waiting for server startup
mysqldb_1  | 2020-12-31T12:38:40.745875Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).
mysqldb_1  | 2020-12-31T12:38:40.748069Z 0 [Note] mysqld (mysqld 5.7.28) starting as process 79 ...
mysqldb_1  | 2020-12-31T12:38:40.766474Z 0 [Note] InnoDB: PUNCH HOLE support available
mysqldb_1  | 2020-12-31T12:38:40.766508Z 0 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins
mysqldb_1  | 2020-12-31T12:38:40.766515Z 0 [Note] InnoDB: Uses event mutexes
mysqldb_1  | 2020-12-31T12:38:40.766521Z 0 [Note] InnoDB: GCC builtin __atomic_thread_fence() is used for memory barrier
mysqldb_1  | 2020-12-31T12:38:40.766526Z 0 [Note] InnoDB: Compressed tables use zlib 1.2.11
mysqldb_1  | 2020-12-31T12:38:40.766531Z 0 [Note] InnoDB: Using Linux native AIO
mysqldb_1  | 2020-12-31T12:38:40.768510Z 0 [Note] InnoDB: Number of pools: 1
mysqldb_1  | 2020-12-31T12:38:40.793470Z 0 [Note] InnoDB: Using CPU crc32 instructions
mysqldb_1  | 2020-12-31T12:38:40.811271Z 0 [Note] InnoDB: Initializing buffer pool, total size = 128M, instances = 1, chunk size = 128M
mysqldb_1  | 2020-12-31T12:38:40.855485Z 0 [Note] InnoDB: Completed initialization of buffer pool
mysqldb_1  | 2020-12-31T12:38:40.869064Z 0 [Note] InnoDB: If the mysqld execution user is authorized, page cleaner thread priority can be changed. See the man page of setpriority().
mysqldb_1  | 2020-12-31T12:38:40.888250Z 0 [Note] InnoDB: Highest supported file format is Barracuda.
mysqldb_1  | 2020-12-31T12:38:40.919842Z 0 [Note] InnoDB: Creating shared tablespace for temporary tables
mysqldb_1  | 2020-12-31T12:38:40.920250Z 0 [Note] InnoDB: Setting file './ibtmp1' size to 12 MB. Physically writing the file full; Please wait ...
mysqldb_1  | 2020-12-31T12:38:40.964651Z 0 [Note] InnoDB: File './ibtmp1' size is now 12 MB.
mysqldb_1  | 2020-12-31T12:38:40.969635Z 0 [Note] InnoDB: 96 redo rollback segment(s) found. 96 redo rollback segment(s) are active.
mysqldb_1  | 2020-12-31T12:38:40.975564Z 0 [Note] InnoDB: 32 non-redo rollback segment(s) are active.
mysqldb_1  | 2020-12-31T12:38:40.976624Z 0 [Note] InnoDB: Waiting for purge to start
mysqldb_1  | 2020-12-31T12:38:41.027625Z 0 [Note] InnoDB: 5.7.28 started; log sequence number 2628227
mysqldb_1  | 2020-12-31T12:38:41.028550Z 0 [Note] Plugin 'FEDERATED' is disabled.
mysqldb_1  | 2020-12-31T12:38:41.034923Z 0 [Note] InnoDB: Loading buffer pool(s) from /var/lib/mysql/ib_buffer_pool
mysqldb_1  | 2020-12-31T12:38:41.058445Z 0 [Note] InnoDB: Buffer pool(s) load completed at 201231 12:38:41
mysqldb_1  | 2020-12-31T12:38:41.067046Z 0 [Note] Found ca.pem, server-cert.pem and server-key.pem in data directory. Trying to enable SSL support using them.
mysqldb_1  | 2020-12-31T12:38:41.067454Z 0 [Note] Skipping generation of SSL certificates as certificate files are present in data directory.
mysqldb_1  | 2020-12-31T12:38:41.068852Z 0 [Warning] CA certificate ca.pem is self signed.
mysqldb_1  | 2020-12-31T12:38:41.070728Z 0 [Note] Skipping generation of RSA key pair as key files are present in data directory.
mysqldb_1  | 2020-12-31T12:38:41.085272Z 0 [Warning] Insecure configuration for --pid-file: Location '/var/run/mysqld' in the path is accessible to all OS users. Consider choosing a different directory.
mysqldb_1  | 2020-12-31T12:38:41.114900Z 0 [Note] Event Scheduler: Loaded 0 events
mysqldb_1  | 2020-12-31T12:38:41.115506Z 0 [Note] mysqld: ready for connections.
mysqldb_1  | Version: '5.7.28'  socket: '/var/run/mysqld/mysqld.sock'  port: 0  MySQL Community Server (GPL)
mysqldb_1  | 2020-12-31 12:38:41+00:00 [Note] [Entrypoint]: Temporary server started.
mysqldb_1  | Warning: Unable to load '/usr/share/zoneinfo/iso3166.tab' as time zone. Skipping it.
mysqldb_1  | Warning: Unable to load '/usr/share/zoneinfo/leap-seconds.list' as time zone. Skipping it.
mysqldb_1  | Warning: Unable to load '/usr/share/zoneinfo/zone.tab' as time zone. Skipping it.
mysqldb_1  | Warning: Unable to load '/usr/share/zoneinfo/zone1970.tab' as time zone. Skipping it.
mysqldb_1  | 2020-12-31 12:38:44+00:00 [Note] [Entrypoint]: Creating database proje
mysqldb_1  | 2020-12-31 12:38:44+00:00 [Note] [Entrypoint]: Creating user projemaster
mysqldb_1  | 2020-12-31 12:38:44+00:00 [Note] [Entrypoint]: Giving user projemaster access to schema proje
mysqldb_1  |
mysqldb_1  | 2020-12-31 12:38:44+00:00 [Note] [Entrypoint]: /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/tabloyarat.sql
mysqldb_1  |
mysqldb_1  |
mysqldb_1  | 2020-12-31 12:38:44+00:00 [Note] [Entrypoint]: Stopping temporary server
mysqldb_1  | 2020-12-31T12:38:44.963459Z 0 [Note] Giving 0 client threads a chance to die gracefully
mysqldb_1  | 2020-12-31T12:38:44.963802Z 0 [Note] Shutting down slave threads
mysqldb_1  | 2020-12-31T12:38:44.964249Z 0 [Note] Forcefully disconnecting 0 remaining clients
mysqldb_1  | 2020-12-31T12:38:44.964610Z 0 [Note] Event Scheduler: Purging the queue. 0 events
mysqldb_1  | 2020-12-31T12:38:44.965141Z 0 [Note] Binlog end
mysqldb_1  | 2020-12-31T12:38:44.982051Z 0 [Note] Shutting down plugin 'ngram'
mysqldb_1  | 2020-12-31T12:38:44.989192Z 0 [Note] Shutting down plugin 'partition'
mysqldb_1  | 2020-12-31T12:38:44.989552Z 0 [Note] Shutting down plugin 'BLACKHOLE'
mysqldb_1  | 2020-12-31T12:38:44.990259Z 0 [Note] Shutting down plugin 'ARCHIVE'
mysqldb_1  | 2020-12-31T12:38:44.990512Z 0 [Note] Shutting down plugin 'PERFORMANCE_SCHEMA'
mysqldb_1  | 2020-12-31T12:38:44.990623Z 0 [Note] Shutting down plugin 'MRG_MYISAM'
mysqldb_1  | 2020-12-31T12:38:44.991558Z 0 [Note] Shutting down plugin 'MyISAM'
mysqldb_1  | 2020-12-31T12:38:44.991912Z 0 [Note] Shutting down plugin 'INNODB_SYS_VIRTUAL'
mysqldb_1  | 2020-12-31T12:38:44.992319Z 0 [Note] Shutting down plugin 'INNODB_SYS_DATAFILES'
mysqldb_1  | 2020-12-31T12:38:44.992378Z 0 [Note] Shutting down plugin 'INNODB_SYS_TABLESPACES'
mysqldb_1  | 2020-12-31T12:38:44.992399Z 0 [Note] Shutting down plugin 'INNODB_SYS_FOREIGN_COLS'
mysqldb_1  | 2020-12-31T12:38:44.992415Z 0 [Note] Shutting down plugin 'INNODB_SYS_FOREIGN'
mysqldb_1  | 2020-12-31T12:38:44.992431Z 0 [Note] Shutting down plugin 'INNODB_SYS_FIELDS'
mysqldb_1  | 2020-12-31T12:38:44.992447Z 0 [Note] Shutting down plugin 'INNODB_SYS_COLUMNS'
mysqldb_1  | 2020-12-31T12:38:44.992464Z 0 [Note] Shutting down plugin 'INNODB_SYS_INDEXES'
mysqldb_1  | 2020-12-31T12:38:44.992479Z 0 [Note] Shutting down plugin 'INNODB_SYS_TABLESTATS'
mysqldb_1  | 2020-12-31T12:38:44.992495Z 0 [Note] Shutting down plugin 'INNODB_SYS_TABLES'
mysqldb_1  | 2020-12-31T12:38:44.992511Z 0 [Note] Shutting down plugin 'INNODB_FT_INDEX_TABLE'
mysqldb_1  | 2020-12-31T12:38:44.992527Z 0 [Note] Shutting down plugin 'INNODB_FT_INDEX_CACHE'
mysqldb_1  | 2020-12-31T12:38:44.992543Z 0 [Note] Shutting down plugin 'INNODB_FT_CONFIG'
mysqldb_1  | 2020-12-31T12:38:44.992563Z 0 [Note] Shutting down plugin 'INNODB_FT_BEING_DELETED'
mysqldb_1  | 2020-12-31T12:38:44.992590Z 0 [Note] Shutting down plugin 'INNODB_FT_DELETED'
mysqldb_1  | 2020-12-31T12:38:44.992608Z 0 [Note] Shutting down plugin 'INNODB_FT_DEFAULT_STOPWORD'
mysqldb_1  | 2020-12-31T12:38:44.992623Z 0 [Note] Shutting down plugin 'INNODB_METRICS'
mysqldb_1  | 2020-12-31T12:38:45.009780Z 0 [Note] Shutting down plugin 'INNODB_TEMP_TABLE_INFO'
mysqldb_1  | 2020-12-31T12:38:45.014879Z 0 [Note] Shutting down plugin 'INNODB_BUFFER_POOL_STATS'
mysqldb_1  | 2020-12-31T12:38:45.027485Z 0 [Note] Shutting down plugin 'INNODB_BUFFER_PAGE_LRU'
mysqldb_1  | 2020-12-31T12:38:45.027655Z 0 [Note] Shutting down plugin 'INNODB_BUFFER_PAGE'
mysqldb_1  | 2020-12-31T12:38:45.027892Z 0 [Note] Shutting down plugin 'INNODB_CMP_PER_INDEX_RESET'
mysqldb_1  | 2020-12-31T12:38:45.028167Z 0 [Note] Shutting down plugin 'INNODB_CMP_PER_INDEX'
mysqldb_1  | 2020-12-31T12:38:45.028273Z 0 [Note] Shutting down plugin 'INNODB_CMPMEM_RESET'
mysqldb_1  | 2020-12-31T12:38:45.028539Z 0 [Note] Shutting down plugin 'INNODB_CMPMEM'
mysqldb_1  | 2020-12-31T12:38:45.028813Z 0 [Note] Shutting down plugin 'INNODB_CMP_RESET'
mysqldb_1  | 2020-12-31T12:38:45.032338Z 0 [Note] Shutting down plugin 'INNODB_CMP'
mysqldb_1  | 2020-12-31T12:38:45.033325Z 0 [Note] Shutting down plugin 'INNODB_LOCK_WAITS'
mysqldb_1  | 2020-12-31T12:38:45.033515Z 0 [Note] Shutting down plugin 'INNODB_LOCKS'
mysqldb_1  | 2020-12-31T12:38:45.033817Z 0 [Note] Shutting down plugin 'INNODB_TRX'
mysqldb_1  | 2020-12-31T12:38:45.033950Z 0 [Note] Shutting down plugin 'InnoDB'
mysqldb_1  | 2020-12-31T12:38:45.036270Z 0 [Note] InnoDB: FTS optimize thread exiting.
mysqldb_1  | 2020-12-31T12:38:45.038977Z 0 [Note] InnoDB: Starting shutdown...
mysqldb_1  | 2020-12-31T12:38:45.147417Z 0 [Note] InnoDB: Dumping buffer pool(s) to /var/lib/mysql/ib_buffer_pool
mysqldb_1  | 2020-12-31T12:38:45.159730Z 0 [Note] InnoDB: Buffer pool(s) dump completed at 201231 12:38:45
mysqldb_1  | 2020-12-31T12:38:46.891921Z 0 [Note] InnoDB: Shutdown completed; log sequence number 12444399
mysqldb_1  | 2020-12-31T12:38:46.894954Z 0 [Note] InnoDB: Removed temporary tablespace data file: "ibtmp1"
mysqldb_1  | 2020-12-31T12:38:46.895580Z 0 [Note] Shutting down plugin 'MEMORY'
mysqldb_1  | 2020-12-31T12:38:46.895914Z 0 [Note] Shutting down plugin 'CSV'
mysqldb_1  | 2020-12-31T12:38:46.896519Z 0 [Note] Shutting down plugin 'sha256_password'
mysqldb_1  | 2020-12-31T12:38:46.897015Z 0 [Note] Shutting down plugin 'mysql_native_password'
mysqldb_1  | 2020-12-31T12:38:46.910450Z 0 [Note] Shutting down plugin 'binlog'
mysqldb_1  | 2020-12-31T12:38:46.930912Z 0 [Note] mysqld: Shutdown complete
mysqldb_1  |
mysqldb_1  | 2020-12-31 12:38:46+00:00 [Note] [Entrypoint]: Temporary server stopped
mysqldb_1  |
mysqldb_1  | 2020-12-31 12:38:47+00:00 [Note] [Entrypoint]: MySQL init process done. Ready for start up.
mysqldb_1  |
mysqldb_1  | 2020-12-31T12:38:47.267298Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).
mysqldb_1  | 2020-12-31T12:38:47.270612Z 0 [Note] mysqld (mysqld 5.7.28) starting as process 1 ...
mysqldb_1  | 2020-12-31T12:38:47.276616Z 0 [Note] InnoDB: PUNCH HOLE support available
mysqldb_1  | 2020-12-31T12:38:47.278715Z 0 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins
mysqldb_1  | 2020-12-31T12:38:47.280323Z 0 [Note] InnoDB: Uses event mutexes
mysqldb_1  | 2020-12-31T12:38:47.280733Z 0 [Note] InnoDB: GCC builtin __atomic_thread_fence() is used for memory barrier
mysqldb_1  | 2020-12-31T12:38:47.280982Z 0 [Note] InnoDB: Compressed tables use zlib 1.2.11
mysqldb_1  | 2020-12-31T12:38:47.281535Z 0 [Note] InnoDB: Using Linux native AIO
mysqldb_1  | 2020-12-31T12:38:47.289691Z 0 [Note] InnoDB: Number of pools: 1
mysqldb_1  | 2020-12-31T12:38:47.297037Z 0 [Note] InnoDB: Using CPU crc32 instructions
mysqldb_1  | 2020-12-31T12:38:47.331236Z 0 [Note] InnoDB: Initializing buffer pool, total size = 128M, instances = 1, chunk size = 128M
mysqldb_1  | 2020-12-31T12:38:47.372996Z 0 [Note] InnoDB: Completed initialization of buffer pool
mysqldb_1  | 2020-12-31T12:38:47.380871Z 0 [Note] InnoDB: If the mysqld execution user is authorized, page cleaner thread priority can be changed. See the man page of setpriority().
mysqldb_1  | 2020-12-31T12:38:47.392881Z 0 [Note] InnoDB: Highest supported file format is Barracuda.
mysqldb_1  | 2020-12-31T12:38:47.412318Z 0 [Note] InnoDB: Creating shared tablespace for temporary tables
mysqldb_1  | 2020-12-31T12:38:47.412812Z 0 [Note] InnoDB: Setting file './ibtmp1' size to 12 MB. Physically writing the file full; Please wait ...
mysqldb_1  | 2020-12-31T12:38:47.460361Z 0 [Note] InnoDB: File './ibtmp1' size is now 12 MB.
mysqldb_1  | 2020-12-31T12:38:47.462305Z 0 [Note] InnoDB: 96 redo rollback segment(s) found. 96 redo rollback segment(s) are active.
mysqldb_1  | 2020-12-31T12:38:47.462771Z 0 [Note] InnoDB: 32 non-redo rollback segment(s) are active.
mysqldb_1  | 2020-12-31T12:38:47.468917Z 0 [Note] InnoDB: 5.7.28 started; log sequence number 12444399
mysqldb_1  | 2020-12-31T12:38:47.473227Z 0 [Note] Plugin 'FEDERATED' is disabled.
mysqldb_1  | 2020-12-31T12:38:47.477737Z 0 [Note] InnoDB: Loading buffer pool(s) from /var/lib/mysql/ib_buffer_pool
mysqldb_1  | 2020-12-31T12:38:47.520070Z 0 [Note] InnoDB: Buffer pool(s) load completed at 201231 12:38:47
mysqldb_1  | 2020-12-31T12:38:47.527023Z 0 [Note] Found ca.pem, server-cert.pem and server-key.pem in data directory. Trying to enable SSL support using them.
mysqldb_1  | 2020-12-31T12:38:47.527463Z 0 [Note] Skipping generation of SSL certificates as certificate files are present in data directory.
mysqldb_1  | 2020-12-31T12:38:47.542045Z 0 [Warning] CA certificate ca.pem is self signed.
mysqldb_1  | 2020-12-31T12:38:47.543397Z 0 [Note] Skipping generation of RSA key pair as key files are present in data directory.
mysqldb_1  | 2020-12-31T12:38:47.557247Z 0 [Note] Server hostname (bind-address): '*'; port: 3306
mysqldb_1  | 2020-12-31T12:38:47.559995Z 0 [Note] IPv6 is available.
mysqldb_1  | 2020-12-31T12:38:47.562644Z 0 [Note]   - '::' resolves to '::';
mysqldb_1  | 2020-12-31T12:38:47.575286Z 0 [Note] Server socket created on IP: '::'.
mysqldb_1  | 2020-12-31T12:38:47.587593Z 0 [Warning] Insecure configuration for --pid-file: Location '/var/run/mysqld' in the path is accessible to all OS users. Consider choosing a different directory.
mysqldb_1  | 2020-12-31T12:38:47.623776Z 0 [Note] Event Scheduler: Loaded 0 events
Gracefully stopping... (press Ctrl+C again to force)
Stopping bolum68_websrv_1  ... done
Stopping bolum68_mysqldb_1 ... done

PS C:\AdanZyeDocker\kisim6\bolum68> docker-compose down
Removing bolum68_websrv_1  ... done
Removing bolum68_mysqldb_1 ... done
Removing network bolum68_webnet

**Image file build just one time when we run up command. If we need to update image we must build it before.**

PS C:\AdanZyeDocker\kisim6\bolum68> docker-compose up
Creating network "bolum68_webnet" with driver "bridge"
Creating bolum68_mysqldb_1 ... done
Creating bolum68_websrv_1  ... done
Attaching to bolum68_mysqldb_1, bolum68_websrv_1
mysqldb_1  | 2020-12-31 12:39:39+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 5.7.28-1debian9 started.
mysqldb_1  | 2020-12-31 12:39:39+00:00 [Note] [Entrypoint]: Switching to dedicated user 'mysql'
mysqldb_1  | 2020-12-31 12:39:39+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 5.7.28-1debian9 started.
mysqldb_1  | 2020-12-31 12:39:39+00:00 [Note] [Entrypoint]: Initializing database files
websrv_1   | AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 172.21.0.3. Set the 'ServerName' directive globally to suppress this message
mysqldb_1  | 2020-12-31T12:39:39.719817Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).
websrv_1   | AH00558: apache2: Could not reliably determine the server's fully qualified domain name, using 172.21.0.3. Set the 'ServerName' directive globally to suppress this message
websrv_1   | [Thu Dec 31 12:39:40.276369 2020] [mpm_prefork:notice] [pid 1] AH00163: Apache/2.4.38 (Debian) PHP/7.3.25 configured -- resuming normal operations
mysqldb_1  | 2020-12-31T12:39:40.253692Z 0 [Warning] InnoDB: New log files created, LSN=45790
mysqldb_1  | 2020-12-31T12:39:40.333463Z 0 [Warning] InnoDB: Creating foreign key constraint system tables.
mysqldb_1  | 2020-12-31T12:39:40.396278Z 0 [Warning] No existing UUID has been found, so we assume that this is the first time that this server has been started. Generating a new UUID: 401704e6-4b65-11eb-bfc4-0242ac150002.
mysqldb_1  | 2020-12-31T12:39:40.401259Z 0 [Warning] Gtid table is not ready to be used. Table 'mysql.gtid_executed' cannot be opened.
mysqldb_1  | 2020-12-31T12:39:41.270088Z 0 [Warning] CA certificate ca.pem is self signed.
mysqldb_1  | 2020-12-31T12:39:41.517655Z 1 [Warning] root@localhost is created with an empty password ! Please consider switching off the --initialize-insecure option.
mysqldb_1  | 2020-12-31 12:39:43+00:00 [Note] [Entrypoint]: Database files initialized
mysqldb_1  | 2020-12-31 12:39:43+00:00 [Note] [Entrypoint]: Starting temporary server
mysqldb_1  | 2020-12-31 12:39:43+00:00 [Note] [Entrypoint]: Waiting for server startup
mysqldb_1  | 2020-12-31T12:39:43.899881Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).
mysqldb_1  | 2020-12-31T12:39:43.903217Z 0 [Note] mysqld (mysqld 5.7.28) starting as process 78 ...
mysqldb_1  | 2020-12-31T12:39:43.913465Z 0 [Note] InnoDB: PUNCH HOLE support available
mysqldb_1  | 2020-12-31T12:39:43.913987Z 0 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins
mysqldb_1  | 2020-12-31T12:39:43.914837Z 0 [Note] InnoDB: Uses event mutexes
mysqldb_1  | 2020-12-31T12:39:43.916109Z 0 [Note] InnoDB: GCC builtin __atomic_thread_fence() is used for memory barrier
mysqldb_1  | 2020-12-31T12:39:43.920062Z 0 [Note] InnoDB: Compressed tables use zlib 1.2.11
mysqldb_1  | 2020-12-31T12:39:43.920732Z 0 [Note] InnoDB: Using Linux native AIO
mysqldb_1  | 2020-12-31T12:39:43.938983Z 0 [Note] InnoDB: Number of pools: 1
mysqldb_1  | 2020-12-31T12:39:43.942665Z 0 [Note] InnoDB: Using CPU crc32 instructions
mysqldb_1  | 2020-12-31T12:39:43.979573Z 0 [Note] InnoDB: Initializing buffer pool, total size = 128M, instances = 1, chunk size = 128M
mysqldb_1  | 2020-12-31T12:39:44.003090Z 0 [Note] InnoDB: Completed initialization of buffer pool
mysqldb_1  | 2020-12-31T12:39:44.016984Z 0 [Note] InnoDB: If the mysqld execution user is authorized, page cleaner thread priority can be changed. See the man page of setpriority().
mysqldb_1  | 2020-12-31T12:39:44.037698Z 0 [Note] InnoDB: Highest supported file format is Barracuda.
mysqldb_1  | 2020-12-31T12:39:44.074039Z 0 [Note] InnoDB: Creating shared tablespace for temporary tables
mysqldb_1  | 2020-12-31T12:39:44.074498Z 0 [Note] InnoDB: Setting file './ibtmp1' size to 12 MB. Physically writing the file full; Please wait ...
mysqldb_1  | 2020-12-31T12:39:44.124149Z 0 [Note] InnoDB: File './ibtmp1' size is now 12 MB.
mysqldb_1  | 2020-12-31T12:39:44.125906Z 0 [Note] InnoDB: 96 redo rollback segment(s) found. 96 redo rollback segment(s) are active.
mysqldb_1  | 2020-12-31T12:39:44.141919Z 0 [Note] InnoDB: 32 non-redo rollback segment(s) are active.
mysqldb_1  | 2020-12-31T12:39:44.143755Z 0 [Note] InnoDB: Waiting for purge to start
mysqldb_1  | 2020-12-31T12:39:44.194967Z 0 [Note] InnoDB: 5.7.28 started; log sequence number 2628227
mysqldb_1  | 2020-12-31T12:39:44.195547Z 0 [Note] Plugin 'FEDERATED' is disabled.
mysqldb_1  | 2020-12-31T12:39:44.203211Z 0 [Note] InnoDB: Loading buffer pool(s) from /var/lib/mysql/ib_buffer_pool
mysqldb_1  | 2020-12-31T12:39:44.235346Z 0 [Note] InnoDB: Buffer pool(s) load completed at 201231 12:39:44
mysqldb_1  | 2020-12-31T12:39:44.248295Z 0 [Note] Found ca.pem, server-cert.pem and server-key.pem in data directory. Trying to enable SSL support using them.
mysqldb_1  | 2020-12-31T12:39:44.249253Z 0 [Note] Skipping generation of SSL certificates as certificate files are present in data directory.
mysqldb_1  | 2020-12-31T12:39:44.251881Z 0 [Warning] CA certificate ca.pem is self signed.
mysqldb_1  | 2020-12-31T12:39:44.254841Z 0 [Note] Skipping generation of RSA key pair as key files are present in data directory.
mysqldb_1  | 2020-12-31T12:39:44.282430Z 0 [Warning] Insecure configuration for --pid-file: Location '/var/run/mysqld' in the path is accessible to all OS users. Consider choosing a different directory.
mysqldb_1  | 2020-12-31T12:39:44.314018Z 0 [Note] Event Scheduler: Loaded 0 events
mysqldb_1  | 2020-12-31T12:39:44.314959Z 0 [Note] mysqld: ready for connections.
mysqldb_1  | Version: '5.7.28'  socket: '/var/run/mysqld/mysqld.sock'  port: 0  MySQL Community Server (GPL)
mysqldb_1  | 2020-12-31 12:39:44+00:00 [Note] [Entrypoint]: Temporary server started.
mysqldb_1  | Warning: Unable to load '/usr/share/zoneinfo/iso3166.tab' as time zone. Skipping it.
mysqldb_1  | Warning: Unable to load '/usr/share/zoneinfo/leap-seconds.list' as time zone. Skipping it.
mysqldb_1  | Warning: Unable to load '/usr/share/zoneinfo/zone.tab' as time zone. Skipping it.
mysqldb_1  | Warning: Unable to load '/usr/share/zoneinfo/zone1970.tab' as time zone. Skipping it.
mysqldb_1  | 2020-12-31 12:39:47+00:00 [Note] [Entrypoint]: Creating database proje
mysqldb_1  | 2020-12-31 12:39:47+00:00 [Note] [Entrypoint]: Creating user projemaster
mysqldb_1  | 2020-12-31 12:39:47+00:00 [Note] [Entrypoint]: Giving user projemaster access to schema proje
mysqldb_1  |
mysqldb_1  | 2020-12-31 12:39:47+00:00 [Note] [Entrypoint]: /usr/local/bin/docker-entrypoint.sh: running /docker-entrypoint-initdb.d/tabloyarat.sql
mysqldb_1  |
mysqldb_1  |
mysqldb_1  | 2020-12-31 12:39:47+00:00 [Note] [Entrypoint]: Stopping temporary server
mysqldb_1  | 2020-12-31T12:39:47.998817Z 0 [Note] Giving 0 client threads a chance to die gracefully
mysqldb_1  | 2020-12-31T12:39:47.999186Z 0 [Note] Shutting down slave threads
mysqldb_1  | 2020-12-31T12:39:47.999817Z 0 [Note] Forcefully disconnecting 0 remaining clients
mysqldb_1  | 2020-12-31T12:39:48.000294Z 0 [Note] Event Scheduler: Purging the queue. 0 events
mysqldb_1  | 2020-12-31T12:39:48.000827Z 0 [Note] Binlog end
mysqldb_1  | 2020-12-31T12:39:48.009434Z 0 [Note] Shutting down plugin 'ngram'
mysqldb_1  | 2020-12-31T12:39:48.013294Z 0 [Note] Shutting down plugin 'partition'
mysqldb_1  | 2020-12-31T12:39:48.014334Z 0 [Note] Shutting down plugin 'BLACKHOLE'
mysqldb_1  | 2020-12-31T12:39:48.015579Z 0 [Note] Shutting down plugin 'ARCHIVE'
mysqldb_1  | 2020-12-31T12:39:48.017725Z 0 [Note] Shutting down plugin 'PERFORMANCE_SCHEMA'
mysqldb_1  | 2020-12-31T12:39:48.022006Z 0 [Note] Shutting down plugin 'MRG_MYISAM'
mysqldb_1  | 2020-12-31T12:39:48.026995Z 0 [Note] Shutting down plugin 'MyISAM'
mysqldb_1  | 2020-12-31T12:39:48.038898Z 0 [Note] Shutting down plugin 'INNODB_SYS_VIRTUAL'
mysqldb_1  | 2020-12-31T12:39:48.043544Z 0 [Note] Shutting down plugin 'INNODB_SYS_DATAFILES'
mysqldb_1  | 2020-12-31T12:39:48.044873Z 0 [Note] Shutting down plugin 'INNODB_SYS_TABLESPACES'
mysqldb_1  | 2020-12-31T12:39:48.046792Z 0 [Note] Shutting down plugin 'INNODB_SYS_FOREIGN_COLS'
mysqldb_1  | 2020-12-31T12:39:48.052738Z 0 [Note] Shutting down plugin 'INNODB_SYS_FOREIGN'
mysqldb_1  | 2020-12-31T12:39:48.061279Z 0 [Note] Shutting down plugin 'INNODB_SYS_FIELDS'
mysqldb_1  | 2020-12-31T12:39:48.061365Z 0 [Note] Shutting down plugin 'INNODB_SYS_COLUMNS'
mysqldb_1  | 2020-12-31T12:39:48.061375Z 0 [Note] Shutting down plugin 'INNODB_SYS_INDEXES'
mysqldb_1  | 2020-12-31T12:39:48.061381Z 0 [Note] Shutting down plugin 'INNODB_SYS_TABLESTATS'
mysqldb_1  | 2020-12-31T12:39:48.061388Z 0 [Note] Shutting down plugin 'INNODB_SYS_TABLES'
mysqldb_1  | 2020-12-31T12:39:48.061394Z 0 [Note] Shutting down plugin 'INNODB_FT_INDEX_TABLE'
mysqldb_1  | 2020-12-31T12:39:48.061400Z 0 [Note] Shutting down plugin 'INNODB_FT_INDEX_CACHE'
mysqldb_1  | 2020-12-31T12:39:48.061406Z 0 [Note] Shutting down plugin 'INNODB_FT_CONFIG'
mysqldb_1  | 2020-12-31T12:39:48.061417Z 0 [Note] Shutting down plugin 'INNODB_FT_BEING_DELETED'
mysqldb_1  | 2020-12-31T12:39:48.061426Z 0 [Note] Shutting down plugin 'INNODB_FT_DELETED'
mysqldb_1  | 2020-12-31T12:39:48.061437Z 0 [Note] Shutting down plugin 'INNODB_FT_DEFAULT_STOPWORD'
mysqldb_1  | 2020-12-31T12:39:48.061450Z 0 [Note] Shutting down plugin 'INNODB_METRICS'
mysqldb_1  | 2020-12-31T12:39:48.061462Z 0 [Note] Shutting down plugin 'INNODB_TEMP_TABLE_INFO'
mysqldb_1  | 2020-12-31T12:39:48.061474Z 0 [Note] Shutting down plugin 'INNODB_BUFFER_POOL_STATS'
mysqldb_1  | 2020-12-31T12:39:48.061485Z 0 [Note] Shutting down plugin 'INNODB_BUFFER_PAGE_LRU'
mysqldb_1  | 2020-12-31T12:39:48.061499Z 0 [Note] Shutting down plugin 'INNODB_BUFFER_PAGE'
mysqldb_1  | 2020-12-31T12:39:48.061520Z 0 [Note] Shutting down plugin 'INNODB_CMP_PER_INDEX_RESET'
mysqldb_1  | 2020-12-31T12:39:48.061534Z 0 [Note] Shutting down plugin 'INNODB_CMP_PER_INDEX'
mysqldb_1  | 2020-12-31T12:39:48.061545Z 0 [Note] Shutting down plugin 'INNODB_CMPMEM_RESET'
mysqldb_1  | 2020-12-31T12:39:48.061558Z 0 [Note] Shutting down plugin 'INNODB_CMPMEM'
mysqldb_1  | 2020-12-31T12:39:48.061568Z 0 [Note] Shutting down plugin 'INNODB_CMP_RESET'
mysqldb_1  | 2020-12-31T12:39:48.065215Z 0 [Note] Shutting down plugin 'INNODB_CMP'
mysqldb_1  | 2020-12-31T12:39:48.066170Z 0 [Note] Shutting down plugin 'INNODB_LOCK_WAITS'
mysqldb_1  | 2020-12-31T12:39:48.066229Z 0 [Note] Shutting down plugin 'INNODB_LOCKS'
mysqldb_1  | 2020-12-31T12:39:48.066238Z 0 [Note] Shutting down plugin 'INNODB_TRX'
mysqldb_1  | 2020-12-31T12:39:48.066245Z 0 [Note] Shutting down plugin 'InnoDB'
mysqldb_1  | 2020-12-31T12:39:48.068721Z 0 [Note] InnoDB: FTS optimize thread exiting.
mysqldb_1  | 2020-12-31T12:39:48.071607Z 0 [Note] InnoDB: Starting shutdown...
mysqldb_1  | 2020-12-31T12:39:48.175568Z 0 [Note] InnoDB: Dumping buffer pool(s) to /var/lib/mysql/ib_buffer_pool
mysqldb_1  | 2020-12-31T12:39:48.187114Z 0 [Note] InnoDB: Buffer pool(s) dump completed at 201231 12:39:48
mysqldb_1  | 2020-12-31T12:39:49.202325Z 0 [Note] InnoDB: Shutdown completed; log sequence number 12444647
mysqldb_1  | 2020-12-31T12:39:49.213120Z 0 [Note] InnoDB: Removed temporary tablespace data file: "ibtmp1"
mysqldb_1  | 2020-12-31T12:39:49.214807Z 0 [Note] Shutting down plugin 'MEMORY'
mysqldb_1  | 2020-12-31T12:39:49.215772Z 0 [Note] Shutting down plugin 'CSV'
mysqldb_1  | 2020-12-31T12:39:49.216822Z 0 [Note] Shutting down plugin 'sha256_password'
mysqldb_1  | 2020-12-31T12:39:49.218622Z 0 [Note] Shutting down plugin 'mysql_native_password'
mysqldb_1  | 2020-12-31T12:39:49.220749Z 0 [Note] Shutting down plugin 'binlog'
mysqldb_1  | 2020-12-31T12:39:49.246785Z 0 [Note] mysqld: Shutdown complete
mysqldb_1  |
mysqldb_1  | 2020-12-31 12:39:50+00:00 [Note] [Entrypoint]: Temporary server stopped
mysqldb_1  |
mysqldb_1  | 2020-12-31 12:39:50+00:00 [Note] [Entrypoint]: MySQL init process done. Ready for start up.
mysqldb_1  |
mysqldb_1  | 2020-12-31T12:39:50.252268Z 0 [Warning] TIMESTAMP with implicit DEFAULT value is deprecated. Please use --explicit_defaults_for_timestamp server option (see documentation for more details).
mysqldb_1  | 2020-12-31T12:39:50.255274Z 0 [Note] mysqld (mysqld 5.7.28) starting as process 1 ...
mysqldb_1  | 2020-12-31T12:39:50.261505Z 0 [Note] InnoDB: PUNCH HOLE support available
mysqldb_1  | 2020-12-31T12:39:50.264277Z 0 [Note] InnoDB: Mutexes and rw_locks use GCC atomic builtins
mysqldb_1  | 2020-12-31T12:39:50.265540Z 0 [Note] InnoDB: Uses event mutexes
mysqldb_1  | 2020-12-31T12:39:50.266345Z 0 [Note] InnoDB: GCC builtin __atomic_thread_fence() is used for memory barrier
mysqldb_1  | 2020-12-31T12:39:50.266881Z 0 [Note] InnoDB: Compressed tables use zlib 1.2.11
mysqldb_1  | 2020-12-31T12:39:50.267513Z 0 [Note] InnoDB: Using Linux native AIO
mysqldb_1  | 2020-12-31T12:39:50.279993Z 0 [Note] InnoDB: Number of pools: 1
mysqldb_1  | 2020-12-31T12:39:50.281061Z 0 [Note] InnoDB: Using CPU crc32 instructions
mysqldb_1  | 2020-12-31T12:39:50.302094Z 0 [Note] InnoDB: Initializing buffer pool, total size = 128M, instances = 1, chunk size = 128M
mysqldb_1  | 2020-12-31T12:39:50.335838Z 0 [Note] InnoDB: Completed initialization of buffer pool
mysqldb_1  | 2020-12-31T12:39:50.344639Z 0 [Note] InnoDB: If the mysqld execution user is authorized, page cleaner thread priority can be changed. See the man page of setpriority().
mysqldb_1  | 2020-12-31T12:39:50.356387Z 0 [Note] InnoDB: Highest supported file format is Barracuda.
mysqldb_1  | 2020-12-31T12:39:50.370912Z 0 [Note] InnoDB: Creating shared tablespace for temporary tables
mysqldb_1  | 2020-12-31T12:39:50.371655Z 0 [Note] InnoDB: Setting file './ibtmp1' size to 12 MB. Physically writing the file full; Please wait ...
mysqldb_1  | 2020-12-31T12:39:50.412101Z 0 [Note] InnoDB: File './ibtmp1' size is now 12 MB.
mysqldb_1  | 2020-12-31T12:39:50.414071Z 0 [Note] InnoDB: 96 redo rollback segment(s) found. 96 redo rollback segment(s) are active.
mysqldb_1  | 2020-12-31T12:39:50.415006Z 0 [Note] InnoDB: 32 non-redo rollback segment(s) are active.
mysqldb_1  | 2020-12-31T12:39:50.419838Z 0 [Note] InnoDB: Waiting for purge to start
mysqldb_1  | 2020-12-31T12:39:50.470764Z 0 [Note] InnoDB: 5.7.28 started; log sequence number 12444647
mysqldb_1  | 2020-12-31T12:39:50.472300Z 0 [Note] Plugin 'FEDERATED' is disabled.
mysqldb_1  | 2020-12-31T12:39:50.479649Z 0 [Note] InnoDB: Loading buffer pool(s) from /var/lib/mysql/ib_buffer_pool
mysqldb_1  | 2020-12-31T12:39:50.499408Z 0 [Note] InnoDB: Buffer pool(s) load completed at 201231 12:39:50
mysqldb_1  | 2020-12-31T12:39:50.501579Z 0 [Note] Found ca.pem, server-cert.pem and server-key.pem in data directory. Trying to enable SSL support using them.
mysqldb_1  | 2020-12-31T12:39:50.503640Z 0 [Note] Skipping generation of SSL certificates as certificate files are present in data directory.
mysqldb_1  | 2020-12-31T12:39:50.512985Z 0 [Warning] CA certificate ca.pem is self signed.
mysqldb_1  | 2020-12-31T12:39:50.515421Z 0 [Note] Skipping generation of RSA key pair as key files are present in data directory.
mysqldb_1  | 2020-12-31T12:39:50.524194Z 0 [Note] Server hostname (bind-address): '*'; port: 3306
mysqldb_1  | 2020-12-31T12:39:50.531422Z 0 [Note] IPv6 is available.
mysqldb_1  | 2020-12-31T12:39:50.533497Z 0 [Note]   - '::' resolves to '::';
mysqldb_1  | 2020-12-31T12:39:50.534673Z 0 [Note] Server socket created on IP: '::'.
mysqldb_1  | 2020-12-31T12:39:50.546073Z 0 [Warning] Insecure configuration for --pid-file: Location '/var/run/mysqld' in the path is accessible to all OS users. Consider choosing a different directory.
mysqldb_1  | 2020-12-31T12:39:50.579054Z 0 [Note] Event Scheduler: Loaded 0 events
Gracefully stopping... (press Ctrl+C again to force)
Stopping bolum68_websrv_1  ... done
Stopping bolum68_mysqldb_1 ... done

PS C:\AdanZyeDocker\kisim6\bolum68> docker-compose down
Removing bolum68_websrv_1  ... done
Removing bolum68_mysqldb_1 ... done
Removing network bolum68_webnet

**We can build image again with below commands before running**
PS C:\AdanZyeDocker\kisim6\bolum68> docker-compose build
mysqldb uses an image, skipping
Building websrv
Step 1/6 : FROM php:7.3-apache
 ---> ddceef02e8b3
Step 2/6 : RUN apt-get update -y && apt-get install mariadb-client-10.3 -y
 ---> Using cache
 ---> ccaf786d5061
Step 3/6 : RUN docker-php-ext-install mysqli && docker-php-ext-enable mysqli
 ---> Using cache
 ---> 9a21e9ff2f72
Step 4/6 : RUN mkdir /var/www/html/images
 ---> Using cache
 ---> 398e48ed6b74
Step 5/6 : RUN chmod 777 /var/www/html/images
 ---> Using cache
 ---> b9435bb4b7be
Step 6/6 : COPY ./php/ /var/www/html/
 ---> Using cache
 ---> 52355dc07b4f

Successfully built 52355dc07b4f
Successfully tagged bolum68_websrv:latest

PS C:\AdanZyeDocker\kisim6\bolum68> docker-compose up -d
Creating network "bolum68_webnet" with driver "bridge"
Creating bolum68_mysqldb_1 ... done
Creating bolum68_websrv_1  ... done

PS C:\AdanZyeDocker\kisim6\bolum68> docker-compose down
Stopping bolum68_websrv_1  ... done
Stopping bolum68_mysqldb_1 ... done
Removing bolum68_websrv_1  ... done
Removing bolum68_mysqldb_1 ... done
Removing network bolum68_webnet

_________


* ***Docker Orchestration ***

**Docker Swarm**

**Lets establish a cluster using Docker Swarm. We will have 5 node (3 manager,2 worker)**

[node1] (local) root@192.168.0.8 ~
$ docker swarm init --advertise-addr 192.168.0.8

[node1] (local) root@192.168.0.8 ~
$ docker info

[node1] (local) root@192.168.0.8 ~
$ docker swarm join-token manager

[node1] (local) root@192.168.0.8 ~
$ docker swarm join-token worker

[node1] (local) root@192.168.0.8 ~
$ docker node ls
ID                            HOSTNAME   STATUS    AVAILABILITY   MANAGER STATUS   ENGINE VERSION
7lqelnfj9bpg5lqiifqzszdg2 *   node1      Ready     Active         Leader           20.10.0
2r8g9eeolxw98mugq2tdy73my     node2      Ready     Active         Reachable        20.10.0
8991lxnp1vhde1pqkw71du6og     node3      Ready     Active         Reachable        20.10.0
w5c6pke08zrdt3e0s7txslykt     node4      Ready     Active                          20.10.0
1cn2xemkdu8yis29cbynlucyo     node5      Ready     Active                          20.10.0

[node1] (local) root@192.168.0.8 ~
$ docker service create --name test --replicas=5 -p 8080:80 nginx
miqmqueafwh7d17g6cuk1xq3k
overall progress: 5 out of 5 tasks 
1/5: running   [==================================================>] 
2/5: running   [==================================================>] 
3/5: running   [==================================================>] 
4/5: running   [==================================================>] 
5/5: running   [==================================================>] 
verify: Service converged 
[node1] (local) root@192.168.0.8 ~

$ docker service ps test
ID             NAME      IMAGE          NODE      DESIRED STATE   CURRENT STATE            ERROR     PORTS
8izcxc1qz6s1   test.1    nginx:latest   node3     Running         Running 20 seconds ago             
6hz7qtwyoqt7   test.2    nginx:latest   node4     Running         Running 18 seconds ago             
tsf5d5ihvy4l   test.3    nginx:latest   node5     Running         Running 22 seconds ago             
itr865jwaqdl   test.4    nginx:latest   node1     Running         Running 18 seconds ago             
er21mw333s1u   test.5    nginx:latest   node2     Running         Running 20 seconds ago             
[node1] (local) root@192.168.0.8 ~

$ docker ps
CONTAINER ID   IMAGE          COMMAND                  CREATED              STATUS              PORTS     NAMES
7d45e6bd5e6c   nginx:latest   "/docker-entrypoint.…"   About a minute ago   Up About a minute   80/tcp    test.4.itr865jwaqdl4a4k14cl3sofz


[node2] (local) root@192.168.0.7 ~
$ docker swarm join --token SWMTKN-1-2ltxo74cua46bxjtytmkmfmf2dw1x57dxscbjyxmvr48c38lse-280lr854rd9alo80u3hprujc8 192.168.0.8:2377
This node joined a swarm as a manager.
[node2] (local) root@192.168.0.7 ~
$ docker ps
CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS         PORTS     NAMES
9df700041c70   nginx:latest   "/docker-entrypoint.…"   4 minutes ago   Up 4 minutes   80/tcp    test.5.er21mw333s1uzsnh0okelehl2

[node3] (local) root@192.168.0.6 ~
$ docker swarm join --token SWMTKN-1-2ltxo74cua46bxjtytmkmfmf2dw1x57dxscbjyxmvr48c38lse-280lr854rd9alo80u3hprujc8 192.168.0.8:2377
This node joined a swarm as a manager.
[node3] (local) root@192.168.0.6 ~
$ docker ps
CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS         PORTS     NAMES
248f151fd12c   nginx:latest   "/docker-entrypoint.…"   4 minutes ago   Up 4 minutes   80/tcp    test.1.8izcxc1qz6s1kjnnskvsphhkz

[node4] (local) root@192.168.0.5 ~
$ docker swarm join --token SWMTKN-1-2ltxo74cua46bxjtytmkmfmf2dw1x57dxscbjyxmvr48c38lse-bc288gj6d5jso25ynx332ryht 192.168.0.8:2377
This node joined a swarm as a worker.
[node4] (local) root@192.168.0.5 ~
$ docker ps
CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS         PORTS     NAMES
5456bcb1f348   nginx:latest   "/docker-entrypoint.…"   4 minutes ago   Up 4 minutes   80/tcp    test.2.6hz7qtwyoqt7sc20vey0weu3s

[node5] (local) root@192.168.0.4 ~
$ docker swarm join --token SWMTKN-1-2ltxo74cua46bxjtytmkmfmf2dw1x57dxscbjyxmvr48c38lse-bc288gj6d5jso25ynx332ryht 192.168.0.8:2377
This node joined a swarm as a worker.
[node5] (local) root@192.168.0.4 ~
$ docker ps
CONTAINER ID   IMAGE          COMMAND                  CREATED         STATUS         PORTS     NAMES
31dc26190648   nginx:latest   "/docker-entrypoint.…"   4 minutes ago   Up 4 minutes   80/tcp    test.3.tsf5d5ihvy4l099tav6jc8jx4
_____

**Docker Service**

[node1] (local) root@192.168.0.4 ~
docker swarm init --advertise-addr 192.168.0.4
Swarm initialized: current node (zjd59tws8iyehy01h3f7mj9ti) is now a manager.

To add a worker to this swarm, run the following command:

    docker swarm join --token SWMTKN-1-3k4fkht0doawi8ghsvwt7fnbujmz50c6a8puru48goky2ju06d-7liemalimdd4h0nqq9slxiycv 192.168.0.4:2377

To add a manager to this swarm, run 'docker swarm join-token manager' and follow the instructions.

[node1] (local) root@192.168.0.4 ~
$ docker node ls
ID                            HOSTNAME   STATUS    AVAILABILITY   MANAGER STATUS   ENGINE VERSION
zjd59tws8iyehy01h3f7mj9ti *   node1      Ready     Active         Leader           20.10.0
p34gn5i13j0wichy65klur274     node2      Ready     Active                          20.10.0
h2s4hnel2059ref0uzqdy90kf     node3      Ready     Active                          20.10.0

[node1] (local) root@192.168.0.4 ~
$ docker service create --help

[node1] (local) root@192.168.0.4 ~
$ docker service create --name test nginx
i38kai7aqe5qfw2gjv71ua9kd
overall progress: 1 out of 1 tasks 
1/1: running   [==================================================>] 
verify: Service converged 

[node1] (local) root@192.168.0.4 ~
$ docker service ps test
ID             NAME      IMAGE          NODE      DESIRED STATE   CURRENT STATE           ERROR     PORTS
mhecclrf8zl8   test.1    nginx:latest   node1     Running         Running 3 minutes ago             

[node1] (local) root@192.168.0.4 ~
$ docker service inspect test
[
    {
        "ID": "i38kai7aqe5qfw2gjv71ua9kd",
        "Version": {
            "Index": 21
        },
        "CreatedAt": "2020-12-31T16:18:46.087407584Z",
        "UpdatedAt": "2020-12-31T16:18:46.087407584Z",
        "Spec": {
            "Name": "test",
            "Labels": {},
            "TaskTemplate": {
                "ContainerSpec": {
                    "Image": "nginx:latest@sha256:4cf620a5c81390ee209398ecc18e5fb9dd0f5155cd82adcbae532fec94006fb9",
                    "Init": false,
                    "StopGracePeriod": 10000000000,
                    "DNSConfig": {},
                    "Isolation": "default"
                },
                "Resources": {
                    "Limits": {},
                    "Reservations": {}
                },
                "RestartPolicy": {
                    "Condition": "any",
                    "Delay": 5000000000,
                    "MaxAttempts": 0
                },
                "Placement": {
                    "Platforms": [
                        {
                            "Architecture": "amd64",
                            "OS": "linux"
                        },
                        {
                            "OS": "linux"
                        },
                        {
                            "OS": "linux"
                        },
                        {
                            "Architecture": "arm64",
                            "OS": "linux"
                        },
                        {
                            "Architecture": "386",
                            "OS": "linux"
                        },
                        {
                            "Architecture": "mips64le",
                            "OS": "linux"
                        },
                        {
                            "Architecture": "ppc64le",
                            "OS": "linux"
                        },
                        {
                            "Architecture": "s390x",
                            "OS": "linux"
                        }
                    ]
                },
                "ForceUpdate": 0,
                "Runtime": "container"
            },
            "Mode": {
                "Replicated": {
                    "Replicas": 1
                }
            },
            "UpdateConfig": {
                "Parallelism": 1,
                "FailureAction": "pause",
                "Monitor": 5000000000,
                "MaxFailureRatio": 0,
                "Order": "stop-first"
            },
            "RollbackConfig": {
                "Parallelism": 1,
                "FailureAction": "pause",
                "Monitor": 5000000000,
                "MaxFailureRatio": 0,
                "Order": "stop-first"
            },
            "EndpointSpec": {
                "Mode": "vip"
            }
        },
        "Endpoint": {
            "Spec": {}
        }
    }
]

[node1] (local) root@192.168.0.4 ~
$ docker service logs test
test.1.mhecclrf8zl8@node1    | /docker-entrypoint.sh: /docker-entrypoint.d/ is not empty, will attempt to perform configuration
test.1.mhecclrf8zl8@node1    | /docker-entrypoint.sh: Looking for shell scripts in /docker-entrypoint.d/
test.1.mhecclrf8zl8@node1    | /docker-entrypoint.sh: Launching /docker-entrypoint.d/10-listen-on-ipv6-by-default.sh
test.1.mhecclrf8zl8@node1    | 10-listen-on-ipv6-by-default.sh: info: Getting the checksum of /etc/nginx/conf.d/default.conf
test.1.mhecclrf8zl8@node1    | 10-listen-on-ipv6-by-default.sh: info: Enabled listen on IPv6 in /etc/nginx/conf.d/default.conf
test.1.mhecclrf8zl8@node1    | /docker-entrypoint.sh: Launching /docker-entrypoint.d/20-envsubst-on-templates.sh
test.1.mhecclrf8zl8@node1    | /docker-entrypoint.sh: Configuration complete; ready for start up

[node1] (local) root@192.168.0.4 ~
$ docker service ps test
ID             NAME      IMAGE          NODE      DESIRED STATE   CURRENT STATE            ERROR     PORTS
mhecclrf8zl8   test.1    nginx:latest   node1     Running         Running 11 minutes ago             

[node1] (local) root@192.168.0.4 ~
$ docker service scale test=3
test scaled to 3
overall progress: 3 out of 3 tasks 
1/3: running   [==================================================>] 
2/3: running   [==================================================>] 
3/3: running   [==================================================>] 
verify: Service converged 

[node1] (local) root@192.168.0.4 ~
$ docker service ps test
ID             NAME      IMAGE          NODE      DESIRED STATE   CURRENT STATE            ERROR     PORTS
mhecclrf8zl8   test.1    nginx:latest   node1     Running         Running 12 minutes ago             
20kgmvdzjyip   test.2    nginx:latest   node3     Running         Running 12 seconds ago             
0nswh9h6xin4   test.3    nginx:latest   node2     Running         Running 12 seconds ago             

[node1] (local) root@192.168.0.4 ~
$ docker service scale test=2
test scaled to 2
overall progress: 2 out of 2 tasks 
1/2: running   [==================================================>] 
2/2: running   [==================================================>] 
verify: Service converged 

[node1] (local) root@192.168.0.4 ~
$ docker service ps test
ID             NAME      IMAGE          NODE      DESIRED STATE   CURRENT STATE            ERROR     PORTS
mhecclrf8zl8   test.1    nginx:latest   node1     Running         Running 12 minutes ago             
20kgmvdzjyip   test.2    nginx:latest   node3     Running         Running 31 seconds ago             

[node1] (local) root@192.168.0.4 ~
$ docker service rm test
test

**Global service mode creates a container for each node** 
[node1] (local) root@192.168.0.4 ~
$ docker service create --name glb --mode=global nginx
6hoz61nput5zop0z120f96skk
overall progress: 3 out of 3 tasks 
p34gn5i13j0w: running   [==================================================>] 
h2s4hnel2059: running   [==================================================>] 
zjd59tws8iye: running   [==================================================>] 
verify: Service converged 

[node1] (local) root@192.168.0.4 ~
$ docker service ls
ID             NAME      MODE      REPLICAS   IMAGE          PORTS
6hoz61nput5z   glb       global    3/3        nginx:latest   
[node1] (local) root@192.168.0.4 ~

$ docker service ps glb
ID             NAME                            IMAGE          NODE      DESIRED STATE   CURRENT STATE            ERROR     PORTS
o9ogcch13eom   glb.h2s4hnel2059ref0uzqdy90kf   nginx:latest   node3     Running         Running 35 seconds ago             
l6lrhy3d9o4j   glb.p34gn5i13j0wichy65klur274   nginx:latest   node2     Running         Running 35 seconds ago             
spwn4slrtry8   glb.zjd59tws8iyehy01h3f7mj9ti   nginx:latest   node1     Running         Running 35 seconds ago             

**After remove a container from node2, The last status will be like below**
[node1] (local) root@192.168.0.4 ~
$ docker service ps glb
ID             NAME                                IMAGE          NODE      DESIRED STATE   CURRENT STATE           ERROR                         PORTS
o9ogcch13eom   glb.h2s4hnel2059ref0uzqdy90kf       nginx:latest   node3     Running         Running 4 minutes ago                                 
ajuvit6gu3q5   glb.p34gn5i13j0wichy65klur274       nginx:latest   node2     Running         Running 8 seconds ago                                 
l6lrhy3d9o4j    \_ glb.p34gn5i13j0wichy65klur274   nginx:latest   node2     Shutdown        Failed 13 seconds ago   "task: non-zero exit (137)"   
spwn4slrtry8   glb.zjd59tws8iyehy01h3f7mj9ti       nginx:latest   node1     Running         Running 4 minutes ago   

_________

**Overlay Network**
**We are using overlay network to connect docker macine which is running different subnet**

[node1] (local) root@192.168.0.26 ~
$ docker network ls
NETWORK ID     NAME              DRIVER    SCOPE
f18292b20591   bridge            bridge    local
2c5b2136e878   docker_gwbridge   bridge    local
2c387746d074   host              host      local
akywy8hopytt   ingress           overlay   swarm
7c4cb13afc84   none              null      local

[node1] (local) root@192.168.0.26 ~
$ docker network create -d overlay over-net
f0a4wmd8hlpjbhau6dc47i4u1

[node1] (local) root@192.168.0.26 ~
$ docker network ls
NETWORK ID     NAME              DRIVER    SCOPE
f18292b20591   bridge            bridge    local
2c5b2136e878   docker_gwbridge   bridge    local
2c387746d074   host              host      local
akywy8hopytt   ingress           overlay   swarm
7c4cb13afc84   none              null      local
f0a4wmd8hlpj   over-net          overlay   swarm

[node1] (local) root@192.168.0.26 ~
$ docker network inspect over-net 
[
    {
        "Name": "over-net",
        "Id": "f0a4wmd8hlpjbhau6dc47i4u1",
        "Created": "2021-01-01T11:07:32.682089039Z",
        "Scope": "swarm",
        "Driver": "overlay",
        "EnableIPv6": false,
        "IPAM": {
            "Driver": "default",
            "Options": null,
            "Config": [
                {
                    "Subnet": "10.0.1.0/24",
                    "Gateway": "10.0.1.1"
                }
            ]
        },
        "Internal": false,
        "Attachable": false,
        "Ingress": false,
        "ConfigFrom": {
            "Network": ""
        },
        "ConfigOnly": false,
        "Containers": null,
        "Options": {
            "com.docker.network.driver.overlay.vxlanid_list": "4097"
        },
        "Labels": null
    }
]

[node1] (local) root@192.168.0.26 ~
$ docker node ls
ID                            HOSTNAME   STATUS    AVAILABILITY   MANAGER STATUS   ENGINE VERSION
huiverfb1vmrbs7dnhqgercm1 *   node1      Ready     Active         Leader           20.10.0
euh4hjtj3viei8q0m2mdvcg10     node2      Ready     Active         Reachable        20.10.0
qd2l3ei6oe902xt3xbx0wt4s8     node3      Ready     Active         Reachable        20.10.0
e5e97ai4swe6vtjfwj8463vu9     node4      Ready     Active                          20.10.0
aro9s0z298b8goojjnn7dvxbn     node5      Ready     Active                          20.10.0

[node1] (local) root@192.168.0.26 ~
$ docker service create --name web --network over-net -p 8080:80 --replicas=3 ozgurozturknet/web
w3uhwnejd1poulhw1h67buw4l
overall progress: 3 out of 3 tasks 
1/3: running   [==================================================>] 
2/3: running   [==================================================>] 
3/3: running   [==================================================>] 
verify: Service converged 

[node1] (local) root@192.168.0.26 ~
$ docker service ls
ID             NAME      MODE         REPLICAS   IMAGE                       PORTS
w3uhwnejd1po   web       replicated   3/3        ozgurozturknet/web:latest   *:8080->80/tcp

[node1] (local) root@192.168.0.26 ~
$ docker service ps web
ID             NAME      IMAGE                       NODE      DESIRED STATE   CURRENT STATE            ERROR     PORTS
gef50hieox3w   web.1     ozgurozturknet/web:latest   node2     Running         Running 33 seconds ago             
wjwv4ed94u3x   web.2     ozgurozturknet/web:latest   node3     Running         Running 33 seconds ago             
oqbm1emghv30   web.3     ozgurozturknet/web:latest   node1     Running         Running 33 seconds ago             

[node1] (local) root@192.168.0.26 ~
$ docker service create --name db --network over-net ozgurozturknet/fakedb
rjyi7m12otvrc2rq7ab1nip31
overall progress: 1 out of 1 tasks 
1/1: running   [==================================================>] 
verify: Service converged 

[node1] (local) root@192.168.0.26 ~
$ docker service ls
ID             NAME      MODE         REPLICAS   IMAGE                          PORTS
rjyi7m12otvr   db        replicated   1/1        ozgurozturknet/fakedb:latest   
w3uhwnejd1po   web       replicated   3/3        ozgurozturknet/web:latest      *:8080->80/tcp

[node1] (local) root@192.168.0.26 ~
$ docker service ps db
ID             NAME      IMAGE                          NODE      DESIRED STATE   CURRENT STATE            ERROR     PORTS
h9j45adv4wou   db.1      ozgurozturknet/fakedb:latest   node4     Running         Running 31 seconds ago

[node4] (local) root@192.168.0.28 ~
$ docker ps
CONTAINER ID   IMAGE                          COMMAND                  CREATED         STATUS         PORTS              NAMES
f5c569ea75da   ozgurozturknet/fakedb:latest   "/bin/sh -c 'nginx -…"   4 minutes ago   Up 4 minutes   80/tcp, 3306/tcp   db.1.h9j45adv4woujqup53c150ggh

[node4] (local) root@192.168.0.28 ~
$ docker container exec -it f5c569ea75da sh

**Swarm provides DHPC service**
# ping web
PING web (10.0.1.2) 56(84) bytes of data.
64 bytes from 10.0.1.2 (10.0.1.2): icmp_seq=1 ttl=64 time=0.206 ms
64 bytes from 10.0.1.2 (10.0.1.2): icmp_seq=2 ttl=64 time=0.068 ms
64 bytes from 10.0.1.2 (10.0.1.2): icmp_seq=3 ttl=64 time=0.080 ms
64 bytes from 10.0.1.2 (10.0.1.2): icmp_seq=4 ttl=64 time=0.091 ms
64 bytes from 10.0.1.2 (10.0.1.2): icmp_seq=5 ttl=64 time=0.111 ms
^C
--- web ping statistics ---
5 packets transmitted, 5 received, 0% packet loss, time 4ms
rtt min/avg/max/mdev = 0.068/0.111/0.206/0.049 ms

**Swarm provides load-balancing service**
# curl http://web
<html>
<body style="background-color:gray;">

<center><h1 style="color:blue;">Merhaba Dunyali <p>Bu sayfa sana e957e2848414 containerindan sunuluyor</p></h1></center>

</body>
</html>

# curl http://web
<html>
<body style="background-color:gray;">

<center><h1 style="color:blue;">Merhaba Dunyali <p>Bu sayfa sana 5070c03ae760 containerindan sunuluyor</p></h1></center>


</body>
</html>

# curl http://web
<html>
<body style="background-color:gray;">

<center><h1 style="color:blue;">Merhaba Dunyali <p>Bu sayfa sana 907af1eaa05c containerindan sunuluyor</p></h1></center>


</body>
</html>

_________

**Docker Service Update and Roolback**

[node1] (local) root@192.168.0.26 ~
$ docker node ls
ID                            HOSTNAME   STATUS    AVAILABILITY   MANAGER STATUS   ENGINE VERSION
huiverfb1vmrbs7dnhqgercm1 *   node1      Ready     Active         Leader           20.10.0
euh4hjtj3viei8q0m2mdvcg10     node2      Ready     Active         Reachable        20.10.0
qd2l3ei6oe902xt3xbx0wt4s8     node3      Ready     Active         Reachable        20.10.0
e5e97ai4swe6vtjfwj8463vu9     node4      Ready     Active                          20.10.0
aro9s0z298b8goojjnn7dvxbn     node5      Ready     Active                          20.10.0
[node1] (local) root@192.168.0.26 ~
$ docker service create --name websrv --network 
bridge           docker_gwbridge  host             ingress          none             over-net         
[node1] (local) root@192.168.0.26 ~
$ docker service create --name websrv --network over-net -p 8080:80 --replicas=10 ozgurozturknet/web:v1
u3423gvox2cx0qwnkbns21zza
overall progress: 10 out of 10 tasks 
1/10: running   [==================================================>] 
2/10: running   [==================================================>] 
3/10: running   [==================================================>] 
4/10: running   [==================================================>] 
5/10: running   [==================================================>] 
6/10: running   [==================================================>] 
7/10: running   [==================================================>] 
8/10: running   [==================================================>] 
9/10: running   [==================================================>] 
10/10: running   [==================================================>] 
verify: Service converged 
[node1] (local) root@192.168.0.26 ~
$ 
[node1] (local) root@192.168.0.26 ~
$ docker service ls
ID             NAME      MODE         REPLICAS   IMAGE                   PORTS
u3423gvox2cx   websrv    replicated   10/10      ozgurozturknet/web:v1   *:8080->80/tcp
[node1] (local) root@192.168.0.26 ~
$ docker service ps websrv 
ID             NAME        IMAGE                   NODE      DESIRED STATE   CURRENT STATE                ERROR     PORTS
vr59tc3jkahm   websrv.1    ozgurozturknet/web:v1   node5     Running         Running about a minute ago             
rewwdmpxs4xh   websrv.2    ozgurozturknet/web:v1   node4     Running         Running about a minute ago             
ws6856r958mv   websrv.3    ozgurozturknet/web:v1   node1     Running         Running about a minute ago             
02ecuagk1j7d   websrv.4    ozgurozturknet/web:v1   node3     Running         Running about a minute ago             
m4zin3czgt7f   websrv.5    ozgurozturknet/web:v1   node2     Running         Running about a minute ago             
lgg808pyxfq2   websrv.6    ozgurozturknet/web:v1   node5     Running         Running about a minute ago             
f2h0buzz42ad   websrv.7    ozgurozturknet/web:v1   node4     Running         Running about a minute ago             
zxm5a1bj9c8m   websrv.8    ozgurozturknet/web:v1   node2     Running         Running about a minute ago             
rifklv63nt5m   websrv.9    ozgurozturknet/web:v1   node1     Running         Running about a minute ago             
vik79ay0i17g   websrv.10   ozgurozturknet/web:v1   node3     Running         Running about a minute ago

**'docker service update' command provides to update images or configurations without interrupt**

[node1] (local) root@192.168.0.26 ~
$ docker service update --detach --update-delay 5s --update-parallelism 2 --image ozgurozturknet/web:v2 websrv
websrv
[node1] (local) root@192.168.0.26 ~
$ docker service ps websrv 
ID             NAME           IMAGE                   NODE      DESIRED STATE   CURRENT STATE             ERROR     PORTS
vr59tc3jkahm   websrv.1       ozgurozturknet/web:v1   node5     Running         Running 13 minutes ago              
rewwdmpxs4xh   websrv.2       ozgurozturknet/web:v1   node4     Running         Running 13 minutes ago              
ws6856r958mv   websrv.3       ozgurozturknet/web:v1   node1     Running         Running 13 minutes ago              
02ecuagk1j7d   websrv.4       ozgurozturknet/web:v1   node3     Running         Running 13 minutes ago              
m4zin3czgt7f   websrv.5       ozgurozturknet/web:v1   node2     Running         Running 13 minutes ago              
d1rdh67u6qhq   websrv.6       ozgurozturknet/web:v2   node1     Running         Starting 16 seconds ago             
lgg808pyxfq2    \_ websrv.6   ozgurozturknet/web:v1   node5     Shutdown        Shutdown 16 seconds ago             
f2h0buzz42ad   websrv.7       ozgurozturknet/web:v1   node4     Running         Running 13 minutes ago              
zxm5a1bj9c8m   websrv.8       ozgurozturknet/web:v1   node2     Running         Running 13 minutes ago              
q51vlh1kbcdb   websrv.9       ozgurozturknet/web:v2   node5     Running         Starting 16 seconds ago             
rifklv63nt5m    \_ websrv.9   ozgurozturknet/web:v1   node1     Shutdown        Shutdown 16 seconds ago             
vik79ay0i17g   websrv.10      ozgurozturknet/web:v1   node3     Running         Running 13 minutes ago              
[node1] (local) root@192.168.0.26 ~
$ docker service ps websrv 
ID             NAME           IMAGE                   NODE      DESIRED STATE   CURRENT STATE                 ERROR     PORTS
vr59tc3jkahm   websrv.1       ozgurozturknet/web:v1   node5     Running         Running 14 minutes ago                  
rewwdmpxs4xh   websrv.2       ozgurozturknet/web:v1   node4     Running         Running 14 minutes ago                  
g6k0lue9m8z7   websrv.3       ozgurozturknet/web:v2   node1     Running         Running 13 seconds ago                  
ws6856r958mv    \_ websrv.3   ozgurozturknet/web:v1   node1     Shutdown        Shutdown 44 seconds ago                 
qo8sqcmzq5qz   websrv.4       ozgurozturknet/web:v2   node3     Running         Running 13 seconds ago                  
02ecuagk1j7d    \_ websrv.4   ozgurozturknet/web:v1   node3     Shutdown        Shutdown 44 seconds ago                 
sncye9lxgtb1   websrv.5       ozgurozturknet/web:v2   node2     Ready           Ready 6 seconds ago                     
m4zin3czgt7f    \_ websrv.5   ozgurozturknet/web:v1   node2     Shutdown        Running 7 seconds ago                   
d1rdh67u6qhq   websrv.6       ozgurozturknet/web:v2   node1     Running         Running about a minute ago              
lgg808pyxfq2    \_ websrv.6   ozgurozturknet/web:v1   node5     Shutdown        Shutdown about a minute ago             
xscf24poalzs   websrv.7       ozgurozturknet/web:v2   node4     Ready           Ready 6 seconds ago                     
f2h0buzz42ad    \_ websrv.7   ozgurozturknet/web:v1   node4     Shutdown        Running 7 seconds ago                   
zxm5a1bj9c8m   websrv.8       ozgurozturknet/web:v1   node2     Running         Running 14 minutes ago                  
q51vlh1kbcdb   websrv.9       ozgurozturknet/web:v2   node5     Running         Running about a minute ago              
rifklv63nt5m    \_ websrv.9   ozgurozturknet/web:v1   node1     Shutdown        Shutdown about a minute ago             
vik79ay0i17g   websrv.10      ozgurozturknet/web:v1   node3     Running         Running 14 minutes ago                  
[node1] (local) root@192.168.0.26 ~
$ docker service ps websrv 
ID             NAME            IMAGE                   NODE      DESIRED STATE   CURRENT STATE                 ERROR     PORTS
5txwybj13r5i   websrv.1        ozgurozturknet/web:v2   node5     Running         Running 53 seconds ago                  
vr59tc3jkahm    \_ websrv.1    ozgurozturknet/web:v1   node5     Shutdown        Shutdown about a minute ago             
9iu1r8e731i3   websrv.2        ozgurozturknet/web:v2   node4     Running         Running about a minute ago              
rewwdmpxs4xh    \_ websrv.2    ozgurozturknet/web:v1   node4     Shutdown        Shutdown 2 minutes ago                  
g6k0lue9m8z7   websrv.3        ozgurozturknet/web:v2   node1     Running         Running 3 minutes ago                   
ws6856r958mv    \_ websrv.3    ozgurozturknet/web:v1   node1     Shutdown        Shutdown 3 minutes ago                  
qo8sqcmzq5qz   websrv.4        ozgurozturknet/web:v2   node3     Running         Running 3 minutes ago                   
02ecuagk1j7d    \_ websrv.4    ozgurozturknet/web:v1   node3     Shutdown        Shutdown 3 minutes ago                  
sncye9lxgtb1   websrv.5        ozgurozturknet/web:v2   node2     Running         Running 2 minutes ago                   
m4zin3czgt7f    \_ websrv.5    ozgurozturknet/web:v1   node2     Shutdown        Shutdown 3 minutes ago                  
d1rdh67u6qhq   websrv.6        ozgurozturknet/web:v2   node1     Running         Running 4 minutes ago                   
lgg808pyxfq2    \_ websrv.6    ozgurozturknet/web:v1   node5     Shutdown        Shutdown 4 minutes ago                  
xscf24poalzs   websrv.7        ozgurozturknet/web:v2   node4     Running         Running 2 minutes ago                   
f2h0buzz42ad    \_ websrv.7    ozgurozturknet/web:v1   node4     Shutdown        Shutdown 3 minutes ago                  
ne6bm5gdim2z   websrv.8        ozgurozturknet/web:v2   node2     Running         Running 53 seconds ago                  
zxm5a1bj9c8m    \_ websrv.8    ozgurozturknet/web:v1   node2     Shutdown        Shutdown about a minute ago             
q51vlh1kbcdb   websrv.9        ozgurozturknet/web:v2   node5     Running         Running 4 minutes ago                   
rifklv63nt5m    \_ websrv.9    ozgurozturknet/web:v1   node1     Shutdown        Shutdown 4 minutes ago                  
ooe7m562op1m   websrv.10       ozgurozturknet/web:v2   node3     Running         Running about a minute ago              
vik79ay0i17g    \_ websrv.10   ozgurozturknet/web:v1   node3     Shutdown        Shutdown 2 minutes ago 


**'docker service rollback' provides us to return previous image version**

[node1] (local) root@192.168.0.26 ~
$ docker service rollback --detach websrv 
websrv
[node1] (local) root@192.168.0.26 ~
$ docker service ps websrv 
ID             NAME            IMAGE                   NODE      DESIRED STATE   CURRENT STATE            ERROR     PORTS
nlrat2z68bic   websrv.1        ozgurozturknet/web:v1   node5     Ready           Ready 9 seconds ago                
5txwybj13r5i    \_ websrv.1    ozgurozturknet/web:v2   node5     Shutdown        Running 10 seconds ago             
vr59tc3jkahm    \_ websrv.1    ozgurozturknet/web:v1   node5     Shutdown        Shutdown 4 minutes ago             
9iu1r8e731i3   websrv.2        ozgurozturknet/web:v2   node4     Running         Running 5 minutes ago              
rewwdmpxs4xh    \_ websrv.2    ozgurozturknet/web:v1   node4     Shutdown        Shutdown 5 minutes ago             
g6k0lue9m8z7   websrv.3        ozgurozturknet/web:v2   node1     Running         Running 6 minutes ago              
ws6856r958mv    \_ websrv.3    ozgurozturknet/web:v1   node1     Shutdown        Shutdown 7 minutes ago             
qo8sqcmzq5qz   websrv.4        ozgurozturknet/web:v2   node3     Running         Running 6 minutes ago              
02ecuagk1j7d    \_ websrv.4    ozgurozturknet/web:v1   node3     Shutdown        Shutdown 7 minutes ago             
sncye9lxgtb1   websrv.5        ozgurozturknet/web:v2   node2     Running         Running 5 minutes ago              
m4zin3czgt7f    \_ websrv.5    ozgurozturknet/web:v1   node2     Shutdown        Shutdown 6 minutes ago             
d1rdh67u6qhq   websrv.6        ozgurozturknet/web:v2   node1     Running         Running 7 minutes ago              
lgg808pyxfq2    \_ websrv.6    ozgurozturknet/web:v1   node5     Shutdown        Shutdown 8 minutes ago             
xscf24poalzs   websrv.7        ozgurozturknet/web:v2   node4     Running         Running 5 minutes ago              
f2h0buzz42ad    \_ websrv.7    ozgurozturknet/web:v1   node4     Shutdown        Shutdown 6 minutes ago             
ne6bm5gdim2z   websrv.8        ozgurozturknet/web:v2   node2     Running         Running 4 minutes ago              
zxm5a1bj9c8m    \_ websrv.8    ozgurozturknet/web:v1   node2     Shutdown        Shutdown 4 minutes ago             
q51vlh1kbcdb   websrv.9        ozgurozturknet/web:v2   node5     Running         Running 7 minutes ago              
rifklv63nt5m    \_ websrv.9    ozgurozturknet/web:v1   node1     Shutdown        Shutdown 8 minutes ago             
ooe7m562op1m   websrv.10       ozgurozturknet/web:v2   node3     Running         Running 5 minutes ago              
vik79ay0i17g    \_ websrv.10   ozgurozturknet/web:v1   node3     Shutdown        Shutdown 5 minutes ago

_________

**Docker Secrets**

